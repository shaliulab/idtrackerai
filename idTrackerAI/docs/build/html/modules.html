<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Modules &mdash; idtrackerai v0.0 Manual</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="search" title="Search" href="search.html" >
    <link rel="top" title="idtrackerai v0.0 Manual" href="index.html" >
    <link rel="prev" title="Quickstart" href="quickstart.html" > 
  </head>
  <body>

<div class="container">
  <div class="top-scipy-org-logo-header">
    <a href="index.html">
      <img style="border: 0;" alt="idtrackerai" src="_static/img/idtracker_logo.gif"></a>
    </div>
  </div>
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="http://www.gitlab.com/polaviejalab/idtracker">GitLab repo</a></li>
	
        <li class="active"><a href="index.html">idtrackerai v0.0 Manual</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="quickstart.html" title="Quickstart"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modules</a><ul>
<li><a class="reference internal" href="#module-accumulation_manager">Accumulation manager</a></li>
<li><a class="reference internal" href="#accumulator">Accumulator</a></li>
<li><a class="reference internal" href="#module-assigner">Assigner</a></li>
<li><a class="reference internal" href="#module-blob">Blob</a></li>
<li><a class="reference internal" href="#list-of-blobs">List of Blobs</a></li>
<li><a class="reference internal" href="#model-area">Model area</a></li>
<li><a class="reference internal" href="#crossing-detector">Crossing detector</a></li>
<li><a class="reference internal" href="#fragment">Fragment</a></li>
<li><a class="reference internal" href="#list-of-fragments">List of fragments</a></li>
<li><a class="reference internal" href="#global-fragment">Global fragment</a></li>
<li><a class="reference internal" href="#list-of-global-fragments">List of global fragments</a></li>
<li><a class="reference internal" href="#module-segmentation">Segmentation</a></li>
<li><a class="reference internal" href="#module-video_utils">Segmentation utils</a></li>
<li><a class="reference internal" href="#module-get_data">Get data</a></li>
<li><a class="reference internal" href="#epoch-runner">Epoch runner</a></li>
<li><a class="reference internal" href="#trainer">Trainer</a></li>
<li><a class="reference internal" href="#pretraining">Pretraining</a></li>
<li><a class="reference internal" href="#module-correct_impossible_velocity_jumps">Impossible velocity jumps correction</a></li>
<li><a class="reference internal" href="#get-trajectories">Get trajectories</a></li>
<li><a class="reference internal" href="#video">Video</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-accumulation_manager">
<span id="accumulation-manager"></span><h2>Accumulation manager<a class="headerlink" href="#module-accumulation_manager" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="accumulation_manager.AccumulationManager">
<em class="property">class </em><code class="descclassname">accumulation_manager.</code><code class="descname">AccumulationManager</code><span class="sig-paren">(</span><em>video</em>, <em>list_of_fragments</em>, <em>list_of_global_fragments</em>, <em>certainty_threshold=0.1</em>, <em>allow_partial_accumulation=False</em>, <em>threshold_acceptable_accumulation=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Manages the accumulation process.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>video</strong></td>
<td>(&lt;Video object&gt;) Object containing all the parameters of the video.</td>
</tr>
<tr class="row-even"><td><strong>number_of_animals</strong></td>
<td>(int) Number of animals to be tracked</td>
</tr>
<tr class="row-odd"><td><strong>list_of_fragments</strong></td>
<td>(ListOfFragments) Collection of individual and crossing fragments with associated methods</td>
</tr>
<tr class="row-even"><td><strong>list_of_global_fragments: ListOfGlobalFragments</strong></td>
<td>Collection of global fragments</td>
</tr>
<tr class="row-odd"><td><strong>counter</strong></td>
<td>(int) Number of iterations for an instantiation</td>
</tr>
<tr class="row-even"><td><strong>certainty_threshold: float</strong></td>
<td>Value $in [0,1]$ to establish if the identitification of a fragment is certain.</td>
</tr>
<tr class="row-odd"><td><strong>threshold_acceptable_accumulation: float</strong></td>
<td>Value $in [0,1]$ to establish if an accumulation is acceptable</td>
</tr>
<tr class="row-even"><td><strong>accumulation_strategy: string</strong></td>
<td>Accepts “global” and “partial” in order to perform either partial or global accumulation.</td>
</tr>
<tr class="row-odd"><td><strong>individual_fragments_used: list</strong></td>
<td>list with the individual_fragments_identifiers of the individual fragments used for training</td>
</tr>
<tr class="row-even"><td><strong>used_images</strong></td>
<td>(nd.array) images used for training the network</td>
</tr>
<tr class="row-odd"><td><strong>used_labels</strong></td>
<td>(nd.array) labels for the images used for training</td>
</tr>
<tr class="row-even"><td><strong>new_images</strong></td>
<td>(nd.array) set of images that will be added to the new training</td>
</tr>
<tr class="row-odd"><td><strong>new_labels</strong></td>
<td>(nd.array) labels for the set of images that will be added for training</td>
</tr>
<tr class="row-even"><td><strong>_continue_accumulation</strong></td>
<td>(bool) allows the accumulation to continue according to the stopping criteria</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.assign_identities_to_fragments_used_for_training" title="accumulation_manager.AccumulationManager.assign_identities_to_fragments_used_for_training"><code class="xref py py-obj docutils literal"><span class="pre">assign_identities_to_fragments_used_for_training</span></code></a>()</td>
<td>assign the identities to the global fragments used for training and their individual fragments.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.check_if_is_acceptable_for_training" title="accumulation_manager.AccumulationManager.check_if_is_acceptable_for_training"><code class="xref py py-obj docutils literal"><span class="pre">check_if_is_acceptable_for_training</span></code></a>(…)</td>
<td>Check if global_fragment is acceptable for training</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.get_P1_array_and_argsort" title="accumulation_manager.AccumulationManager.get_P1_array_and_argsort"><code class="xref py py-obj docutils literal"><span class="pre">get_P1_array_and_argsort</span></code></a>(global_fragment)</td>
<td>Given a global fragment computes P1 for each of its individual fragments and returns a</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.get_acceptable_global_fragments_for_training" title="accumulation_manager.AccumulationManager.get_acceptable_global_fragments_for_training"><code class="xref py py-obj docutils literal"><span class="pre">get_acceptable_global_fragments_for_training</span></code></a>(…)</td>
<td>Assigns identities during test to individual fragments and rank them</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.get_images_and_labels_for_training" title="accumulation_manager.AccumulationManager.get_images_and_labels_for_training"><code class="xref py py-obj docutils literal"><span class="pre">get_images_and_labels_for_training</span></code></a>()</td>
<td>Create a new dataset of labelled images to train the idCNN in the following way: Per individual select MAXIMAL_IMAGES_PER_ANIMAL images.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.get_new_images_and_labels" title="accumulation_manager.AccumulationManager.get_new_images_and_labels"><code class="xref py py-obj docutils literal"><span class="pre">get_new_images_and_labels</span></code></a>()</td>
<td>get the images and labels of the new global fragments that are going</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.is_not_certain" title="accumulation_manager.AccumulationManager.is_not_certain"><code class="xref py py-obj docutils literal"><span class="pre">is_not_certain</span></code></a>(fragment,&nbsp;certainty_threshold)</td>
<td>State if a fragment has been assigned with sufficient certainty</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.p1_below_random" title="accumulation_manager.AccumulationManager.p1_below_random"><code class="xref py py-obj docutils literal"><span class="pre">p1_below_random</span></code></a>(P1_array,&nbsp;…)</td>
<td>Evaluate if a fragment has been assigned with a certainty lower than</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.reset_accumulation_variables" title="accumulation_manager.AccumulationManager.reset_accumulation_variables"><code class="xref py py-obj docutils literal"><span class="pre">reset_accumulation_variables</span></code></a>()</td>
<td>After an accumulation is finished reinitialise the variables involved in the process.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.reset_non_acceptable_fragment" title="accumulation_manager.AccumulationManager.reset_non_acceptable_fragment"><code class="xref py py-obj docutils literal"><span class="pre">reset_non_acceptable_fragment</span></code></a>(fragment)</td>
<td>Resets the collection of non-acceptable fragments.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.reset_non_acceptable_global_fragment" title="accumulation_manager.AccumulationManager.reset_non_acceptable_global_fragment"><code class="xref py py-obj docutils literal"><span class="pre">reset_non_acceptable_global_fragment</span></code></a>(…)</td>
<td>Reset the flag for non-accpetable global fragments.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.set_fragment_temporary_id" title="accumulation_manager.AccumulationManager.set_fragment_temporary_id"><code class="xref py py-obj docutils literal"><span class="pre">set_fragment_temporary_id</span></code></a>(fragment,&nbsp;…)</td>
<td>Given a P1 array relative to a global fragment sets to 0 the row relative to fragment</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.split_predictions_after_network_assignment" title="accumulation_manager.AccumulationManager.split_predictions_after_network_assignment"><code class="xref py py-obj docutils literal"><span class="pre">split_predictions_after_network_assignment</span></code></a>(…)</td>
<td>Gathers predictions relative to fragment images from the GPU and splits them according to their organisation in fragments.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.update_counter" title="accumulation_manager.AccumulationManager.update_counter"><code class="xref py py-obj docutils literal"><span class="pre">update_counter</span></code></a>()</td>
<td>Update iteration counter</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.update_fragments_used_for_training" title="accumulation_manager.AccumulationManager.update_fragments_used_for_training"><code class="xref py py-obj docutils literal"><span class="pre">update_fragments_used_for_training</span></code></a>()</td>
<td>Once a global fragment has been used for training, sets the flags</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.update_individual_fragments_used_for_training" title="accumulation_manager.AccumulationManager.update_individual_fragments_used_for_training"><code class="xref py py-obj docutils literal"><span class="pre">update_individual_fragments_used_for_training</span></code></a>()</td>
<td>Returns the individual fragments used for training.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.update_list_of_individual_fragments_used" title="accumulation_manager.AccumulationManager.update_list_of_individual_fragments_used"><code class="xref py py-obj docutils literal"><span class="pre">update_list_of_individual_fragments_used</span></code></a>()</td>
<td>Updates the list of individual fragments used for training and their identities.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#accumulation_manager.AccumulationManager.update_used_images_and_labels" title="accumulation_manager.AccumulationManager.update_used_images_and_labels"><code class="xref py py-obj docutils literal"><span class="pre">update_used_images_and_labels</span></code></a>()</td>
<td>Sets as used the images already used for training</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="accumulation_manager.AccumulationManager.assign_identities_to_fragments_used_for_training">
<code class="descname">assign_identities_to_fragments_used_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.assign_identities_to_fragments_used_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.assign_identities_to_fragments_used_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>assign the identities to the global fragments used for training and their individual fragments.
This function checks that the identities of the individual fragments in the global fragment
are consistent with the previously assigned identities</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.check_if_is_acceptable_for_training">
<code class="descname">check_if_is_acceptable_for_training</code><span class="sig-paren">(</span><em>global_fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.check_if_is_acceptable_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.check_if_is_acceptable_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if global_fragment is acceptable for training</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>global_fragment</strong> : GlobalFragment</p>
<blockquote class="last">
<div><p>Object collecting the individual fragments relative to a part of the
video in which all the animals are visible</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="accumulation_manager.AccumulationManager.continue_accumulation">
<code class="descname">continue_accumulation</code><a class="headerlink" href="#accumulation_manager.AccumulationManager.continue_accumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>We stop the accumulation when there are not more global fragments
that are acceptable for training</p>
</dd></dl>

<dl class="staticmethod">
<dt id="accumulation_manager.AccumulationManager.get_P1_array_and_argsort">
<em class="property">static </em><code class="descname">get_P1_array_and_argsort</code><span class="sig-paren">(</span><em>global_fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.get_P1_array_and_argsort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.get_P1_array_and_argsort" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a global fragment computes P1 for each of its individual fragments and returns a
matrix of sorted indices according to P1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>global_fragment</strong> : GlobalFragment object</p>
<blockquote>
<div><p>Collection of images relative to a part of the video in which all the animals are visible.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>P1_array</strong> : nd.array</p>
<blockquote>
<div><p>P1 computed for every individual fragment in the global fragment</p>
</div></blockquote>
<p><strong>index_individual_fragments_sorted_by_P1_max_to_min</strong> : nd.array</p>
<blockquote class="last">
<div><p>Argsort of P1 array of each individual fragment</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.get_acceptable_global_fragments_for_training">
<code class="descname">get_acceptable_global_fragments_for_training</code><span class="sig-paren">(</span><em>candidate_individual_fragments_identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.get_acceptable_global_fragments_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.get_acceptable_global_fragments_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns identities during test to individual fragments and rank them
according to the score computed from the certainty of identification and the
minimum distance travelled</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.get_images_and_labels_for_training">
<code class="descname">get_images_and_labels_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.get_images_and_labels_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.get_images_and_labels_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new dataset of labelled images to train the idCNN in the following way:
Per individual select MAXIMAL_IMAGES_PER_ANIMAL images. Such collection of images is composed
of a ratio corresponding to RATIO_NEW of new images (acquired in the current evaluation of the
global fragments) and RATIO_OLD of images already used
in the previous iteration.</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.get_new_images_and_labels">
<code class="descname">get_new_images_and_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.get_new_images_and_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.get_new_images_and_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>get the images and labels of the new global fragments that are going
to be used for training, this function checks whether the images of a individual
fragment have been added before</p>
</dd></dl>

<dl class="staticmethod">
<dt id="accumulation_manager.AccumulationManager.is_not_certain">
<em class="property">static </em><code class="descname">is_not_certain</code><span class="sig-paren">(</span><em>fragment</em>, <em>certainty_threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.is_not_certain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.is_not_certain" title="Permalink to this definition">¶</a></dt>
<dd><p>State if a fragment has been assigned with sufficient certainty</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragment</strong> : Fragment object</p>
<blockquote>
<div><p>Collection of images related to the same individual</p>
</div></blockquote>
<p><strong>certainty_threshold</strong> : float</p>
<blockquote>
<div><p>Lower boundary in [0,1] for the certainty of a fragment</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>is_not_certain_flag</strong> : bool</p>
<blockquote class="last">
<div><p>True if the fragment is assigned with high enough certainty</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="accumulation_manager.AccumulationManager.p1_below_random">
<em class="property">static </em><code class="descname">p1_below_random</code><span class="sig-paren">(</span><em>P1_array</em>, <em>index_individual_fragment</em>, <em>fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.p1_below_random"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.p1_below_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate if a fragment has been assigned with a certainty lower than
random (wrt the number of possible identities)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>P1_array</strong> : nd.array</p>
<blockquote>
<div><p>P1 vector of a fragment object</p>
</div></blockquote>
<p><strong>index_individual_fragment</strong> : nd.array</p>
<blockquote>
<div><p>Argsort of the P1 array of fragment</p>
</div></blockquote>
<p><strong>fragment</strong> : Fragment</p>
<blockquote>
<div><p>Fragment object containing images associated with a single individual</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>p1_below_random_flag</strong> : bool</p>
<blockquote class="last">
<div><p>True if a fragment has been identified with a certainty below random</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.reset_accumulation_variables">
<code class="descname">reset_accumulation_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.reset_accumulation_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.reset_accumulation_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>After an accumulation is finished reinitialise the variables involved
in the process.</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.reset_non_acceptable_fragment">
<code class="descname">reset_non_acceptable_fragment</code><span class="sig-paren">(</span><em>fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.reset_non_acceptable_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.reset_non_acceptable_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the collection of non-acceptable fragments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragment</strong> : Fragment object</p>
<blockquote class="last">
<div><p>Collection of images related to the same individual</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.reset_non_acceptable_global_fragment">
<code class="descname">reset_non_acceptable_global_fragment</code><span class="sig-paren">(</span><em>global_fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.reset_non_acceptable_global_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.reset_non_acceptable_global_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the flag for non-accpetable global fragments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>global_fragment</strong> : GlobalFragment object</p>
<blockquote class="last">
<div><p>Collection of images relative to a part of the video in which all the animals are visible.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="accumulation_manager.AccumulationManager.set_fragment_temporary_id">
<em class="property">static </em><code class="descname">set_fragment_temporary_id</code><span class="sig-paren">(</span><em>fragment</em>, <em>temporary_id</em>, <em>P1_array</em>, <em>index_individual_fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.set_fragment_temporary_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.set_fragment_temporary_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a P1 array relative to a global fragment sets to 0 the row relative to fragment
which is temporarily identified with identity temporary_id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragment</strong> : Fragment</p>
<blockquote>
<div><p>Fragment object containing images associated with a single individual</p>
</div></blockquote>
<p><strong>temporary_id</strong> : int</p>
<blockquote>
<div><p>temporary identifier associated to fragment</p>
</div></blockquote>
<p><strong>P1_array</strong> : nd.array</p>
<blockquote>
<div><p>P1 vector of fragment</p>
</div></blockquote>
<p><strong>index_individual_fragment</strong> : int</p>
<blockquote>
<div><p>Index of fragment with respect to a global fragment in which it is contained</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>P1_array</strong> : nd.array</p>
<blockquote class="last">
<div><p>updated P1 array</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.split_predictions_after_network_assignment">
<code class="descname">split_predictions_after_network_assignment</code><span class="sig-paren">(</span><em>predictions</em>, <em>softmax_probs</em>, <em>indices_to_split</em>, <em>candidate_individual_fragments_identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.split_predictions_after_network_assignment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.split_predictions_after_network_assignment" title="Permalink to this definition">¶</a></dt>
<dd><p>Gathers predictions relative to fragment images from the GPU and
splits them according to their organisation in fragments.</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.update_counter">
<code class="descname">update_counter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.update_counter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.update_counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Update iteration counter</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.update_fragments_used_for_training">
<code class="descname">update_fragments_used_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.update_fragments_used_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.update_fragments_used_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Once a global fragment has been used for training, sets the flags
used_for_training to TRUE and acceptable_for_training to FALSE</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.update_individual_fragments_used_for_training">
<code class="descname">update_individual_fragments_used_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.update_individual_fragments_used_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.update_individual_fragments_used_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the individual fragments used for training.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>individual_fragments_used_for_training</strong> : list</p>
<blockquote class="last">
<div><p>List of Fragment objects.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.update_list_of_individual_fragments_used">
<code class="descname">update_list_of_individual_fragments_used</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.update_list_of_individual_fragments_used"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.update_list_of_individual_fragments_used" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the list of individual fragments used for training and their identities.
If an individual fragment was added before is not added again.</p>
</dd></dl>

<dl class="method">
<dt id="accumulation_manager.AccumulationManager.update_used_images_and_labels">
<code class="descname">update_used_images_and_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#AccumulationManager.update_used_images_and_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.AccumulationManager.update_used_images_and_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets as used the images already used for training</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="accumulation_manager.get_predictions_of_candidates_fragments">
<code class="descclassname">accumulation_manager.</code><code class="descname">get_predictions_of_candidates_fragments</code><span class="sig-paren">(</span><em>net</em>, <em>video</em>, <em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulation_manager.html#get_predictions_of_candidates_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulation_manager.get_predictions_of_candidates_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Get predictions of individual fragments that have been used to train the
idCNN in an accumulation’s iteration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>net</strong> : ConvNetwork object</p>
<blockquote>
<div><p>network used to identify the animals</p>
</div></blockquote>
<p><strong>video</strong> : Video object</p>
<blockquote>
<div><p>Object containing all the parameters of the video.</p>
</div></blockquote>
<p><strong>fragments</strong> : list</p>
<blockquote>
<div><p>List of fragment objects</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>assigner._predictions</strong> : nd.array</p>
<blockquote>
<div><p>predictions associated to each image organised by individual fragments</p>
</div></blockquote>
<p><strong>assigner._softmax_probs</strong> : np.array</p>
<blockquote>
<div><p>softmax vector associated to each image organised by individual fragments</p>
</div></blockquote>
<p><strong>np.cumsum(lengths)[:-1]</strong> : nd.array</p>
<blockquote>
<div><p>cumulative sum of the number of images contained in every fragment (used to rebuild the collection of images per fragment after gathering predicions and softmax vectors from the gpu)</p>
</div></blockquote>
<p><strong>candidate_individual_fragments_identifiers</strong> : list</p>
<blockquote class="last">
<div><p>list of fragment identifiers</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="accumulator">
<h2>Accumulator<a class="headerlink" href="#accumulator" title="Permalink to this headline">¶</a></h2>
<p>The accumulator module contains the main routine used to compute the accumulation process, which
is an essential part of both the second and third fingerprint protocol.</p>
<span class="target" id="module-accumulator"></span><dl class="function">
<dt id="accumulator.accumulate">
<code class="descclassname">accumulator.</code><code class="descname">accumulate</code><span class="sig-paren">(</span><em>accumulation_manager</em>, <em>video</em>, <em>global_step</em>, <em>net</em>, <em>identity_transfer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulator.html#accumulate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulator.accumulate" title="Permalink to this definition">¶</a></dt>
<dd><p>take care of managing  the process of accumulation
of labelled images. Such process, in complex video, allows us to train  the
idCNN (or whatever function approximator passed in input as <cite>net</cite>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>accumulation_manager</strong> : &lt;accumulation_manager.AccumulationManager object&gt;</p>
<blockquote>
<div><p>Description of parameter <cite>accumulation_manager</cite>.</p>
</div></blockquote>
<p><strong>video</strong> : &lt;video.Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>global_step</strong> : int</p>
<blockquote>
<div><p>network epoch counter</p>
</div></blockquote>
<p><strong>net</strong> : &lt;net.ConvNetwork object&gt;</p>
<blockquote>
<div><p>Convolutional neural network object created according to net.params</p>
</div></blockquote>
<p><strong>identity_transfer</strong> : bool</p>
<blockquote>
<div><p>If true the identity of the individual is also tranferred</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Ratio of accumulated images</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#accumulator.early_stop_criteria_for_accumulation" title="accumulator.early_stop_criteria_for_accumulation"><code class="xref py py-obj docutils literal"><span class="pre">early_stop_criteria_for_accumulation</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="accumulator.early_stop_criteria_for_accumulation">
<code class="descclassname">accumulator.</code><code class="descname">early_stop_criteria_for_accumulation</code><span class="sig-paren">(</span><em>number_of_accumulated_images</em>, <em>number_of_unique_images_in_global_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/accumulator.html#early_stop_criteria_for_accumulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#accumulator.early_stop_criteria_for_accumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>A particularly succesful accumulation causes an early stop of the training
and accumulaton process. This function returns the value, expressed as a ratio
that is evaluated to trigger this behaviour.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>number_of_accumulated_images</strong> : int</p>
<blockquote>
<div><p>Number of images used during the accumulation process (the labelled dataset used to train the network
is subsampled from this set of images).</p>
</div></blockquote>
<p><strong>number_of_unique_images_in_global_fragments</strong> : int</p>
<blockquote>
<div><p>Total number of accumulable images.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Ratio of accumulated images over accumulable images</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-assigner">
<span id="assigner"></span><h2>Assigner<a class="headerlink" href="#module-assigner" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="assigner.assign">
<code class="descclassname">assigner.</code><code class="descname">assign</code><span class="sig-paren">(</span><em>net</em>, <em>video</em>, <em>images</em>, <em>print_flag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/assigner.html#assign"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#assigner.assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Gathers the predictions relative to the images contained in <cite>images</cite>.
Such predictions are returned as attributes of <cite>assigner</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>net</strong> : &lt;ConvNetwork object&gt;</p>
<blockquote>
<div><p>Convolutional neural network object created according to net.params</p>
</div></blockquote>
<p><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving
and loading</p>
</div></blockquote>
<p><strong>images</strong> : ndarray</p>
<blockquote>
<div><p>array of images</p>
</div></blockquote>
<p><strong>print_flag</strong> : bool</p>
<blockquote>
<div><p>If True additional information gathered while getting the predictions
are displayed in the terminal</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">&lt;GetPrediction object&gt;</p>
<blockquote class="last">
<div><p>The assigner object has as main attributes the list of predictions
associated to <cite>images</cite> and the the corresponding softmax vectors</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">GetPrediction</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="assigner.assign_identity">
<code class="descclassname">assigner.</code><code class="descname">assign_identity</code><span class="sig-paren">(</span><em>list_of_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/assigner.html#assign_identity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#assigner.assign_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the individual fragments recursively, based on the value of
P2</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote class="last">
<div><p>collection of the individual fragments and associated methods</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="assigner.assigner">
<code class="descclassname">assigner.</code><code class="descname">assigner</code><span class="sig-paren">(</span><em>list_of_fragments</em>, <em>video</em>, <em>net</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/assigner.html#assigner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#assigner.assigner" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main function of this method: given a list_of_fragments it
puts in place the routine to identify, if possible, each of the individual
fragments. The starting point for the identification is given by the
predictions produced by the ConvNetwork net passed as input. The organisation
of the images in individual fragments is then used to assign more accurately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>collection of the individual fragments and associated methods</p>
</div></blockquote>
<p><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>net</strong> : &lt;ConvNetwork object&gt;</p>
<blockquote class="last">
<div><p>Convolutional neural network object created according to net.params</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">ListOfFragments.reset</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">ListOfFragments.get_images_from_fragments_to_assign</span></code>, <a class="reference internal" href="#assigner.assign" title="assigner.assign"><code class="xref py py-obj docutils literal"><span class="pre">assign</span></code></a>, <a class="reference internal" href="#assigner.compute_identification_statistics_for_non_accumulated_fragments" title="assigner.compute_identification_statistics_for_non_accumulated_fragments"><code class="xref py py-obj docutils literal"><span class="pre">compute_identification_statistics_for_non_accumulated_fragments</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="assigner.compute_identification_statistics_for_non_accumulated_fragments">
<code class="descclassname">assigner.</code><code class="descname">compute_identification_statistics_for_non_accumulated_fragments</code><span class="sig-paren">(</span><em>fragments</em>, <em>assigner</em>, <em>number_of_animals=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/assigner.html#compute_identification_statistics_for_non_accumulated_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#assigner.compute_identification_statistics_for_non_accumulated_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the predictions associated to the images in each (individual)
fragment in the list fragments if computes the statistics necessary for the
identification of fragment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragments</strong> : list</p>
<blockquote>
<div><p>List of individual fragment objects</p>
</div></blockquote>
<p><strong>assigner</strong> : &lt;GetPrediction object&gt;</p>
<blockquote>
<div><p>The assigner object has as main attributes the list of predictions
associated to <cite>images</cite> and the the corresponding softmax vectors</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote class="last">
<div><p>number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-blob">
<span id="blob"></span><h2>Blob<a class="headerlink" href="#module-blob" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="blob.Blob">
<em class="property">class </em><code class="descclassname">blob.</code><code class="descname">Blob</code><span class="sig-paren">(</span><em>centroid</em>, <em>contour</em>, <em>area</em>, <em>bounding_box_in_frame_coordinates</em>, <em>bounding_box_image=None</em>, <em>estimated_body_length=None</em>, <em>pixels=None</em>, <em>number_of_animals=None</em>, <em>frame_number=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob" title="Permalink to this definition">¶</a></dt>
<dd><p>Object representing a blob (collection of pixels) segmented from a frame</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>frame_number</strong></td>
<td>(int) Object containing all the parameters of the video.</td>
</tr>
<tr class="row-even"><td><strong>number_of_animals</strong></td>
<td>(int) Number of animals to be tracked</td>
</tr>
<tr class="row-odd"><td><strong>centroid</strong></td>
<td>(tuple) Centroid as (x,y) in frame coordinate</td>
</tr>
<tr class="row-even"><td><strong>contour: list</strong></td>
<td>List of tuples (x,y) in frame coordinate of the pixels on the boundary of the blob</td>
</tr>
<tr class="row-odd"><td><strong>area</strong></td>
<td>(int) Number of pixels composing the blob</td>
</tr>
<tr class="row-even"><td><strong>bounding_box_in_frame_coordinates: list</strong></td>
<td>List of tuples [(x, y), (x + width, y + height)] of the bounding box rectangle enclosing the blob’s pixels</td>
</tr>
<tr class="row-odd"><td><strong>bounding_box_image: ndarray</strong></td>
<td>Image obtained by clipping the frame to the bounding box</td>
</tr>
<tr class="row-even"><td><strong>estimated_body_length: float</strong></td>
<td>Body length estimated from the bounding box</td>
</tr>
<tr class="row-odd"><td><strong>_image_for_identification: ndarray</strong></td>
<td>Image fed to the network to get the identity of the animal the blob is associated to</td>
</tr>
<tr class="row-even"><td><strong>pixels</strong></td>
<td>(list) List of ravelled pixels belonging to the blob (wrt the full frame)</td>
</tr>
<tr class="row-odd"><td><strong>_is_an_individual</strong></td>
<td>(bool) If True the blob is associated to a single animal</td>
</tr>
<tr class="row-even"><td><strong>_is_a_crossing</strong></td>
<td>(bool) If True the blob is associated to two or more animals touching</td>
</tr>
<tr class="row-odd"><td><strong>_was_a_crossing</strong></td>
<td>(bool) If True the blob has been generated by splitting a crossing in postprocessing</td>
</tr>
<tr class="row-even"><td><strong>_is_a_misclassified_individual</strong></td>
<td>(bool) This property can be modified only by the user during validation. It identifies a blob that was by mistaken associated to a crossing by the DeepCrossingDetector</td>
</tr>
<tr class="row-odd"><td><strong>next</strong></td>
<td>(list) List of blob objects segmented in self.frame_number + 1 whose list of pixels intersect self.pixels</td>
</tr>
<tr class="row-even"><td><strong>previous</strong></td>
<td>(list) List of blob objects segmented in self.frame_number - 1 whose list of pixels intersect self.pixels</td>
</tr>
<tr class="row-odd"><td><strong>_fragment_identifier</strong></td>
<td>(int) Unique integer identifying the fragment (built by blob overlapping) to which self belongs to</td>
</tr>
<tr class="row-even"><td><strong>_blob_index</strong></td>
<td>(int) Hierarchy of the blob</td>
</tr>
<tr class="row-odd"><td><strong>_used_for_training</strong></td>
<td>(bool) If True the image obtained from the blob has been used to train the idCNN</td>
</tr>
<tr class="row-even"><td><strong>_accumulation_step</strong></td>
<td>(int) Accumulation step in which the image associated to the blob has been accumulated</td>
</tr>
<tr class="row-odd"><td><strong>_generated_while_closing_the_gap</strong></td>
<td>(bool) If True the blob has been generated while solving the crossings</td>
</tr>
<tr class="row-even"><td><strong>_user_generated_identity</strong></td>
<td>(int) The identity corrected manually by the user during validation</td>
</tr>
<tr class="row-odd"><td><strong>_identity_corrected_closing_gaps</strong></td>
<td>(int) The identity given to the blob during in postprocessing</td>
</tr>
<tr class="row-even"><td><strong>_identity_corrected_solving_duplication</strong></td>
<td>(int) The identity given to the blob while solving duplications</td>
</tr>
<tr class="row-odd"><td><strong>_identity</strong></td>
<td>(int) Identity associated to the blob</td>
</tr>
<tr class="row-even"><td><strong>is_identified</strong></td>
<td>(bool) True if self.identity is not None</td>
</tr>
<tr class="row-odd"><td><strong>final_identity</strong></td>
<td>(int) Identity assigned to self after validation</td>
</tr>
<tr class="row-even"><td><strong>assigned_identity</strong></td>
<td>(int) Identity assigned to self by the algorithm (ignoring eventual correction made by the user during validation)</td>
</tr>
<tr class="row-odd"><td><strong>has_ambiguous_identity: bool</strong></td>
<td>True if during either accumulation of residual identification the blob has been associated with equal probability to two (or more) distinct identities</td>
</tr>
<tr class="row-even"><td><strong>nose_coordinates</strong></td>
<td>(tuple) Coordinate of the nose of the blob (only for zebrafish)</td>
</tr>
<tr class="row-odd"><td><strong>head_coordinates</strong></td>
<td>(tuple) Coordinate of the centroid of the head of the blob (only for zebrafish)</td>
</tr>
<tr class="row-even"><td><strong>extreme1_coordinate</strong></td>
<td>(tuple)</td>
</tr>
<tr class="row-odd"><td><strong>extreme2_coordinates</strong></td>
<td>(tuple)</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.apply_model_area" title="blob.Blob.apply_model_area"><code class="xref py py-obj docutils literal"><span class="pre">apply_model_area</span></code></a>(video,&nbsp;number_of_animals,&nbsp;…)</td>
<td>Classify self as a crossing or individual blob according to its area</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.check_for_multiple_next_or_previous" title="blob.Blob.check_for_multiple_next_or_previous"><code class="xref py py-obj docutils literal"><span class="pre">check_for_multiple_next_or_previous</span></code></a>([direction])</td>
<td>Return True if self has multiple blobs in its past or future overlapping</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">compute_overlapping_with_previous_blob</span></code>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.distance_from_countour_to" title="blob.Blob.distance_from_countour_to"><code class="xref py py-obj docutils literal"><span class="pre">distance_from_countour_to</span></code></a>(point)</td>
<td>Returns the distance between the point passed as input and the closes point belonging to the contour of the blob.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.get_image_for_identification" title="blob.Blob.get_image_for_identification"><code class="xref py py-obj docutils literal"><span class="pre">get_image_for_identification</span></code></a>(video[,&nbsp;…])</td>
<td>Compute the image that will be used to identify the animal with the idCNN</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.get_nose_and_head_coordinates" title="blob.Blob.get_nose_and_head_coordinates"><code class="xref py py-obj docutils literal"><span class="pre">get_nose_and_head_coordinates</span></code></a>()</td>
<td>Only for zebrafish: Compute the nose coordinate according to [R33]</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.in_a_global_fragment_core" title="blob.Blob.in_a_global_fragment_core"><code class="xref py py-obj docutils literal"><span class="pre">in_a_global_fragment_core</span></code></a>(blobs_in_frame)</td>
<td>A blob in a frame is in the core of a global fragment if in</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.is_a_sure_crossing" title="blob.Blob.is_a_sure_crossing"><code class="xref py py-obj docutils literal"><span class="pre">is_a_sure_crossing</span></code></a>()</td>
<td>A blob marked as a sure crossing will be used to train the Deep Crossing Detector (the artificial neural network used to disriminate images associated with individual from ones associated to crossings).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.is_a_sure_individual" title="blob.Blob.is_a_sure_individual"><code class="xref py py-obj docutils literal"><span class="pre">is_a_sure_individual</span></code></a>()</td>
<td>A blob marked as a sure individual will be used to train the Deep Crossing Detector (the artificial neural network used to disriminate images associated with individual from ones associated to crossings).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.now_points_to" title="blob.Blob.now_points_to"><code class="xref py py-obj docutils literal"><span class="pre">now_points_to</span></code></a>(other)</td>
<td>Given two consecutive blob objects updates their respective overlapping</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.overlaps_with" title="blob.Blob.overlaps_with"><code class="xref py py-obj docutils literal"><span class="pre">overlaps_with</span></code></a>(other)</td>
<td>Given a second blob object, checks if the lists of pixels of the two</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.set_image_for_identification" title="blob.Blob.set_image_for_identification"><code class="xref py py-obj docutils literal"><span class="pre">set_image_for_identification</span></code></a>(video)</td>
<td>Set the image that will be used to identitfy the animal with the idCNN</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.squared_distance_to" title="blob.Blob.squared_distance_to"><code class="xref py py-obj docutils literal"><span class="pre">squared_distance_to</span></code></a>(other)</td>
<td>Returns the squared distance from the centroid of self to the centroid</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="blob.Blob.apply_model_area">
<code class="descname">apply_model_area</code><span class="sig-paren">(</span><em>video</em>, <em>number_of_animals</em>, <em>model_area</em>, <em>identification_image_size</em>, <em>number_of_blobs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.apply_model_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.apply_model_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Classify self as a crossing or individual blob according to its area</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object containing all the parameters of the video.</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>Number of animals to be tracked</p>
</div></blockquote>
<p><strong>model_area</strong> : function</p>
<blockquote>
<div><p>Model of the area blobs representing individual animals</p>
</div></blockquote>
<p><strong>identification_image_size</strong> : tuple</p>
<blockquote>
<div><p>Shape of the images used for the identification</p>
</div></blockquote>
<p><strong>number_of_blobs</strong> : int</p>
<blockquote class="last">
<div><p>Number of blobs segmented in the frame self.frame_number</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.check_for_multiple_next_or_previous">
<code class="descname">check_for_multiple_next_or_previous</code><span class="sig-paren">(</span><em>direction=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.check_for_multiple_next_or_previous"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.check_for_multiple_next_or_previous" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if self has multiple blobs in its past or future overlapping
history of the blob</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>direction</strong> : str</p>
<blockquote>
<div><p>“previous” or “next”. If “previous” the past overlapping history will
be checked in order to find out if the blob will split in the past.
Symmetrically, if “next” the future overlapping history of the blob
will be checked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Bool</p>
<blockquote class="last">
<div><p>If True the blob splits into two or multiple overlapping blobs in its
“past” or “future” history, depending on the parameter “direction”</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.distance_from_countour_to">
<code class="descname">distance_from_countour_to</code><span class="sig-paren">(</span><em>point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.distance_from_countour_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.distance_from_countour_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the distance between the point passed as input and the closes
point belonging to the contour of the blob.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>point</strong> : tuple</p>
<blockquote>
<div><p>(x,y)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p><span class="math">\(\min_{c\in \mbox{ blob.contour}}(d(c, point))\)</span>, where <span class="math">\(d\)</span>
is the Euclidean distance.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.get_image_for_identification">
<code class="descname">get_image_for_identification</code><span class="sig-paren">(</span><em>video</em>, <em>folder_to_save_for_paper_figure=''</em>, <em>image_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.get_image_for_identification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.get_image_for_identification" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the image that will be used to identify the animal with the idCNN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object containing all the parameters of the video.</p>
</div></blockquote>
<p><strong>folder_to_save_for_paper_figure</strong> : str</p>
<blockquote>
<div><p>Path to the folder in which the image will be saved. If ‘’ the image
will not be saved.</p>
</div></blockquote>
<p><strong>image_size</strong> : tuple</p>
<blockquote>
<div><p>Shape of the image</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>Stadardised image</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.get_nose_and_head_coordinates">
<code class="descname">get_nose_and_head_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.get_nose_and_head_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.get_nose_and_head_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Only for zebrafish: Compute the nose coordinate according to <a class="reference internal" href="#r114" id="id2">[R114]</a></p>
<table class="docutils citation" frame="void" id="r114" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[R114]</a></td><td>Wang, Shuo Hong, et al. “Automated planar tracking the waving
bodies of multiple zebrafish swimming in shallow water.”
PloS one 11.4 (2016): e0154714.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.in_a_global_fragment_core">
<code class="descname">in_a_global_fragment_core</code><span class="sig-paren">(</span><em>blobs_in_frame</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.in_a_global_fragment_core"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.in_a_global_fragment_core" title="Permalink to this definition">¶</a></dt>
<dd><p>A blob in a frame is in the core of a global fragment if in
that frame there are as many blobs as number of animals to track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_frame</strong> : list</p>
<blockquote>
<div><p>List of Blob objects representing the animals segmented in the frame
self.frame_number</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Bool</p>
<blockquote class="last">
<div><p>True if the blob is in the core of a global fragment</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.is_a_sure_crossing">
<code class="descname">is_a_sure_crossing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.is_a_sure_crossing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.is_a_sure_crossing" title="Permalink to this definition">¶</a></dt>
<dd><p>A blob marked as a sure crossing will be used to train the Deep
Crossing Detector (the artificial neural network used to disriminate
images associated with individual from ones associated to crossings).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Bool</p>
<blockquote class="last">
<div><p>Blob is a sure crossing if:</p>
<ul class="simple">
<li>it overlaps with one and only one blob in both the immediate past and future frames;</li>
<li>it splits in both its past and future overlapping history</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.is_a_sure_individual">
<code class="descname">is_a_sure_individual</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.is_a_sure_individual"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.is_a_sure_individual" title="Permalink to this definition">¶</a></dt>
<dd><p>A blob marked as a sure individual will be used to train the Deep
Crossing Detector (the artificial neural network used to disriminate
images associated with individual from ones associated to crossings).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Bool</p>
<blockquote class="last">
<div><p>Blob is a sure individual if:</p>
<ul class="simple">
<li>it overlaps with one and only one blob in both the immediate past and future frames;</li>
<li>it never splits in both its past and future overlapping history</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.now_points_to">
<code class="descname">now_points_to</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.now_points_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.now_points_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Given two consecutive blob objects updates their respective overlapping
histories</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> : &lt;Blob object&gt;</p>
<blockquote class="last">
<div><p>An instance of the class Blob</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.overlaps_with">
<code class="descname">overlaps_with</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.overlaps_with"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.overlaps_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a second blob object, checks if the lists of pixels of the two
blobs intersect</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> : &lt;Blob object&gt;</p>
<blockquote>
<div><p>An instance of the class Blob</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Bool</p>
<blockquote class="last">
<div><p>True if the lists of pixels have non-empty intersection</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.set_image_for_identification">
<code class="descname">set_image_for_identification</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.set_image_for_identification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.set_image_for_identification" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the image that will be used to identitfy the animal with the idCNN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote class="last">
<div><p>Object containing all the parameters of the video.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.squared_distance_to">
<code class="descname">squared_distance_to</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.squared_distance_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.squared_distance_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the squared distance from the centroid of self to the centroid
of other</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> : &lt;Blob object&gt; or tuple</p>
<blockquote>
<div><p>An instance of the class Blob or a tuple (x,y)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Squared distance between centroids</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="blob.full2miniframe">
<code class="descclassname">blob.</code><code class="descname">full2miniframe</code><span class="sig-paren">(</span><em>point</em>, <em>boundingBox</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#full2miniframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.full2miniframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a point in the fullframe to the coordinate system defined by the image
generated by considering the bounding box of the blob.
Here it is use for centroids</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>point</strong> : tuple</p>
<blockquote>
<div><p>(x, y)</p>
</div></blockquote>
<p><strong>boundingBox</strong> : list</p>
<blockquote>
<div><p>[(x, y), (x + bounding_box_width, y + bounding_box_height)]</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">tuple</p>
<blockquote class="last">
<div><p><span class="math">\((x^\prime, y^\prime)\)</span></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="blob.remove_background_pixels">
<code class="descclassname">blob.</code><code class="descname">remove_background_pixels</code><span class="sig-paren">(</span><em>height</em>, <em>width</em>, <em>bounding_box_image</em>, <em>pixels</em>, <em>bounding_box_in_frame_coordinates</em>, <em>folder_to_save_for_paper_figure</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#remove_background_pixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.remove_background_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the background pixels substiuting them with a homogeneous black
background.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>height</strong> : int</p>
<blockquote>
<div><p>Frame height</p>
</div></blockquote>
<p><strong>width</strong> : int</p>
<blockquote>
<div><p>Frame width</p>
</div></blockquote>
<p><strong>bounding_box_image</strong> : ndarray</p>
<blockquote>
<div><p>Images cropped from the frame by considering the bounding box associated to a blob</p>
</div></blockquote>
<p><strong>pixels</strong> : list</p>
<blockquote>
<div><p>List of pixels associated to a blob</p>
</div></blockquote>
<p><strong>bounding_box_in_frame_coordinates</strong> : list</p>
<blockquote>
<div><p>[(x, y), (x + bounding_box_width, y + bounding_box_height)]</p>
</div></blockquote>
<p><strong>identification_image_size</strong> : tuple</p>
<blockquote>
<div><p>shape of the identification image</p>
</div></blockquote>
<p><strong>folder_to_save_for_paper_figure</strong> : str</p>
<blockquote>
<div><p>folder to save the images for identification</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>Image with black background pixels</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="list-of-blobs">
<h2>List of Blobs<a class="headerlink" href="#list-of-blobs" title="Permalink to this headline">¶</a></h2>
<p>Collection of instances of the class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a> generated by considering
all the blobs segmented from the video.</p>
<span class="target" id="module-list_of_blobs"></span><dl class="class">
<dt id="list_of_blobs.ListOfBlobs">
<em class="property">class </em><code class="descclassname">list_of_blobs.</code><code class="descname">ListOfBlobs</code><span class="sig-paren">(</span><em>blobs_in_video=None</em>, <em>number_of_frames=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects all the instances of the class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a> generated
from the blobs extracted from the video during segmentation
(see <a class="reference internal" href="#module-segmentation" title="segmentation"><code class="xref py py-mod docutils literal"><span class="pre">segmentation</span></code></a>)</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>blobs_in_video</strong></td>
<td>(list) List of instances of <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a> segmented from the video and organised framewise</td>
</tr>
<tr class="row-even"><td><strong>number_of_frames</strong></td>
<td>(int) number of frames in the video</td>
</tr>
<tr class="row-odd"><td><strong>blobs_are_connected :bool</strong></td>
<td>True if the blobs have already being organised in fragments (see <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>). False otherwise</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.apply_model_area_to_video" title="list_of_blobs.ListOfBlobs.apply_model_area_to_video"><code class="xref py py-obj docutils literal"><span class="pre">apply_model_area_to_video</span></code></a>(video,&nbsp;model_area,&nbsp;…)</td>
<td>Applies <cite>model_area</cite> to every blob extracted from video</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.check_maximal_number_of_blob" title="list_of_blobs.ListOfBlobs.check_maximal_number_of_blob"><code class="xref py py-obj docutils literal"><span class="pre">check_maximal_number_of_blob</span></code></a>(number_of_animals)</td>
<td>Checks that the amount of blobs per frame is not greater than the</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier" title="list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier"><code class="xref py py-obj docutils literal"><span class="pre">compute_crossing_fragment_identifier</span></code></a>()</td>
<td>Assign a unique identifier to fragments associated to a crossing</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index" title="list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index"><code class="xref py py-obj docutils literal"><span class="pre">compute_fragment_identifier_and_blob_index</span></code></a>(…)</td>
<td>Associates a unique fragment identifier to the fragments computed by overlapping see method <a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames"><code class="xref py py-meth docutils literal"><span class="pre">compute_overlapping_between_subsequent_frames()</span></code></a> and sets the blob index as the hierarchy of the blob in the first frame of the fragment to which blob belongs to.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_model_area_and_body_length" title="list_of_blobs.ListOfBlobs.compute_model_area_and_body_length"><code class="xref py py-obj docutils literal"><span class="pre">compute_model_area_and_body_length</span></code></a>(…)</td>
<td>computes the median and standard deviation of all the blobs of the video</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates" title="list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates"><code class="xref py py-obj docutils literal"><span class="pre">compute_nose_and_head_coordinates</span></code></a>()</td>
<td>Computes nose and head coordinate for all the blobs segmented from the</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames"><code class="xref py py-obj docutils literal"><span class="pre">compute_overlapping_between_subsequent_frames</span></code></a>()</td>
<td>Computes overlapping between self and the blobs generated during</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.connect" title="list_of_blobs.ListOfBlobs.connect"><code class="xref py py-obj docutils literal"><span class="pre">connect</span></code></a>()</td>
<td>Connects blobs in subsequent frames by computing their overlapping</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.disconnect" title="list_of_blobs.ListOfBlobs.disconnect"><code class="xref py py-obj docutils literal"><span class="pre">disconnect</span></code></a>()</td>
<td>Reinitialise the previous and next list of blobs</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.erode" title="list_of_blobs.ListOfBlobs.erode"><code class="xref py py-obj docutils literal"><span class="pre">erode</span></code></a>(video)</td>
<td>Erodes all the blobs in the video</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.get_data_plot" title="list_of_blobs.ListOfBlobs.get_data_plot"><code class="xref py py-obj docutils literal"><span class="pre">get_data_plot</span></code></a>()</td>
<td>Gets the areas of all the blobs segmented in the video</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.load" title="list_of_blobs.ListOfBlobs.load"><code class="xref py py-obj docutils literal"><span class="pre">load</span></code></a>(video,&nbsp;path_to_load_blob_list_file)</td>
<td>Short summary.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.reconnect" title="list_of_blobs.ListOfBlobs.reconnect"><code class="xref py py-obj docutils literal"><span class="pre">reconnect</span></code></a>()</td>
<td>Connects blobs in subsequent frames by computing their overlapping</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.save" title="list_of_blobs.ListOfBlobs.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>(video[,&nbsp;path_to_save,&nbsp;number_of_chunks])</td>
<td>save instance</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.update_from_list_of_fragments" title="list_of_blobs.ListOfBlobs.update_from_list_of_fragments"><code class="xref py py-obj docutils literal"><span class="pre">update_from_list_of_fragments</span></code></a>(fragments,&nbsp;…)</td>
<td>Updates the blobs objects generated from the video with the attributes</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.apply_model_area_to_video">
<code class="descname">apply_model_area_to_video</code><span class="sig-paren">(</span><em>video</em>, <em>model_area</em>, <em>identification_image_size</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.apply_model_area_to_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.apply_model_area_to_video" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies <cite>model_area</cite> to every blob extracted from video</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>See <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>model_area</strong> : &lt;ModelArea object&gt;</p>
<blockquote>
<div><p>See <a class="reference internal" href="#model_area.ModelArea" title="model_area.ModelArea"><code class="xref py py-class docutils literal"><span class="pre">ModelArea</span></code></a></p>
</div></blockquote>
<p><strong>identification_image_size</strong> : int</p>
<blockquote>
<div><p>size of the identification image (see
<a class="reference internal" href="#blob.Blob.get_image_for_identification" title="blob.Blob.get_image_for_identification"><code class="xref py py-meth docutils literal"><span class="pre">get_image_for_identification()</span></code></a> and
<code class="xref py py-attr docutils literal"><span class="pre">image_for_identification</span></code>)</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote class="last">
<div><p>number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.check_maximal_number_of_blob">
<code class="descname">check_maximal_number_of_blob</code><span class="sig-paren">(</span><em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.check_maximal_number_of_blob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.check_maximal_number_of_blob" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the amount of blobs per frame is not greater than the
number of animals to track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>List of indices of frames in which more blobs than animals to track
have been segmented</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier">
<code class="descname">compute_crossing_fragment_identifier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_crossing_fragment_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a unique identifier to fragments associated to a crossing</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index">
<code class="descname">compute_fragment_identifier_and_blob_index</code><span class="sig-paren">(</span><em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_fragment_identifier_and_blob_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Associates a unique fragment identifier to the fragments computed by
overlapping see method
<a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames"><code class="xref py py-meth docutils literal"><span class="pre">compute_overlapping_between_subsequent_frames()</span></code></a> and sets the blob
index as the hierarchy of the blob in the first frame of the fragment to
which blob belongs to.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>number_of_animals</strong> : int</p>
<blockquote class="last">
<div><p>number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_model_area_and_body_length">
<code class="descname">compute_model_area_and_body_length</code><span class="sig-paren">(</span><em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_model_area_and_body_length"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_model_area_and_body_length" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the median and standard deviation of all the blobs of the video
and the median_body_length estimated from the diagonal of the bounding box.
These values are later used to discard blobs that are not fish and potentially
belong to a crossing.</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates">
<code class="descname">compute_nose_and_head_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_nose_and_head_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes nose and head coordinate for all the blobs segmented from the
video</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames">
<code class="descname">compute_overlapping_between_subsequent_frames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_overlapping_between_subsequent_frames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes overlapping between self and the blobs generated during
segmentation in the next frames</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects blobs in subsequent frames by computing their overlapping</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.disconnect">
<code class="descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reinitialise the previous and next list of blobs
(see <code class="xref py py-attr docutils literal"><span class="pre">next</span></code> and <code class="xref py py-attr docutils literal"><span class="pre">previous</span></code>)</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.erode">
<code class="descname">erode</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.erode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.erode" title="Permalink to this definition">¶</a></dt>
<dd><p>Erodes all the blobs in the video</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote class="last">
<div><p>see <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.get_data_plot">
<code class="descname">get_data_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.get_data_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.get_data_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the areas of all the blobs segmented in the video</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>Areas of all the blobs segmented in the video</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="list_of_blobs.ListOfBlobs.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>video</em>, <em>path_to_load_blob_list_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Short summary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>See <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>path_to_load_blob_list_file</strong> : str</p>
<blockquote>
<div><p>path to load a list of blobs</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">&lt;ListOfBlobs object&gt;</p>
<blockquote class="last">
<div><p>an instance of ListOfBlobs</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.reconnect">
<code class="descname">reconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.reconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.reconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects blobs in subsequent frames by computing their overlapping
and sets blobs_are_connected to True</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>video</em>, <em>path_to_save=None</em>, <em>number_of_chunks=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save instance</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.update_from_list_of_fragments">
<code class="descname">update_from_list_of_fragments</code><span class="sig-paren">(</span><em>fragments</em>, <em>fragment_identifier_to_index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.update_from_list_of_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.update_from_list_of_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the blobs objects generated from the video with the attributes
computed for each fragment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragments</strong> : list</p>
<blockquote>
<div><p>List of all the fragments</p>
</div></blockquote>
<p><strong>fragment_identifier_to_index</strong> : int</p>
<blockquote class="last">
<div><p>index to retrieve the fragment corresponding to a certain fragment
identifier (see
<code class="xref py py-meth docutils literal"><span class="pre">compute_fragment_identifier_and_blob_index()</span></code>)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="model-area">
<h2>Model area<a class="headerlink" href="#model-area" title="Permalink to this headline">¶</a></h2>
<p>Allows to apply a model of the area of the indiviudals to be tracked to all the
blobs collected during the segmentation process (see <a class="reference internal" href="#module-segmentation" title="segmentation"><code class="xref py py-mod docutils literal"><span class="pre">segmentation</span></code></a>)</p>
<span class="target" id="module-model_area"></span><dl class="class">
<dt id="model_area.ModelArea">
<em class="property">class </em><code class="descclassname">model_area.</code><code class="descname">ModelArea</code><span class="sig-paren">(</span><em>mean</em>, <em>median</em>, <em>std</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_area.html#ModelArea"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#model_area.ModelArea" title="Permalink to this definition">¶</a></dt>
<dd><p>Model of the area used to perform a first discrimination between blobs
representing single individual and multiple touching animals (crossings)</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>median</strong></td>
<td>(float) median of the area of the blobs segmented from portions of the video in which all the animals are visible (not touching)</td>
</tr>
<tr class="row-even"><td><strong>mean</strong></td>
<td>(float) mean of the area of the blobs segmented from portions of the video in which all the animals are visible (not touching)</td>
</tr>
<tr class="row-odd"><td><strong>std</strong></td>
<td>(float) standard deviation of the area of the blobs segmented from portions of the video in which all the animals are visible (not touching)</td>
</tr>
<tr class="row-even"><td><strong>std_tolerance</strong></td>
<td>(int) tolerance factor</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">__call__</span></code>(area[,&nbsp;std_tolerance])</td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="crossing-detector">
<h2>Crossing detector<a class="headerlink" href="#crossing-detector" title="Permalink to this headline">¶</a></h2>
<p>Given a collection of Blob objects (see <code class="xref py py-class docutils literal"><span class="pre">Blob</span></code>), the crossing detector module allows to apply a pre-computed model of the area to each of the blobs and, if specified,
use a function approximator (in this case a convolutional neural network) in order to distinguish between Blob representing single individual and touching individuals.</p>
<span class="target" id="module-crossing_detector"></span><dl class="function">
<dt id="crossing_detector.detect_crossings">
<code class="descclassname">crossing_detector.</code><code class="descname">detect_crossings</code><span class="sig-paren">(</span><em>list_of_blobs</em>, <em>video</em>, <em>model_area</em>, <em>use_network=True</em>, <em>return_store_objects=False</em>, <em>plot_flag=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crossing_detector.html#detect_crossings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crossing_detector.detect_crossings" title="Permalink to this definition">¶</a></dt>
<dd><p>Short summary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>list_of_blobs</strong> : &lt;ListOfBlobs object&gt;</p>
<blockquote>
<div><p>Collection of the Blob objects extracted from the video</p>
</div></blockquote>
<p><strong>video</strong> :  &lt;Video object&gt;</p>
<blockquote>
<div><p>Object containing all the parameters of the video.</p>
</div></blockquote>
<p><strong>model_area</strong> : function</p>
<blockquote>
<div><p>Model of the area of a single individual</p>
</div></blockquote>
<p><strong>use_network</strong> : bool</p>
<blockquote>
<div><p>If True the Deep Crossing Detector is used to distinguish between individuals and crossings images. Otherwise only the model area is applied</p>
</div></blockquote>
<p><strong>return_store_objects</strong> : bool</p>
<blockquote>
<div><p>If True the instantiations of the class <code class="xref py py-class docutils literal"><span class="pre">Store_Accuracy_and_Loss</span></code> are returned by the function</p>
</div></blockquote>
<p><strong>plot_flag</strong> : bool</p>
<blockquote class="last">
<div><p>If True a figure representing the values of the loss function, accuracy and accuracy per class for both the training and validation set.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="fragment">
<h2>Fragment<a class="headerlink" href="#fragment" title="Permalink to this headline">¶</a></h2>
<p>A fragment is a collection of Blob objects (see <code class="xref py py-class docutils literal"><span class="pre">Blob</span></code>) that refer to the same individual. A Fragment object manages such a collection of Blob objects
to facilitate the fingerprint operations and later on the identification of the animal reprpresented in the fragment.</p>
<span class="target" id="module-fragment"></span><dl class="class">
<dt id="fragment.Fragment">
<em class="property">class </em><code class="descclassname">fragment.</code><code class="descname">Fragment</code><span class="sig-paren">(</span><em>fragment_identifier=None</em>, <em>start_end=None</em>, <em>blob_hierarchy_in_starting_frame=None</em>, <em>images=None</em>, <em>bounding_box_in_frame_coordinates=None</em>, <em>centroids=None</em>, <em>areas=None</em>, <em>pixels=None</em>, <em>is_an_individual=None</em>, <em>is_a_crossing=None</em>, <em>number_of_animals=None</em>, <em>user_generated_identity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects the Blob objects (<a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a>) associated to the same individual or crossing.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>fragment_identifier</strong></td>
<td>(int) Unique identifier of the fragment assigned with <a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index" title="list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index"><code class="xref py py-func docutils literal"><span class="pre">compute_fragment_identifier_and_blob_index()</span></code></a> and <a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier" title="list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier"><code class="xref py py-func docutils literal"><span class="pre">compute_crossing_fragment_identifier()</span></code></a></td>
</tr>
<tr class="row-even"><td><strong>start_end</strong></td>
<td>(tuple) (starting_frame,  ending_frame) of the fragment</td>
</tr>
<tr class="row-odd"><td><strong>blob_hierarchy_in_starting_frame</strong></td>
<td>(int) Hierarchy of the blob in the starting frame of the fragment (the hierarchy if compute bottom-top, left-right).</td>
</tr>
<tr class="row-even"><td><strong>images</strong></td>
<td>(list) List of images associated to every blob represented in the fragment and ordered according to the frame they have been segmented from</td>
</tr>
<tr class="row-odd"><td><strong>bounding_box_in_frame_coordinates</strong></td>
<td>(tuple) List of bounding boxes (see <code class="xref py py-attr docutils literal"><span class="pre">bounding_box_in_frame_coordinates</span></code>)</td>
</tr>
<tr class="row-even"><td><strong>centroids</strong></td>
<td>(list) List of centroids (see <code class="xref py py-attr docutils literal"><span class="pre">centroid</span></code>)</td>
</tr>
<tr class="row-odd"><td><strong>areas</strong></td>
<td>(list) List of areas (see <code class="xref py py-attr docutils literal"><span class="pre">area</span></code>)</td>
</tr>
<tr class="row-even"><td><strong>pixels</strong></td>
<td>(list) List of pixels (see <code class="xref py py-attr docutils literal"><span class="pre">pixels</span></code>)</td>
</tr>
<tr class="row-odd"><td><strong>is_an_individual</strong></td>
<td>(bool) True if the image has been classified as representing an individual by <a class="reference internal" href="#crossing_detector.detect_crossings" title="crossing_detector.detect_crossings"><code class="xref py py-func docutils literal"><span class="pre">detect_crossings()</span></code></a></td>
</tr>
<tr class="row-even"><td><strong>is_a_crossing</strong></td>
<td>(bool) True if the image has been classified as representing a crossing by <a class="reference internal" href="#crossing_detector.detect_crossings" title="crossing_detector.detect_crossings"><code class="xref py py-func docutils literal"><span class="pre">detect_crossings()</span></code></a></td>
</tr>
<tr class="row-odd"><td><strong>number_of_animals</strong></td>
<td>(int) Number of animal to be tracked</td>
</tr>
<tr class="row-even"><td><strong>user_generated_identity</strong></td>
<td>(int) Identity generated by the user during validation (if it exists, else None)</td>
</tr>
<tr class="row-odd"><td><strong>is_in_a_global_fragment</strong></td>
<td>(bool) True if the fragment is contained in a global fragment (see <a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a>)</td>
</tr>
<tr class="row-even"><td><strong>used_for_training</strong></td>
<td>(bool) True if the fragment has been used to train the idCNN in the finerprinting protocol used to track the video</td>
</tr>
<tr class="row-odd"><td><strong>accumulated_globally</strong></td>
<td>(bool) True if the fragment’s images have been accumulated with global strategy as references during the fingerprinting protocol used to track the video</td>
</tr>
<tr class="row-even"><td><strong>accumulated_partially</strong></td>
<td>(bool) True if the fragment’s images have been accumulated with partial strategy as references during the fingerprinting protocol used to track the video</td>
</tr>
<tr class="row-odd"><td><strong>accumulation_step</strong></td>
<td>(int) Accumulation step in which the fragment’s images have been accumulated</td>
</tr>
<tr class="row-even"><td><strong>accumulable</strong></td>
<td>(bool) True if the fragment is eligible for accumulation i.e. it is contained in a global fragment object (see <a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a>)</td>
</tr>
<tr class="row-odd"><td><strong>used_for_pretraining</strong></td>
<td>(bool) True if the fragment has been used to pretrain the idCNN in the third protocol (see <a class="reference internal" href="#pre_trainer.pre_train" title="pre_trainer.pre_train"><code class="xref py py-func docutils literal"><span class="pre">pre_train()</span></code></a>)</td>
</tr>
<tr class="row-even"><td><strong>acceptable_for_training</strong></td>
<td>(bool) True if the fragment satisfies the conditions in <a class="reference internal" href="#accumulation_manager.AccumulationManager.check_if_is_acceptable_for_training" title="accumulation_manager.AccumulationManager.check_if_is_acceptable_for_training"><code class="xref py py-meth docutils literal"><span class="pre">check_if_is_acceptable_for_training()</span></code></a></td>
</tr>
<tr class="row-odd"><td><strong>frequencies</strong></td>
<td>(ndarray) array with shape [1, number_of_animals]. The ith component is the number of times the fragment has been assigned by the idCNN (argmax of the softmax predictions) to the identity i</td>
</tr>
<tr class="row-even"><td><strong>P1_vector</strong></td>
<td>(ndarray) array with shape [1, number_of_animals] computed from frequencies by <a class="reference internal" href="#fragment.Fragment.compute_identification_statistics" title="fragment.Fragment.compute_identification_statistics"><code class="xref py py-meth docutils literal"><span class="pre">compute_identification_statistics()</span></code></a></td>
</tr>
<tr class="row-odd"><td><strong>P2_vector</strong></td>
<td>(ndarray) array with shape [1, number_of_animals] computed from the P1_vector and considering all the identified fragment overlapping (in frames) with self by <a class="reference internal" href="#fragment.Fragment.compute_identification_statistics" title="fragment.Fragment.compute_identification_statistics"><code class="xref py py-meth docutils literal"><span class="pre">compute_identification_statistics()</span></code></a></td>
</tr>
<tr class="row-even"><td><strong>certainty</strong></td>
<td>(float) certainty of the identification of the fragment computed according to meth:<cite>compute_certainty_of_individual_fragment</cite> (depends only on the predictions of the idCNN for the fragment’s images)</td>
</tr>
<tr class="row-odd"><td><strong>certainty_P2</strong></td>
<td>(float) certainty of the identification of the fragment computed according to meth:<cite>compute_P2_vector</cite></td>
</tr>
<tr class="row-even"><td><strong>is_certain</strong></td>
<td>(bool) True if <code class="xref py py-attr docutils literal"><span class="pre">certainty</span></code> is greater than <code class="xref py py-const docutils literal"><span class="pre">CERTAINTY_THRESHOLD</span></code></td>
</tr>
<tr class="row-odd"><td><strong>temporary_id</strong></td>
<td>(int) Identity assigned to the fragment during the fingerprint protocols cascade</td>
</tr>
<tr class="row-even"><td><strong>identity</strong></td>
<td>(int) Identity assigned to the fragment</td>
</tr>
<tr class="row-odd"><td><strong>identity_is_fixed</strong></td>
<td>(bool) True if the <code class="xref py py-attr docutils literal"><span class="pre">certainty_P2</span></code> is greater than <code class="xref py py-const docutils literal"><span class="pre">FIXED_IDENTITY_THRESHOLD</span></code></td>
</tr>
<tr class="row-even"><td><strong>identity_corrected_closing_gaps</strong></td>
<td>(int) Identity assigned to the fragment while solving the crossing if it exists else None</td>
</tr>
<tr class="row-odd"><td><strong>user_generated_identity</strong></td>
<td>(int) Identity assigned to the fragment by the user during validation if it exists else None</td>
</tr>
<tr class="row-even"><td><strong>final_identity</strong></td>
<td>(int) Final identity of the fragment. It corresponds to <code class="xref py py-attr docutils literal"><span class="pre">user_generated_identity</span></code> if it exist otherwise to the identity assigned by the algorithm</td>
</tr>
<tr class="row-odd"><td><strong>assigned_identity</strong></td>
<td>(int) Identity assigned to the fragment by the algorithm</td>
</tr>
<tr class="row-even"><td><strong>ambiguous_identities</strong></td>
<td>(list) List of possible identities in case the assignment is ambiguous (two or more identity can be assigned to the fragment with the same certainty)</td>
</tr>
<tr class="row-odd"><td><strong>potentially_randomly_assigned</strong></td>
<td>(bool) True if <code class="xref py py-attr docutils literal"><span class="pre">certainty</span></code> is below random wrt the number of images in the fragment</td>
</tr>
<tr class="row-even"><td><strong>non_consistent</strong></td>
<td>(bool) True if exist a fragment that overlaps in frame with self whose identity is the same as self</td>
</tr>
<tr class="row-odd"><td><strong>number_of_images</strong></td>
<td>(int) number of images composing the fragment</td>
</tr>
<tr class="row-even"><td><strong>has_enough_accumulated_coexisting_fragments</strong></td>
<td>(bool) the partial accumulation strategy assumes that the condition of <code class="xref py py-attr docutils literal"><span class="pre">has_enough_accumulated_coexisting_fragments</span></code> holds</td>
</tr>
<tr class="row-odd"><td><strong>distance_travelled</strong></td>
<td>(float) distance travelled by the individual in the fragment</td>
</tr>
<tr class="row-even"><td><strong>coexisting_individual_fragments</strong></td>
<td>(list) List of fragment objects that coexist (in frames) with self and that represent an individual</td>
</tr>
<tr class="row-odd"><td><strong>number_of_coexisting_individual_fragments</strong></td>
<td>(int) Number of individual fragments coexisting with self</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.are_overlapping" title="fragment.Fragment.are_overlapping"><code class="xref py py-obj docutils literal"><span class="pre">are_overlapping</span></code></a>(other)</td>
<td>Short summary.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.assign_identity" title="fragment.Fragment.assign_identity"><code class="xref py py-obj docutils literal"><span class="pre">assign_identity</span></code></a>()</td>
<td>Assigns the identity to self by considering the fragments coexisting with it.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.check_consistency_with_coexistent_individual_fragments" title="fragment.Fragment.check_consistency_with_coexistent_individual_fragments"><code class="xref py py-obj docutils literal"><span class="pre">check_consistency_with_coexistent_individual_fragments</span></code></a>(…)</td>
<td>Check that the temporary identity assigned to the fragment is</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.compute_P1_from_frequencies" title="fragment.Fragment.compute_P1_from_frequencies"><code class="xref py py-obj docutils literal"><span class="pre">compute_P1_from_frequencies</span></code></a>(frequencies)</td>
<td>Given the frequencies of a individual fragment computer the P1 vector.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.compute_P2_vector" title="fragment.Fragment.compute_P2_vector"><code class="xref py py-obj docutils literal"><span class="pre">compute_P2_vector</span></code></a>()</td>
<td>Computes the P2_vector related to self.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.compute_border_velocity" title="fragment.Fragment.compute_border_velocity"><code class="xref py py-obj docutils literal"><span class="pre">compute_border_velocity</span></code></a>(other)</td>
<td>Velocity necessary to cover the space between two fragments</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.compute_certainty_of_individual_fragment" title="fragment.Fragment.compute_certainty_of_individual_fragment"><code class="xref py py-obj docutils literal"><span class="pre">compute_certainty_of_individual_fragment</span></code></a>(…)</td>
<td>Computes the certainty given the P1_vector of the fragment by</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.compute_identification_frequencies_individual_fragment" title="fragment.Fragment.compute_identification_frequencies_individual_fragment"><code class="xref py py-obj docutils literal"><span class="pre">compute_identification_frequencies_individual_fragment</span></code></a>(…)</td>
<td>Counts the argmax of predictions per row</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.compute_identification_statistics" title="fragment.Fragment.compute_identification_statistics"><code class="xref py py-obj docutils literal"><span class="pre">compute_identification_statistics</span></code></a>(…[,&nbsp;…])</td>
<td>Computes the statistics necessary to the identification of the</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.compute_median_softmax" title="fragment.Fragment.compute_median_softmax"><code class="xref py py-obj docutils literal"><span class="pre">compute_median_softmax</span></code></a>(softmax_probs,&nbsp;…)</td>
<td>Given the softmax of the predictions outputted by the network, it</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.frame_by_frame_velocity" title="fragment.Fragment.frame_by_frame_velocity"><code class="xref py py-obj docutils literal"><span class="pre">frame_by_frame_velocity</span></code></a>()</td>
<td>Short summary.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.get_attribute_of_coexisting_fragments" title="fragment.Fragment.get_attribute_of_coexisting_fragments"><code class="xref py py-obj docutils literal"><span class="pre">get_attribute_of_coexisting_fragments</span></code></a>(attribute)</td>
<td>Retrieve a spevific attribute from the collection of fragments</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.get_coexisting_individual_fragments_indices" title="fragment.Fragment.get_coexisting_individual_fragments_indices"><code class="xref py py-obj docutils literal"><span class="pre">get_coexisting_individual_fragments_indices</span></code></a>(…)</td>
<td>Get the list of fragment objects representing and individual (i.e.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.get_fixed_identities_of_coexisting_fragments" title="fragment.Fragment.get_fixed_identities_of_coexisting_fragments"><code class="xref py py-obj docutils literal"><span class="pre">get_fixed_identities_of_coexisting_fragments</span></code></a>()</td>
<td>Considers the fragments coexisting with self and returns their</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.get_missing_identities_in_coexisting_fragments" title="fragment.Fragment.get_missing_identities_in_coexisting_fragments"><code class="xref py py-obj docutils literal"><span class="pre">get_missing_identities_in_coexisting_fragments</span></code></a>(…)</td>
<td>Returns the identities that have not been assigned to the set of fragments coexisting with self</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.get_neighbour_fragment" title="fragment.Fragment.get_neighbour_fragment"><code class="xref py py-obj docutils literal"><span class="pre">get_neighbour_fragment</span></code></a>(fragments,&nbsp;scope[,&nbsp;…])</td>
<td>If it exist, gets the fragment in the list of all fragment whose</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.get_possible_identities" title="fragment.Fragment.get_possible_identities"><code class="xref py py-obj docutils literal"><span class="pre">get_possible_identities</span></code></a>(P2_vector)</td>
<td>Check if P2 has two identical maxima.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.recompute_P2_of_coexisting_fragments" title="fragment.Fragment.recompute_P2_of_coexisting_fragments"><code class="xref py py-obj docutils literal"><span class="pre">recompute_P2_of_coexisting_fragments</span></code></a>()</td>
<td>Updates the P2 of the fragments coexisting with self</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.reset" title="fragment.Fragment.reset"><code class="xref py py-obj docutils literal"><span class="pre">reset</span></code></a>([roll_back_to])</td>
<td>Reset attributes of self to a specific part of the algorithm</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.set_P1_vector_accumulated" title="fragment.Fragment.set_P1_vector_accumulated"><code class="xref py py-obj docutils literal"><span class="pre">set_P1_vector_accumulated</span></code></a>()</td>
<td>If self has been used for training its P1_vector is modified to be</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#fragment.Fragment.set_distance_travelled" title="fragment.Fragment.set_distance_travelled"><code class="xref py py-obj docutils literal"><span class="pre">set_distance_travelled</span></code></a>()</td>
<td>Computes the distance travelled by the individual in the fragment.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#fragment.Fragment.set_partially_or_globally_accumualted" title="fragment.Fragment.set_partially_or_globally_accumualted"><code class="xref py py-obj docutils literal"><span class="pre">set_partially_or_globally_accumualted</span></code></a>(…)</td>
<td>Sets <code class="xref py py-attr docutils literal"><span class="pre">accumulated_globally</span></code> and <code class="xref py py-attr docutils literal"><span class="pre">accumulated_partially</span></code></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="fragment.Fragment.are_overlapping">
<code class="descname">are_overlapping</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.are_overlapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.are_overlapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Short summary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> :  &lt;Fragment object&gt;</p>
<blockquote>
<div><p>A second fragment</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">bool</p>
<blockquote class="last">
<div><p>True if self and other coexist in at least one frame</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.assign_identity">
<code class="descname">assign_identity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.assign_identity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.assign_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns the identity to self by considering the fragments coexisting
with it. If the certainty of the identification is high enough it sets
the identity of self to be fixed</p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.check_consistency_with_coexistent_individual_fragments">
<code class="descname">check_consistency_with_coexistent_individual_fragments</code><span class="sig-paren">(</span><em>temporary_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.check_consistency_with_coexistent_individual_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.check_consistency_with_coexistent_individual_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the temporary identity assigned to the fragment is
consistent with respect to the identities already assigned to the
fragments coexisting (in frame) with it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>temporary_id</strong> : int</p>
<blockquote>
<div><p>Temporary identity assigned to the fragment</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">bool</p>
<blockquote class="last">
<div><p>True if the identification of self with <cite>temporary_id</cite> does not
cause any duplication</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="fragment.Fragment.compute_P1_from_frequencies">
<em class="property">static </em><code class="descname">compute_P1_from_frequencies</code><span class="sig-paren">(</span><em>frequencies</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_P1_from_frequencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_P1_from_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the frequencies of a individual fragment
computer the P1 vector. P1 is the softmax of the frequencies with base 2
for each identity.</p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.compute_P2_vector">
<code class="descname">compute_P2_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_P2_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_P2_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the P2_vector related to self. It is based on <code class="xref py py-attr docutils literal"><span class="pre">coexisting_individual_fragments</span></code></p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.compute_border_velocity">
<code class="descname">compute_border_velocity</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_border_velocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_border_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Velocity necessary to cover the space between two fragments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>A second fragment</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Returns the speed at which an individual should travel to be
present in both self and other Fragment objects</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="fragment.Fragment.compute_certainty_of_individual_fragment">
<em class="property">static </em><code class="descname">compute_certainty_of_individual_fragment</code><span class="sig-paren">(</span><em>P1_vector</em>, <em>median_softmax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_certainty_of_individual_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_certainty_of_individual_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the certainty given the P1_vector of the fragment by
using the output of <a class="reference internal" href="#fragment.Fragment.compute_median_softmax" title="fragment.Fragment.compute_median_softmax"><code class="xref py py-meth docutils literal"><span class="pre">compute_median_softmax()</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>P1_vector</strong> : ndarray</p>
<blockquote>
<div><p>array with shape [1, number_of_animals] computed from frequencies by <a class="reference internal" href="#fragment.Fragment.compute_identification_statistics" title="fragment.Fragment.compute_identification_statistics"><code class="xref py py-meth docutils literal"><span class="pre">compute_identification_statistics()</span></code></a></p>
</div></blockquote>
<p><strong>median_softmax</strong> : ndarray</p>
<blockquote>
<div><p>Median of argmax(softmax_probs) per image</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Fragment’s certainty</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="fragment.Fragment.compute_identification_frequencies_individual_fragment">
<em class="property">static </em><code class="descname">compute_identification_frequencies_individual_fragment</code><span class="sig-paren">(</span><em>predictions</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_identification_frequencies_individual_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_identification_frequencies_individual_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the argmax of predictions per row</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions</strong> : ndarray</p>
<blockquote>
<div><p>array of shape [n, 1]</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>array of shape [1, number_of_animals], whose ith component counts how
many predictions have maximum components at the index i</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.compute_identification_statistics">
<code class="descname">compute_identification_statistics</code><span class="sig-paren">(</span><em>predictions</em>, <em>softmax_probs</em>, <em>number_of_animals=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_identification_statistics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_identification_statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the statistics necessary to the identification of the
fragment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions</strong> : ndarray</p>
<blockquote>
<div><p>array of shape [number_of_images_in_fragment, 1] whose components
are the argmax(softmax_probs) per image</p>
</div></blockquote>
<p><strong>softmax_probs</strong> : ndarray</p>
<blockquote>
<div><p>array of shape [number_of_images_in_fragment, number_of_animals]
whose rows are the result of applying the softmax function to the
predictions outputted by the idCNN per image</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote class="last">
<div><p>Description of parameter <cite>number_of_animals</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#fragment.Fragment.compute_identification_frequencies_individual_fragment" title="fragment.Fragment.compute_identification_frequencies_individual_fragment"><code class="xref py py-meth docutils literal"><span class="pre">compute_identification_frequencies_individual_fragment()</span></code></a>, <a class="reference internal" href="#fragment.Fragment.compute_P1_from_frequencies" title="fragment.Fragment.compute_P1_from_frequencies"><code class="xref py py-meth docutils literal"><span class="pre">compute_P1_from_frequencies()</span></code></a>, <a class="reference internal" href="#fragment.Fragment.compute_median_softmax" title="fragment.Fragment.compute_median_softmax"><code class="xref py py-meth docutils literal"><span class="pre">compute_median_softmax()</span></code></a>, <a class="reference internal" href="#fragment.Fragment.compute_certainty_of_individual_fragment" title="fragment.Fragment.compute_certainty_of_individual_fragment"><code class="xref py py-meth docutils literal"><span class="pre">compute_certainty_of_individual_fragment()</span></code></a></p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="fragment.Fragment.compute_median_softmax">
<em class="property">static </em><code class="descname">compute_median_softmax</code><span class="sig-paren">(</span><em>softmax_probs</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.compute_median_softmax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.compute_median_softmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the softmax of the predictions outputted by the network, it
computes their median according to the argmax of the softmaxed
predictions per image</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>softmax_probs</strong> : ndarray</p>
<blockquote>
<div><p>array of shape [number_of_images_in_fragment, number_of_animals]
whose rows are the result of applying the softmax function to the
predictions outputted by the idCNN per image</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">type</p>
<blockquote class="last">
<div><p>Median of argmax(softmax_probs) per image</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.frame_by_frame_velocity">
<code class="descname">frame_by_frame_velocity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.frame_by_frame_velocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.frame_by_frame_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Short summary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>Frame by frame speed of the individual in the fragment</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.get_attribute_of_coexisting_fragments">
<code class="descname">get_attribute_of_coexisting_fragments</code><span class="sig-paren">(</span><em>attribute</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.get_attribute_of_coexisting_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.get_attribute_of_coexisting_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a spevific attribute from the collection of fragments
coexisting (in frame) with self</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>attribute</strong> : str</p>
<blockquote>
<div><p>attribute to retrieve</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>attribute specified in <cite>attribute</cite> of the fragments coexisting with self</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.get_coexisting_individual_fragments_indices">
<code class="descname">get_coexisting_individual_fragments_indices</code><span class="sig-paren">(</span><em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.get_coexisting_individual_fragments_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.get_coexisting_individual_fragments_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of fragment objects representing and individual (i.e.
not representing a crossing where two or more animals are touching) and
coexisting (in frame) with self</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragments</strong> : list</p>
<blockquote class="last">
<div><p>List of all the fragments in the video</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.get_fixed_identities_of_coexisting_fragments">
<code class="descname">get_fixed_identities_of_coexisting_fragments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.get_fixed_identities_of_coexisting_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.get_fixed_identities_of_coexisting_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Considers the fragments coexisting with self and returns their
identities if they are fixed (see :attr:identity_is_fixed)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">type</p>
<blockquote class="last">
<div><p>Description of returned object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.get_missing_identities_in_coexisting_fragments">
<code class="descname">get_missing_identities_in_coexisting_fragments</code><span class="sig-paren">(</span><em>fixed_identities</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.get_missing_identities_in_coexisting_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.get_missing_identities_in_coexisting_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the identities that have not been assigned to the set of fragments coexisting with self</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fixed_identities</strong> : list</p>
<blockquote>
<div><p>List of fixed identities</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>List of missing identities in coexisting fragments</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.get_neighbour_fragment">
<code class="descname">get_neighbour_fragment</code><span class="sig-paren">(</span><em>fragments</em>, <em>scope</em>, <em>number_of_frames_in_direction=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.get_neighbour_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.get_neighbour_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>If it exist, gets the fragment in the list of all fragment whose
identity is the identity assigned to self and whose starting frame is
the starting frame of self + 1, or ending frame is the ending frame of
self - 1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragments</strong> : list</p>
<blockquote>
<div><p>List of all the fragments in the video</p>
</div></blockquote>
<p><strong>scope</strong> : str</p>
<blockquote>
<div><p>If “to_the_future” looks for the consecutive fragment wrt to self,
if “to_the_past” looks for the fragment the precedes self</p>
</div></blockquote>
<p><strong>number_of_frames_in_direction</strong> : int</p>
<blockquote>
<div><p>Distance (in frame) at which the previous or next fragment has to
be</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">&lt;Fragment object&gt;</p>
<blockquote class="last">
<div><p>The neighbouring fragment with respect to self in the direction
specified by scope if it exists. Otherwise None</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="fragment.Fragment.get_possible_identities">
<em class="property">static </em><code class="descname">get_possible_identities</code><span class="sig-paren">(</span><em>P2_vector</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.get_possible_identities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.get_possible_identities" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if P2 has two identical maxima. In that case returns the indices.
Else return false</p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.recompute_P2_of_coexisting_fragments">
<code class="descname">recompute_P2_of_coexisting_fragments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.recompute_P2_of_coexisting_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.recompute_P2_of_coexisting_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the P2 of the fragments coexisting with self
(see <code class="xref py py-attr docutils literal"><span class="pre">coexisting_individual_fragments</span></code>) if their identity is not
fixed (see <code class="xref py py-attr docutils literal"><span class="pre">identity_is_fixed</span></code>)</p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>roll_back_to=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset attributes of self to a specific part of the algorithm</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>roll_back_to</strong> : str</p>
<blockquote class="last">
<div><p>Reset all the attributes up to the process specified in input.
‘fragmentation’, ‘pretraining’, ‘accumulation’, ‘assignment’</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.set_P1_vector_accumulated">
<code class="descname">set_P1_vector_accumulated</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.set_P1_vector_accumulated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.set_P1_vector_accumulated" title="Permalink to this definition">¶</a></dt>
<dd><p>If self has been used for training its P1_vector is modified to be
a vector of zeros with a single component set to 1 in the
<code class="xref py py-attr docutils literal"><span class="pre">temporary_id</span></code> position</p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.set_distance_travelled">
<code class="descname">set_distance_travelled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.set_distance_travelled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.set_distance_travelled" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the distance travelled by the individual in the fragment.
It is based on the position of the centroids in consecutive images. See
<code class="xref py py-attr docutils literal"><span class="pre">centroid</span></code></p>
</dd></dl>

<dl class="method">
<dt id="fragment.Fragment.set_partially_or_globally_accumualted">
<code class="descname">set_partially_or_globally_accumualted</code><span class="sig-paren">(</span><em>accumulation_strategy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fragment.html#Fragment.set_partially_or_globally_accumualted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fragment.Fragment.set_partially_or_globally_accumualted" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets <code class="xref py py-attr docutils literal"><span class="pre">accumulated_globally</span></code> and <code class="xref py py-attr docutils literal"><span class="pre">accumulated_partially</span></code>
according to <cite>accumulation_strategy</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>accumulation_strategy</strong> : str</p>
<blockquote class="last">
<div><p>Can be “global” or “partial”</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="list-of-fragments">
<h2>List of fragments<a class="headerlink" href="#list-of-fragments" title="Permalink to this headline">¶</a></h2>
<p>Collection of instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
<span class="target" id="module-list_of_fragments"></span><dl class="class">
<dt id="list_of_fragments.ListOfFragments">
<em class="property">class </em><code class="descclassname">list_of_fragments.</code><code class="descname">ListOfFragments</code><span class="sig-paren">(</span><em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects all the instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>
generated from the blobs extracted from the video during segmentation
(see <a class="reference internal" href="#module-segmentation" title="segmentation"><code class="xref py py-mod docutils literal"><span class="pre">segmentation</span></code></a>) after having assigned to each Blob instance
a fragment identifier by using the method
<code class="xref py py-meth docutils literal"><span class="pre">compute_fragment_identifier_and_blob_index()</span></code></p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>fragments</strong></td>
<td>(list) list of instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></td>
</tr>
<tr class="row-even"><td><strong>number_of_fragments</strong></td>
<td>(int) number of fragments computed by the method <code class="xref py py-meth docutils literal"><span class="pre">compute_fragment_identifier_and_blob_index()</span></code></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.compute_P2_vectors" title="list_of_fragments.ListOfFragments.compute_P2_vectors"><code class="xref py py-obj docutils literal"><span class="pre">compute_P2_vectors</span></code></a>()</td>
<td>Computes the P2_vector associated to every individual fragment.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_pretraining" title="list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_pretraining"><code class="xref py py-obj docutils literal"><span class="pre">compute_number_of_unique_images_used_for_pretraining</span></code></a>()</td>
<td>Returns the number of images used for pretraining</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_training" title="list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_training"><code class="xref py py-obj docutils literal"><span class="pre">compute_number_of_unique_images_used_for_training</span></code></a>()</td>
<td>Returns the number of images used for training</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_pretraining" title="list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_pretraining"><code class="xref py py-obj docutils literal"><span class="pre">compute_ratio_of_images_used_for_pretraining</span></code></a>()</td>
<td>Returns the ratio of images used for pretraining over the number of</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_training" title="list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_training"><code class="xref py py-obj docutils literal"><span class="pre">compute_ratio_of_images_used_for_training</span></code></a>()</td>
<td>Returns the ratio of images used for training over the number of</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.compute_total_number_of_images_in_global_fragments" title="list_of_fragments.ListOfFragments.compute_total_number_of_images_in_global_fragments"><code class="xref py py-obj docutils literal"><span class="pre">compute_total_number_of_images_in_global_fragments</span></code></a>()</td>
<td>Sets the number of images available in global fragments (without repetitions)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.create_light_list" title="list_of_fragments.ListOfFragments.create_light_list"><code class="xref py py-obj docutils literal"><span class="pre">create_light_list</span></code></a>([attributes])</td>
<td>Creates a light version of an instance of ListOfFragments by storing</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_accumulable_individual_fragments_identifiers" title="list_of_fragments.ListOfFragments.get_accumulable_individual_fragments_identifiers"><code class="xref py py-obj docutils literal"><span class="pre">get_accumulable_individual_fragments_identifiers</span></code></a>(…)</td>
<td>Gets the unique identifiers associated to individual fragments that</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_data_plot" title="list_of_fragments.ListOfFragments.get_data_plot"><code class="xref py py-obj docutils literal"><span class="pre">get_data_plot</span></code></a>()</td>
<td>Gathers the data to plot the individual fragments’ statistics of the video.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_fragment_identifier_to_index_list" title="list_of_fragments.ListOfFragments.get_fragment_identifier_to_index_list"><code class="xref py py-obj docutils literal"><span class="pre">get_fragment_identifier_to_index_list</span></code></a>()</td>
<td>Creates a mapping between the attribute <code class="xref py py-attr docutils literal"><span class="pre">fragments</span></code> and</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_images_from_fragments_to_assign" title="list_of_fragments.ListOfFragments.get_images_from_fragments_to_assign"><code class="xref py py-obj docutils literal"><span class="pre">get_images_from_fragments_to_assign</span></code></a>()</td>
<td>Take all the fragments that have not been used to train the idCNN</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_new_images_and_labels_for_training" title="list_of_fragments.ListOfFragments.get_new_images_and_labels_for_training"><code class="xref py py-obj docutils literal"><span class="pre">get_new_images_and_labels_for_training</span></code></a>()</td>
<td>Extract images and creates labels from every individual fragment</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_next_fragment_to_identify" title="list_of_fragments.ListOfFragments.get_next_fragment_to_identify"><code class="xref py py-obj docutils literal"><span class="pre">get_next_fragment_to_identify</span></code></a>()</td>
<td>Returns the next fragment to be identified after the fingerprint protocols cascade by sorting according to the certainty computed with P2.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_not_accumulable_individual_fragments_identifiers" title="list_of_fragments.ListOfFragments.get_not_accumulable_individual_fragments_identifiers"><code class="xref py py-obj docutils literal"><span class="pre">get_not_accumulable_individual_fragments_identifiers</span></code></a>(…)</td>
<td>Gets the unique identifiers associated to individual fragments that</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_number_of_unidentified_individual_fragments" title="list_of_fragments.ListOfFragments.get_number_of_unidentified_individual_fragments"><code class="xref py py-obj docutils literal"><span class="pre">get_number_of_unidentified_individual_fragments</span></code></a>()</td>
<td>Returns the number of individual fragments that have not been</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_ordered_list_of_fragments" title="list_of_fragments.ListOfFragments.get_ordered_list_of_fragments"><code class="xref py py-obj docutils literal"><span class="pre">get_ordered_list_of_fragments</span></code></a>([scope,&nbsp;…])</td>
<td>Sorts the fragments starting from the frame number <cite>first_frame_first_global_fragment</cite>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.get_stats" title="list_of_fragments.ListOfFragments.get_stats"><code class="xref py py-obj docutils literal"><span class="pre">get_stats</span></code></a>(list_of_global_fragments)</td>
<td>Collects the following statistics from both fragments and global</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.load" title="list_of_fragments.ListOfFragments.load"><code class="xref py py-obj docutils literal"><span class="pre">load</span></code></a>(path_to_load)</td>
<td>Loads a previously saved (see <a class="reference internal" href="#list_of_fragments.ListOfFragments.load" title="list_of_fragments.ListOfFragments.load"><code class="xref py py-meth docutils literal"><span class="pre">load()</span></code></a>) from the path</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.load_light_list" title="list_of_fragments.ListOfFragments.load_light_list"><code class="xref py py-obj docutils literal"><span class="pre">load_light_list</span></code></a>(accumulation_folder)</td>
<td>Loads a list of dictionaries created with the method</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.plot_stats" title="list_of_fragments.ListOfFragments.plot_stats"><code class="xref py py-obj docutils literal"><span class="pre">plot_stats</span></code></a>(video)</td>
<td>Plots the statistics obtained through <a class="reference internal" href="#list_of_fragments.ListOfFragments.get_stats" title="list_of_fragments.ListOfFragments.get_stats"><code class="xref py py-meth docutils literal"><span class="pre">get_stats()</span></code></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.reset" title="list_of_fragments.ListOfFragments.reset"><code class="xref py py-obj docutils literal"><span class="pre">reset</span></code></a>([roll_back_to])</td>
<td>Resets all the fragment by using the method</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.save" title="list_of_fragments.ListOfFragments.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>(fragments_path)</td>
<td>saves an instance of ListOfFragments in the path specified by</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.save_light_list" title="list_of_fragments.ListOfFragments.save_light_list"><code class="xref py py-obj docutils literal"><span class="pre">save_light_list</span></code></a>(accumulation_folder)</td>
<td>Saves a list of dictionaries created with the method</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.set_fragments_as_accumulable_or_not_accumulable" title="list_of_fragments.ListOfFragments.set_fragments_as_accumulable_or_not_accumulable"><code class="xref py py-obj docutils literal"><span class="pre">set_fragments_as_accumulable_or_not_accumulable</span></code></a>()</td>
<td>Set the attribute <code class="xref py py-attr docutils literal"><span class="pre">accumulable</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.update_fragments_dictionary" title="list_of_fragments.ListOfFragments.update_fragments_dictionary"><code class="xref py py-obj docutils literal"><span class="pre">update_fragments_dictionary</span></code></a>(list_of_dictionaries)</td>
<td>Update fragment objects (see <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>) by</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_fragments.ListOfFragments.update_from_list_of_blobs" title="list_of_fragments.ListOfFragments.update_from_list_of_blobs"><code class="xref py py-obj docutils literal"><span class="pre">update_from_list_of_blobs</span></code></a>(blobs_in_video,&nbsp;…)</td>
<td>Updates an instance of ListOfFragments by considering an instance of</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="list_of_fragments.ListOfFragments.compute_P2_vectors">
<code class="descname">compute_P2_vectors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.compute_P2_vectors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.compute_P2_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the P2_vector associated to every individual fragment. See
<a class="reference internal" href="#fragment.Fragment.compute_P2_vector" title="fragment.Fragment.compute_P2_vector"><code class="xref py py-meth docutils literal"><span class="pre">compute_P2_vector()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_pretraining">
<code class="descname">compute_number_of_unique_images_used_for_pretraining</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.compute_number_of_unique_images_used_for_pretraining"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_pretraining" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of images used for pretraining
(without repetitions)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote class="last">
<div><p>Number of images used in pretraining</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_training">
<code class="descname">compute_number_of_unique_images_used_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.compute_number_of_unique_images_used_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.compute_number_of_unique_images_used_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of images used for training
(without repetitions)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote class="last">
<div><p>Number of images used in training</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_pretraining">
<code class="descname">compute_ratio_of_images_used_for_pretraining</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.compute_ratio_of_images_used_for_pretraining"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_pretraining" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the ratio of images used for pretraining over the number of
available images</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Ratio of images used for pretraining</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_training">
<code class="descname">compute_ratio_of_images_used_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.compute_ratio_of_images_used_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.compute_ratio_of_images_used_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the ratio of images used for training over the number of
available images</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>Ratio of images used for training</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.compute_total_number_of_images_in_global_fragments">
<code class="descname">compute_total_number_of_images_in_global_fragments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.compute_total_number_of_images_in_global_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.compute_total_number_of_images_in_global_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of images available in global fragments (without repetitions)</p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.create_light_list">
<code class="descname">create_light_list</code><span class="sig-paren">(</span><em>attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.create_light_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.create_light_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a light version of an instance of ListOfFragments by storing
only the attributes listed in <cite>attributes</cite> in a list of dictionaries</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>attributes</strong> : list</p>
<blockquote>
<div><p>list of attributes to be stored</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>list of dictionaries organised per fragment with keys the
attributes listed in <cite>attributes</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_accumulable_individual_fragments_identifiers">
<code class="descname">get_accumulable_individual_fragments_identifiers</code><span class="sig-paren">(</span><em>list_of_global_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_accumulable_individual_fragments_identifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_accumulable_individual_fragments_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the unique identifiers associated to individual fragments that
can be accumulated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>list_of_global_fragments</strong> : &lt;ListOfGlobalFragments object&gt;</p>
<blockquote class="last">
<div><p>Object collecting the global fragment objects (instances of the
class <code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code>) detected in the
entire video</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_data_plot">
<code class="descname">get_data_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_data_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_data_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Gathers the data to plot the individual fragments’ statistics of the
video.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote>
<div><p>array of shape [number_of_individual_fragments, 1]. Number of
images in individual fragments</p>
</div></blockquote>
<p>ndarray</p>
<blockquote>
<div><p>array of shape [number_of_individual_fragments, 1]. Distance
travelled in every individual fragment</p>
</div></blockquote>
<p>int</p>
<blockquote class="last">
<div><p>Number of images in crossing fragments</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_fragment_identifier_to_index_list">
<code class="descname">get_fragment_identifier_to_index_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_fragment_identifier_to_index_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_fragment_identifier_to_index_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a mapping between the attribute <code class="xref py py-attr docutils literal"><span class="pre">fragments</span></code> and
their identifiers build from the <a class="reference internal" href="#list_of_blobs.ListOfBlobs" title="list_of_blobs.ListOfBlobs"><code class="xref py py-class docutils literal"><span class="pre">ListOfBlobs</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>Mapping from the collection of fragments to the list of fragment
identifiers</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_images_from_fragments_to_assign">
<code class="descname">get_images_from_fragments_to_assign</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_images_from_fragments_to_assign"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_images_from_fragments_to_assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Take all the fragments that have not been used to train the idCNN
and that are associated with an individual, and concatenates their
images in order to feed them to the idCNN and get predictions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>[number_of_images, height, width, number_of_channels]</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_new_images_and_labels_for_training">
<code class="descname">get_new_images_and_labels_for_training</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_new_images_and_labels_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_new_images_and_labels_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract images and creates labels from every individual fragment
that has not been used to train the network during the fingerprint
protocols cascade</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote>
<div><p>images</p>
</div></blockquote>
<p>list</p>
<blockquote class="last">
<div><p>labels</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_next_fragment_to_identify">
<code class="descname">get_next_fragment_to_identify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_next_fragment_to_identify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_next_fragment_to_identify" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the next fragment to be identified after the fingerprint
protocols cascade by sorting according to the certainty computed with
P2. See <code class="xref py py-attr docutils literal"><span class="pre">certainty_P2</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">&lt;Fragment object&gt;</p>
<blockquote class="last">
<div><p>an instance of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_not_accumulable_individual_fragments_identifiers">
<code class="descname">get_not_accumulable_individual_fragments_identifiers</code><span class="sig-paren">(</span><em>list_of_global_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_not_accumulable_individual_fragments_identifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_not_accumulable_individual_fragments_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the unique identifiers associated to individual fragments that
cannot be accumulated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>list_of_global_fragments</strong> : &lt;ListOfGlobalFragments object&gt;</p>
<blockquote class="last">
<div><p>Object collecting the global fragment objects (instances of the
class <code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code>) detected in the
entire video</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_number_of_unidentified_individual_fragments">
<code class="descname">get_number_of_unidentified_individual_fragments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_number_of_unidentified_individual_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_number_of_unidentified_individual_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of individual fragments that have not been
identified during the fingerprint protocols cascade</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote class="last">
<div><p>number of non-identified individual fragments</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_ordered_list_of_fragments">
<code class="descname">get_ordered_list_of_fragments</code><span class="sig-paren">(</span><em>scope=None</em>, <em>first_frame_first_global_fragment=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_ordered_list_of_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_ordered_list_of_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the fragments starting from the frame number
<cite>first_frame_first_global_fragment</cite>. According to <cite>scope</cite> the sorting
is done either “to the future” of “to the past” with respect to
<cite>first_frame_first_global_fragment</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>scope</strong> : str</p>
<blockquote>
<div><p>either “to_the_past” or “to_the_future”</p>
</div></blockquote>
<p><strong>first_frame_first_global_fragment</strong> : int</p>
<blockquote>
<div><p>frame number corresponding to the first frame in which all the
individual fragments coexist in the first global fragment using
in an iteration of the fingerprint protocol cascade</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>list of sorted fragments</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.get_stats">
<code class="descname">get_stats</code><span class="sig-paren">(</span><em>list_of_global_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.get_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.get_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects the following statistics from both fragments and global
fragments:</p>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>number_of_fragments
<a href="#id5"><span class="problematic" id="id6">*</span></a>number_of_crossing_fragments
<a href="#id7"><span class="problematic" id="id8">*</span></a>number_of_individual_fragments
<a href="#id9"><span class="problematic" id="id10">*</span></a>number_of_individual_fragments_not_in_a_global_fragment
<a href="#id11"><span class="problematic" id="id12">*</span></a>number_of_accumulable_individual_fragments
<a href="#id13"><span class="problematic" id="id14">*</span></a>number_of_not_accumulable_individual_fragments
<a href="#id15"><span class="problematic" id="id16">*</span></a>number_of_accumualted_individual_fragments
<a href="#id17"><span class="problematic" id="id18">*</span></a>number_of_globally_accumulated_individual_fragments
<a href="#id19"><span class="problematic" id="id20">*</span></a>number_of_partially_accumulated_individual_fragments
<a href="#id21"><span class="problematic" id="id22">*</span></a>number_of_blobs
<a href="#id23"><span class="problematic" id="id24">*</span></a>number_of_crossing_blobs
<a href="#id25"><span class="problematic" id="id26">*</span></a>number_of_individual_blobs
<a href="#id27"><span class="problematic" id="id28">*</span></a>number_of_individual_blobs_not_in_a_global_fragment
<a href="#id29"><span class="problematic" id="id30">*</span></a>number_of_accumulable_individual_blobs
<a href="#id31"><span class="problematic" id="id32">*</span></a>number_of_not_accumulable_individual_blobs
<a href="#id33"><span class="problematic" id="id34">*</span></a>number_of_accumualted_individual_blobs
<a href="#id35"><span class="problematic" id="id36">*</span></a>number_of_globally_accumulated_individual_blobs
<a href="#id37"><span class="problematic" id="id38">*</span></a>number_of_partially_accumulated_individual_blobs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>list_of_global_fragments</strong> : &lt;ListOfGlobalFragments object&gt;</p>
<blockquote>
<div><p>Object collecting the global fragment objects (instances of the
class <code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code>) detected in the
entire video</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dict</p>
<blockquote class="last">
<div><p>dictionary of statistics</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="list_of_fragments.ListOfFragments.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>path_to_load</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a previously saved (see <a class="reference internal" href="#list_of_fragments.ListOfFragments.load" title="list_of_fragments.ListOfFragments.load"><code class="xref py py-meth docutils literal"><span class="pre">load()</span></code></a>) from the path
<cite>path_to_load</cite></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.load_light_list">
<code class="descname">load_light_list</code><span class="sig-paren">(</span><em>accumulation_folder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.load_light_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.load_light_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a list of dictionaries created with the method
<a class="reference internal" href="#list_of_fragments.ListOfFragments.create_light_list" title="list_of_fragments.ListOfFragments.create_light_list"><code class="xref py py-meth docutils literal"><span class="pre">create_light_list()</span></code></a> and saved with <a class="reference internal" href="#list_of_fragments.ListOfFragments.save_light_list" title="list_of_fragments.ListOfFragments.save_light_list"><code class="xref py py-meth docutils literal"><span class="pre">save_light_list()</span></code></a> from
the folder <cite>accumulation_folder</cite></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.plot_stats">
<code class="descname">plot_stats</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.plot_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.plot_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the statistics obtained through <a class="reference internal" href="#list_of_fragments.ListOfFragments.get_stats" title="list_of_fragments.ListOfFragments.get_stats"><code class="xref py py-meth docutils literal"><span class="pre">get_stats()</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote class="last">
<div><p>See <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>roll_back_to=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets all the fragment by using the method
<code class="xref py py-meth docutils literal"><span class="pre">roll_back_to()</span></code></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>fragments_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.save" title="Permalink to this definition">¶</a></dt>
<dd><p>saves an instance of ListOfFragments in the path specified by
<cite>fragments_path</cite></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.save_light_list">
<code class="descname">save_light_list</code><span class="sig-paren">(</span><em>accumulation_folder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.save_light_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.save_light_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a list of dictionaries created with the method
<a class="reference internal" href="#list_of_fragments.ListOfFragments.create_light_list" title="list_of_fragments.ListOfFragments.create_light_list"><code class="xref py py-meth docutils literal"><span class="pre">create_light_list()</span></code></a> in the folder <cite>accumulation_folder</cite></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.set_fragments_as_accumulable_or_not_accumulable">
<code class="descname">set_fragments_as_accumulable_or_not_accumulable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.set_fragments_as_accumulable_or_not_accumulable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.set_fragments_as_accumulable_or_not_accumulable" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the attribute <code class="xref py py-attr docutils literal"><span class="pre">accumulable</span></code></p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.update_fragments_dictionary">
<code class="descname">update_fragments_dictionary</code><span class="sig-paren">(</span><em>list_of_dictionaries</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.update_fragments_dictionary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.update_fragments_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Update fragment objects (see <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>) by
considering a list of dictionaries</p>
</dd></dl>

<dl class="method">
<dt id="list_of_fragments.ListOfFragments.update_from_list_of_blobs">
<code class="descname">update_from_list_of_blobs</code><span class="sig-paren">(</span><em>blobs_in_video</em>, <em>fragment_identifier_to_index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#ListOfFragments.update_from_list_of_blobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.ListOfFragments.update_from_list_of_blobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates an instance of ListOfFragments by considering an instance of
ListOfBlobs (see <a class="reference internal" href="#list_of_blobs.ListOfBlobs" title="list_of_blobs.ListOfBlobs"><code class="xref py py-class docutils literal"><span class="pre">ListOfBlobs</span></code></a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : list</p>
<blockquote>
<div><p>list of the blob objects (see class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a>) generated
from the blobs segmented in the video</p>
</div></blockquote>
<p><strong>fragment_identifier_to_index</strong> : list</p>
<blockquote class="last">
<div><p>Mapping from the collection of fragments to the list of fragment
identifiers</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="list_of_fragments.create_list_of_fragments">
<code class="descclassname">list_of_fragments.</code><code class="descname">create_list_of_fragments</code><span class="sig-paren">(</span><em>blobs_in_video</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_fragments.html#create_list_of_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_fragments.create_list_of_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a list of instances of <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a> collecting
all the fragments in the video.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : list</p>
<blockquote>
<div><p>list of the blob objects (see class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a>) generated
from the blobs segmented in the video</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>Number of animals to track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>list of instances of <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="global-fragment">
<h2>Global fragment<a class="headerlink" href="#global-fragment" title="Permalink to this headline">¶</a></h2>
<p>Global fragments are the core of the tracking algorithm: They are collection of instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>
that contains images extracted from a part of the video in which all the animals are visible.</p>
<span class="target" id="module-globalfragment"></span><dl class="class">
<dt id="globalfragment.GlobalFragment">
<em class="property">class </em><code class="descclassname">globalfragment.</code><code class="descname">GlobalFragment</code><span class="sig-paren">(</span><em>list_of_blobs</em>, <em>fragments</em>, <em>index_beginning_of_fragment</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment" title="Permalink to this definition">¶</a></dt>
<dd><p>A global fragment is a collection of instances of the class
<a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>. Such fragments are collected from a part of the
video in which all animals are visible.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>index_beginning_of_fragment</strong></td>
<td>(int) minimum frame number in which all the individual fragments (see <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>) are all coexisting</td>
</tr>
<tr class="row-even"><td><strong>individual_fragments_identifiers</strong></td>
<td>(list) list of the fragment identifiers associated to the individual fragments composing the global fragment (see <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>)</td>
</tr>
<tr class="row-odd"><td><strong>number_of_animals</strong></td>
<td>(int) number of animals to be tracked</td>
</tr>
<tr class="row-even"><td><strong>_is_unique</strong></td>
<td>(bool) True if each of the individual fragments have been assigned to a unique identity</td>
</tr>
<tr class="row-odd"><td><strong>_is_certain</strong></td>
<td>(bool) True if each of the individual fragments have scored a certaninty above the threshold <code class="xref py py-const docutils literal"><span class="pre">CERTAINTY_THRESHOLD</span></code></td>
</tr>
<tr class="row-even"><td><strong>_ids_assigned</strong></td>
<td>(ndarray) shape [1, number_of_animals] each componenents correspond to the identity assigned by the algorithm to each of the individual fragments</td>
</tr>
<tr class="row-odd"><td><strong>_temporary_ids</strong></td>
<td>(ndarray) shape [1, number_of_animals] temporary ids assigned during the fingerprinting protocol to each of the fragments composing the global fragment</td>
</tr>
<tr class="row-even"><td><strong>_repeated_ids</strong></td>
<td>(list) list of identities repeated during the identification of the fragments in the individual fragment</td>
</tr>
<tr class="row-odd"><td><strong>_missing_ids</strong></td>
<td>(list) list of identities not assigned in the global fragment (since in a global fragment all animals are visible, all the identities should be assigned)</td>
</tr>
<tr class="row-even"><td><strong>predictions</strong></td>
<td>(list) list of <code class="xref py py-attr docutils literal"><span class="pre">predictions</span></code> for every individual fragment</td>
</tr>
<tr class="row-odd"><td><strong>softmax_probs_median</strong></td>
<td>(list) list of <code class="xref py py-attr docutils literal"><span class="pre">softmax_probs_median</span></code> for every individual fragment</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#globalfragment.GlobalFragment.acceptable_for_training" title="globalfragment.GlobalFragment.acceptable_for_training"><code class="xref py py-obj docutils literal"><span class="pre">acceptable_for_training</span></code></a>(accumulation_strategy)</td>
<td>Returns True if the global fragment is acceptable for training.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#globalfragment.GlobalFragment.check_uniqueness" title="globalfragment.GlobalFragment.check_uniqueness"><code class="xref py py-obj docutils literal"><span class="pre">check_uniqueness</span></code></a>(scope)</td>
<td>Checks that the identities assigned to the individual fragments are</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#globalfragment.GlobalFragment.compute_start_end_frame_indices_of_individual_fragments" title="globalfragment.GlobalFragment.compute_start_end_frame_indices_of_individual_fragments"><code class="xref py py-obj docutils literal"><span class="pre">compute_start_end_frame_indices_of_individual_fragments</span></code></a>(…)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#globalfragment.GlobalFragment.get_images_and_labels" title="globalfragment.GlobalFragment.get_images_and_labels"><code class="xref py py-obj docutils literal"><span class="pre">get_images_and_labels</span></code></a>()</td>
<td>Arrange the images and identities in the global fragment as a</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#globalfragment.GlobalFragment.get_individual_fragments_of_global_fragment" title="globalfragment.GlobalFragment.get_individual_fragments_of_global_fragment"><code class="xref py py-obj docutils literal"><span class="pre">get_individual_fragments_of_global_fragment</span></code></a>(…)</td>
<td>Get the individual fragments in the global fragments by using their</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#globalfragment.GlobalFragment.get_list_of_attributes_from_individual_fragments" title="globalfragment.GlobalFragment.get_list_of_attributes_from_individual_fragments"><code class="xref py py-obj docutils literal"><span class="pre">get_list_of_attributes_from_individual_fragments</span></code></a>(…)</td>
<td>Given a set of attributes available in the instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a> it copies them in the global fragment.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#globalfragment.GlobalFragment.get_total_number_of_images" title="globalfragment.GlobalFragment.get_total_number_of_images"><code class="xref py py-obj docutils literal"><span class="pre">get_total_number_of_images</span></code></a>()</td>
<td>Gets the total number of images in the global fragment</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#globalfragment.GlobalFragment.reset" title="globalfragment.GlobalFragment.reset"><code class="xref py py-obj docutils literal"><span class="pre">reset</span></code></a>(roll_back_to)</td>
<td>Resets attributes to the fragmentation step in the algorithm,</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#globalfragment.GlobalFragment.set_candidate_for_accumulation" title="globalfragment.GlobalFragment.set_candidate_for_accumulation"><code class="xref py py-obj docutils literal"><span class="pre">set_candidate_for_accumulation</span></code></a>()</td>
<td>Sets the global fragment to be eligible for accumulation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#globalfragment.GlobalFragment.set_minimum_distance_travelled" title="globalfragment.GlobalFragment.set_minimum_distance_travelled"><code class="xref py py-obj docutils literal"><span class="pre">set_minimum_distance_travelled</span></code></a>()</td>
<td>Sets the minum distance travelled attribute</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#globalfragment.GlobalFragment.update_individual_fragments_attribute" title="globalfragment.GlobalFragment.update_individual_fragments_attribute"><code class="xref py py-obj docutils literal"><span class="pre">update_individual_fragments_attribute</span></code></a>(…)</td>
<td>Update <cite>attribute</cite> in every individual fragment in the global</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="globalfragment.GlobalFragment.acceptable_for_training">
<code class="descname">acceptable_for_training</code><span class="sig-paren">(</span><em>accumulation_strategy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.acceptable_for_training"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.acceptable_for_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the global fragment is acceptable for training.
See <code class="xref py py-attr docutils literal"><span class="pre">acceptable_for_training</span></code> for every
individual fragment in the global fragment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>accumulation_strategy</strong> : str</p>
<blockquote>
<div><p>can be either “global” or “partial”</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">bool</p>
<blockquote class="last">
<div><p>True if the global fragment is accceptable for training</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.check_uniqueness">
<code class="descname">check_uniqueness</code><span class="sig-paren">(</span><em>scope</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.check_uniqueness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.check_uniqueness" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the identities assigned to the individual fragments are
unique</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>scope</strong> : str</p>
<blockquote class="last">
<div><p>Either “global” or “partial”</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.compute_start_end_frame_indices_of_individual_fragments">
<code class="descname">compute_start_end_frame_indices_of_individual_fragments</code><span class="sig-paren">(</span><em>blobs_in_video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.compute_start_end_frame_indices_of_individual_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.compute_start_end_frame_indices_of_individual_fragments" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : list</p>
<blockquote class="last">
<div><p>list of the blob objects (see <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a>) segmented from
the video</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.get_images_and_labels">
<code class="descname">get_images_and_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.get_images_and_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.get_images_and_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Arrange the images and identities in the global fragment as a
labelled dataset in order to train the idCNN</p>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.get_individual_fragments_of_global_fragment">
<code class="descname">get_individual_fragments_of_global_fragment</code><span class="sig-paren">(</span><em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.get_individual_fragments_of_global_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.get_individual_fragments_of_global_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the individual fragments in the global fragments by using their
unique identifiers</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragments</strong> : list</p>
<blockquote class="last">
<div><p>all the fragments extracted from the video
(see <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a>)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.get_list_of_attributes_from_individual_fragments">
<code class="descname">get_list_of_attributes_from_individual_fragments</code><span class="sig-paren">(</span><em>fragments, list_of_attributes=['distance_travelled', 'number_of_images']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.get_list_of_attributes_from_individual_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.get_list_of_attributes_from_individual_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a set of attributes available in the instances of the class
<a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a> it copies them in the global fragment.
For instance the attribute number_of_images belonging to the individual
fragments in the global fragment will be set as
<cite>global_fragment.number_of_images_per_individual_fragment</cite>, where each
element of the list corresponds to the number_of_images of each
individual fragment preserving the order with which the global fragment
has been initialised</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragments</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>See <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
<p><strong>list_of_attributes</strong> : list</p>
<blockquote class="last">
<div><p>List of attributes to be transferred from the individual fragments
to the global fragment</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.get_total_number_of_images">
<code class="descname">get_total_number_of_images</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.get_total_number_of_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.get_total_number_of_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the total number of images in the global fragment</p>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>roll_back_to</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets attributes to the fragmentation step in the algorithm,
allowing for example to start a new accumulation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>roll_back_to</strong> : str</p>
<blockquote class="last">
<div><p>“fragmentation”</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.set_candidate_for_accumulation">
<code class="descname">set_candidate_for_accumulation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.set_candidate_for_accumulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.set_candidate_for_accumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the global fragment to be eligible for accumulation</p>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.set_minimum_distance_travelled">
<code class="descname">set_minimum_distance_travelled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.set_minimum_distance_travelled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.set_minimum_distance_travelled" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the minum distance travelled attribute</p>
</dd></dl>

<dl class="method">
<dt id="globalfragment.GlobalFragment.update_individual_fragments_attribute">
<code class="descname">update_individual_fragments_attribute</code><span class="sig-paren">(</span><em>attribute</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/globalfragment.html#GlobalFragment.update_individual_fragments_attribute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#globalfragment.GlobalFragment.update_individual_fragments_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Update <cite>attribute</cite> in every individual fragment in the global
fragment by setting it at <cite>value</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>attribute</strong> : str</p>
<blockquote>
<div><p>attribute to be updated</p>
</div></blockquote>
<p><strong>value</strong> : list, int, float</p>
<blockquote class="last">
<div><p>value of <cite>attribute</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="list-of-global-fragments">
<h2>List of global fragments<a class="headerlink" href="#list-of-global-fragments" title="Permalink to this headline">¶</a></h2>
<p>Collection of instances of the class <a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a>.
Global fragments are used to create the dataset of labelled images used to train
the idCNN during the fingerprint protocols cascade.</p>
<span class="target" id="module-list_of_global_fragments"></span><dl class="class">
<dt id="list_of_global_fragments.ListOfGlobalFragments">
<em class="property">class </em><code class="descclassname">list_of_global_fragments.</code><code class="descname">ListOfGlobalFragments</code><span class="sig-paren">(</span><em>global_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects all the instances of the class
<code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code>
generated by considering the fragments
(see <code class="xref py py-meth docutils literal"><span class="pre">compute_fragment_identifier_and_blob_index()</span></code>)</p>
<p class="rubric">Notes</p>
<p>A minimum number of images per individual fragments is required for a
global fragment to be acceptable for the accumulation. This number is set
in
<code class="xref py py-const docutils literal"><span class="pre">MINIMUM_NUMBER_OF_FRAMES_TO_BE_A_CANDIDATE_FOR_ACCUMULATION</span></code></p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>global_fragments</strong></td>
<td>(list) list of instances of the class <a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a></td>
</tr>
<tr class="row-even"><td><strong>number_of_global_fragments</strong></td>
<td>( int) length of <cite>global_fragments</cite></td>
</tr>
<tr class="row-odd"><td><strong>first_global_fragment_for_accumulation</strong></td>
<td>( &lt;GlobalFragment object&gt;) first global fragment used to start the protocols. See <a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.set_first_global_fragment_for_accumulation" title="list_of_global_fragments.ListOfGlobalFragments.set_first_global_fragment_for_accumulation"><code class="xref py py-meth docutils literal"><span class="pre">set_first_global_fragment_for_accumulation()</span></code></a></td>
</tr>
<tr class="row-even"><td><strong>maximum_number_of_images</strong></td>
<td>(int) maximum number of images contained in the global fragments listed in <cite>global_fragments</cite></td>
</tr>
<tr class="row-odd"><td><strong>non_accumulable_global_fragments</strong></td>
<td>(list) list of global fragments that cannot be used during the accumulation protocols. See <code class="xref py py-attr docutils literal"><span class="pre">candidate_for_accumulation</span></code></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">abort_knowledge_transfer_on_same_animals</span></code>(…)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.compute_maximum_number_of_images" title="list_of_global_fragments.ListOfGlobalFragments.compute_maximum_number_of_images"><code class="xref py py-obj docutils literal"><span class="pre">compute_maximum_number_of_images</span></code></a>()</td>
<td>Computes the maximum number of images in the global fragments</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.delete_fragments_from_global_fragments" title="list_of_global_fragments.ListOfGlobalFragments.delete_fragments_from_global_fragments"><code class="xref py py-obj docutils literal"><span class="pre">delete_fragments_from_global_fragments</span></code></a>()</td>
<td>Deletes the individual fragments from each of the global fragments</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.filter_candidates_global_fragments_for_accumulation" title="list_of_global_fragments.ListOfGlobalFragments.filter_candidates_global_fragments_for_accumulation"><code class="xref py py-obj docutils literal"><span class="pre">filter_candidates_global_fragments_for_accumulation</span></code></a>()</td>
<td>Filters the global fragments by taking into account the minium</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.get_data_plot" title="list_of_global_fragments.ListOfGlobalFragments.get_data_plot"><code class="xref py py-obj docutils literal"><span class="pre">get_data_plot</span></code></a>()</td>
<td>Gathers data to plot a global fragments statistics summary</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.give_me_frequencies_first_fragment_accumulated" title="list_of_global_fragments.ListOfGlobalFragments.give_me_frequencies_first_fragment_accumulated"><code class="xref py py-obj docutils literal"><span class="pre">give_me_frequencies_first_fragment_accumulated</span></code></a>(i,&nbsp;…)</td>
<td>The frequencies (see <code class="xref py py-meth docutils literal"><span class="pre">compute_identification_statistics()</span></code>) are generated artificially for the first global fragments.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.load" title="list_of_global_fragments.ListOfGlobalFragments.load"><code class="xref py py-obj docutils literal"><span class="pre">load</span></code></a>(path_to_load,&nbsp;fragments)</td>
<td>Loads an instance of the class saved with <a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.save" title="list_of_global_fragments.ListOfGlobalFragments.save"><code class="xref py py-meth docutils literal"><span class="pre">save()</span></code></a> and</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.order_by_distance_to_the_first_global_fragment_for_accumulation" title="list_of_global_fragments.ListOfGlobalFragments.order_by_distance_to_the_first_global_fragment_for_accumulation"><code class="xref py py-obj docutils literal"><span class="pre">order_by_distance_to_the_first_global_fragment_for_accumulation</span></code></a>(video)</td>
<td>Sorts the global fragments wrt to their distance from the first</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.order_by_distance_travelled" title="list_of_global_fragments.ListOfGlobalFragments.order_by_distance_travelled"><code class="xref py py-obj docutils literal"><span class="pre">order_by_distance_travelled</span></code></a>()</td>
<td>Sorts the global fragments by the minimum distance travelled of their</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments" title="list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments"><code class="xref py py-obj docutils literal"><span class="pre">relink_fragments_to_global_fragments</span></code></a>(fragments)</td>
<td>Resets the individual fragments to their respective global fragments</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.reset" title="list_of_global_fragments.ListOfGlobalFragments.reset"><code class="xref py py-obj docutils literal"><span class="pre">reset</span></code></a>([roll_back_to])</td>
<td>Resets all the global fragment by calling recursively the method</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.save" title="list_of_global_fragments.ListOfGlobalFragments.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>(global_fragments_path,&nbsp;fragments)</td>
<td>Saves an instance of the class in the path <cite>global_fragments_path</cite>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.set_first_global_fragment_for_accumulation" title="list_of_global_fragments.ListOfGlobalFragments.set_first_global_fragment_for_accumulation"><code class="xref py py-obj docutils literal"><span class="pre">set_first_global_fragment_for_accumulation</span></code></a>(…)</td>
<td>Selects the first global fragment to be used for accumulation</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.compute_maximum_number_of_images">
<code class="descname">compute_maximum_number_of_images</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.compute_maximum_number_of_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.compute_maximum_number_of_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the maximum number of images in the global fragments</p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.delete_fragments_from_global_fragments">
<code class="descname">delete_fragments_from_global_fragments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.delete_fragments_from_global_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.delete_fragments_from_global_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the individual fragments from each of the global fragments</p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.filter_candidates_global_fragments_for_accumulation">
<code class="descname">filter_candidates_global_fragments_for_accumulation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.filter_candidates_global_fragments_for_accumulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.filter_candidates_global_fragments_for_accumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the global fragments by taking into account the minium
number of images per individual fragments specified in
<code class="xref py py-attr docutils literal"><span class="pre">candidate_for_accumulation</span></code></p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.get_data_plot">
<code class="descname">get_data_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.get_data_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.get_data_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Gathers data to plot a global fragments statistics summary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote>
<div><p>number of images in the shortest individual fragment</p>
</div></blockquote>
<p>int</p>
<blockquote>
<div><p>number of images in the longest individual fragment</p>
</div></blockquote>
<p>int</p>
<blockquote>
<div><p>number of images per individual fragment in global fragment</p>
</div></blockquote>
<p>int</p>
<blockquote>
<div><p>median number of images in global fragments</p>
</div></blockquote>
<p>float</p>
<blockquote class="last">
<div><p>minimum distance travelled</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="list_of_global_fragments.ListOfGlobalFragments.give_me_frequencies_first_fragment_accumulated">
<em class="property">static </em><code class="descname">give_me_frequencies_first_fragment_accumulated</code><span class="sig-paren">(</span><em>i</em>, <em>number_of_animals</em>, <em>fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.give_me_frequencies_first_fragment_accumulated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.give_me_frequencies_first_fragment_accumulated" title="Permalink to this definition">¶</a></dt>
<dd><p>The frequencies (see <code class="xref py py-meth docutils literal"><span class="pre">compute_identification_statistics()</span></code>)
are generated artificially for the first global fragments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>i</strong> : int</p>
<blockquote>
<div><p>identity associated to the <cite>fragment</cite></p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>number of animals to track</p>
</div></blockquote>
<p><strong>fragment</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>array of zeros with the <cite>i`th component equal to
:attr:`~fragment.Fragment.number_of_images</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="list_of_global_fragments.ListOfGlobalFragments.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>path_to_load</em>, <em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads an instance of the class saved with <a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.save" title="list_of_global_fragments.ListOfGlobalFragments.save"><code class="xref py py-meth docutils literal"><span class="pre">save()</span></code></a> and
associates individual fragments to each global fragment by calling
<a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments" title="list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments"><code class="xref py py-meth docutils literal"><span class="pre">relink_fragments_to_global_fragments()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.order_by_distance_to_the_first_global_fragment_for_accumulation">
<code class="descname">order_by_distance_to_the_first_global_fragment_for_accumulation</code><span class="sig-paren">(</span><em>video</em>, <em>accumulation_trial=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.order_by_distance_to_the_first_global_fragment_for_accumulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.order_by_distance_to_the_first_global_fragment_for_accumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the global fragments wrt to their distance from the first
global fragment chose for accumulation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>instance of the class <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>accumulation_trial</strong> : int</p>
<blockquote class="last">
<div><p>accumulation number (protocol 2 performs a single accumulation
attempt, and if used, protocol 3 will perform 3 other attempts)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.order_by_distance_travelled">
<code class="descname">order_by_distance_travelled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.order_by_distance_travelled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.order_by_distance_travelled" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the global fragments by the minimum distance travelled of their
individual fragments</p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments">
<code class="descname">relink_fragments_to_global_fragments</code><span class="sig-paren">(</span><em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.relink_fragments_to_global_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the individual fragments to their respective global fragments</p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>roll_back_to=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets all the global fragment by calling recursively the method
<a class="reference internal" href="#globalfragment.GlobalFragment.reset" title="globalfragment.GlobalFragment.reset"><code class="xref py py-meth docutils literal"><span class="pre">reset()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>global_fragments_path</em>, <em>fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves an instance of the class in the path <cite>global_fragments_path</cite>.
Before saving the individual fragments associated to every global
fragment are removes by using the method
<a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.delete_fragments_from_global_fragments" title="list_of_global_fragments.ListOfGlobalFragments.delete_fragments_from_global_fragments"><code class="xref py py-meth docutils literal"><span class="pre">delete_fragments_from_global_fragments()</span></code></a>
and resets them after saving by calling
<a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments" title="list_of_global_fragments.ListOfGlobalFragments.relink_fragments_to_global_fragments"><code class="xref py py-meth docutils literal"><span class="pre">relink_fragments_to_global_fragments()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="list_of_global_fragments.ListOfGlobalFragments.set_first_global_fragment_for_accumulation">
<code class="descname">set_first_global_fragment_for_accumulation</code><span class="sig-paren">(</span><em>video</em>, <em>accumulation_trial</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#ListOfGlobalFragments.set_first_global_fragment_for_accumulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.ListOfGlobalFragments.set_first_global_fragment_for_accumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the first global fragment to be used for accumulation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>instance of the class <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>accumulation_trial</strong> : int</p>
<blockquote>
<div><p>accumulation number (protocol 2 performs a single accumulation
attempt, and if used, protocol 3 will perform 3 other attempts)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote class="last">
<div><p>frame number corresponding to the beginning of the selected global
fragment</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="list_of_global_fragments.check_global_fragments">
<code class="descclassname">list_of_global_fragments.</code><code class="descname">check_global_fragments</code><span class="sig-paren">(</span><em>blobs_in_video</em>, <em>num_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#check_global_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.check_global_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array with True if:
* each blob has a unique blob intersecting in the past and future
* number of blobs equals num_animals</p>
</dd></dl>

<dl class="function">
<dt id="list_of_global_fragments.create_list_of_global_fragments">
<code class="descclassname">list_of_global_fragments.</code><code class="descname">create_list_of_global_fragments</code><span class="sig-paren">(</span><em>blobs_in_video</em>, <em>fragments</em>, <em>num_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#create_list_of_global_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.create_list_of_global_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the list of instances of the class
<a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a> used to create <a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments" title="list_of_global_fragments.ListOfGlobalFragments"><code class="xref py py-class docutils literal"><span class="pre">ListOfGlobalFragments</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : list</p>
<blockquote>
<div><p>list of the blob objects (see class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a>) generated
from the blobs segmented in the video</p>
</div></blockquote>
<p><strong>fragments</strong> : list</p>
<blockquote>
<div><p>list of instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
<p><strong>num_animals</strong> : int</p>
<blockquote>
<div><p>number of animals to track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>list of instances of the class <a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="list_of_global_fragments.detect_beginnings">
<code class="descclassname">list_of_global_fragments.</code><code class="descname">detect_beginnings</code><span class="sig-paren">(</span><em>boolean_array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_global_fragments.html#detect_beginnings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_global_fragments.detect_beginnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects the frame where the core of a global fragment starts.
A core of a global fragment is the part of the global fragment where all the
individuals are visible, i.e. the number of animals in the frame equals the
number of animals in the video
:boolean_array: array with True where the number of animals in the frame equals
the number of animals in the video</p>
</dd></dl>

</div>
<div class="section" id="module-segmentation">
<span id="segmentation"></span><h2>Segmentation<a class="headerlink" href="#module-segmentation" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="segmentation.get_blobs_in_frame">
<code class="descclassname">segmentation.</code><code class="descname">get_blobs_in_frame</code><span class="sig-paren">(</span><em>cap</em>, <em>video</em>, <em>segmentation_thresholds</em>, <em>max_number_of_blobs</em>, <em>frame_number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#get_blobs_in_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.get_blobs_in_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments a frame read from <cite>cap</cite> according to the preprocessing parameters
in <cite>video</cite>. Returns a list <cite>blobs_in_frame</cite> with the Blob objects in the frame
and the <cite>max_number_of_blobs</cite> found in the video so far. Frames are segmented
in gray scale.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>cap</strong> : &lt;VideoCapture object&gt;</p>
<blockquote>
<div><p>OpenCV object used to read the frames of the video</p>
</div></blockquote>
<p><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>segmentation_thresholds</strong> : dict</p>
<blockquote>
<div><p>Dictionary with the thresholds used for the segmentation: <cite>min_threshold</cite>,
<cite>max_threshold</cite>, <cite>min_area</cite>, <cite>max_area</cite></p>
</div></blockquote>
<p><strong>max_number_of_blobs</strong> : int</p>
<blockquote>
<div><p>Maximum number of blobs found in the whole video so far in the segmentation process</p>
</div></blockquote>
<p><strong>frame_number</strong> : int</p>
<blockquote>
<div><p>Number of the frame being segmented. It is used to print in the terminal the frames
where the segmentation fails</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>blobs_in_frame</strong> : list</p>
<blockquote>
<div><p>List of &lt;Blob object&gt; segmented in the current frame</p>
</div></blockquote>
<p><strong>max_number_of_blobs</strong> : int</p>
<blockquote class="last">
<div><p>Maximum number of blobs found in the whole video so far in the segmentation process</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">Video</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">Blob</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">segment_frame</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">blob_extractor</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="segmentation.get_videoCapture">
<code class="descclassname">segmentation.</code><code class="descname">get_videoCapture</code><span class="sig-paren">(</span><em>video</em>, <em>path</em>, <em>episode_start_end_frames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#get_videoCapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.get_videoCapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the VideoCapture (OpenCV) object to read the frames for the segmentation
and the number of frames to read. If <cite>episode_start_end_frames</cite> is None then a <cite>path</cite> must be
given as the video is assumed to be splitted in different files (episodes). If the <cite>path</cite>
is None the video is assumed to be in a single file and the path is read from
<cite>video</cite>, then <cite>episode_start_end_frames</cite> must be give.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>path</strong> : string</p>
<blockquote>
<div><p>Path to the video file from where to get the VideoCapture (OpenCV) object</p>
</div></blockquote>
<p><strong>episode_start_end_frames</strong> : tuple</p>
<blockquote>
<div><p>Tuple (starting_frame, ending_frame) indicanting the start and end of the episode
when the video is given in a single file</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cap</strong> : &lt;VideoCapture object&gt;</p>
<blockquote>
<div><p>OpenCV object used to read the frames of the video</p>
</div></blockquote>
<p><strong>number_of_frames_in_episode</strong> : int</p>
<blockquote class="last">
<div><p>Number of frames in the episode of video being segmented</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="segmentation.resegment">
<code class="descclassname">segmentation.</code><code class="descname">resegment</code><span class="sig-paren">(</span><em>video</em>, <em>frame_number</em>, <em>list_of_blobs</em>, <em>new_segmentation_thresholds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#resegment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.resegment" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the <cite>list_of_blobs</cite> for a particular <cite>frame_number</cite> by performing
a segmentation with <cite>new_segmentation_thresholds</cite>. This function is called for
the frames in which the number of blobs is higher than the number of animals
stated by the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>frame_number</strong> : int</p>
<blockquote>
<div><p>Number of the frame to update with the new segmentation</p>
</div></blockquote>
<p><strong>list_of_blobs</strong> : &lt;ListOfBlobs object&gt;</p>
<blockquote>
<div><p>Object containing the list of blobs segmented in the video in each frame</p>
</div></blockquote>
<p><strong>new_segmentation_thresholds</strong> : dict</p>
<blockquote>
<div><p>Dictionary with the thresholds used for the new segmentation: <cite>min_threshold</cite>,
<cite>max_threshold</cite>, <cite>min_area</cite>, <cite>max_area</cite></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>number_of_blobs_in_frame</strong> : int</p>
<blockquote class="last">
<div><p>Number of blobs found in the frame</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#segmentation.get_videoCapture" title="segmentation.get_videoCapture"><code class="xref py py-obj docutils literal"><span class="pre">get_videoCapture</span></code></a>, <a class="reference internal" href="#segmentation.get_blobs_in_frame" title="segmentation.get_blobs_in_frame"><code class="xref py py-obj docutils literal"><span class="pre">get_blobs_in_frame</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="segmentation.segment">
<code class="descclassname">segmentation.</code><code class="descname">segment</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#segment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Segment the video giving a list of <cite>blobs</cite> for every frame in the video.
If a video is given as a set of files (episodes), those files are used to
parallelise the segmentation process. If a video is given in a single file
the list of indices <cite>video.episodes_start_end</cite> is used for the parallelisation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : list</p>
<blockquote class="last">
<div><p>List of <cite>blobs_in_frame</cite> for all the frames of the video</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#segmentation.segment_episode" title="segmentation.segment_episode"><code class="xref py py-obj docutils literal"><span class="pre">segment_episode</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="segmentation.segment_episode">
<code class="descclassname">segmentation.</code><code class="descname">segment_episode</code><span class="sig-paren">(</span><em>video</em>, <em>segmentation_thresholds</em>, <em>path=None</em>, <em>episode_start_end_frames=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#segment_episode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.segment_episode" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets list of blobs segmented in every frame of the episode of the video
given by <cite>path</cite> (if the video is splitted in different files) or by
<cite>episode_start_end_frames</cite> (if the video is given in a single file)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>segmentation_thresholds</strong> : dict</p>
<blockquote>
<div><p>Dictionary with the thresholds used for the segmentation: <cite>min_threshold</cite>,
<cite>max_threshold</cite>, <cite>min_area</cite>, <cite>max_area</cite></p>
</div></blockquote>
<p><strong>path</strong> : string</p>
<blockquote>
<div><p>Path to the video file from where to get the VideoCapture (OpenCV) object</p>
</div></blockquote>
<p><strong>episode_start_end_frames</strong> : tuple</p>
<blockquote>
<div><p>Tuple (starting_frame, ending_frame) indicanting the start and end of the episode
when the video is given in a single file</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>blobs_in_episode</strong> : list</p>
<blockquote>
<div><p>List of <cite>blobs_in_frame</cite> of the episode of the video being segmented</p>
</div></blockquote>
<p><strong>max_number_of_blobs</strong> : int</p>
<blockquote class="last">
<div><p>Maximum number of blobs found in the episode of the video being segmented</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">Video</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">Blob</span></code>, <a class="reference internal" href="#segmentation.get_videoCapture" title="segmentation.get_videoCapture"><code class="xref py py-obj docutils literal"><span class="pre">get_videoCapture</span></code></a>, <code class="xref py py-obj docutils literal"><span class="pre">segment_frame</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">blob_extractor</span></code></p>
</div>
</dd></dl>

</div>
<div class="section" id="module-video_utils">
<span id="segmentation-utils"></span><h2>Segmentation utils<a class="headerlink" href="#module-video_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="video_utils.blob_extractor">
<code class="descclassname">video_utils.</code><code class="descname">blob_extractor</code><span class="sig-paren">(</span><em>segmented_frame</em>, <em>frame</em>, <em>min_area</em>, <em>max_area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#blob_extractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.blob_extractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <cite>segmented_frame</cite> it extracts the blobs with area greater than
<cite>min_area</cite> and smaller than <cite>max_area</cite> and it computes a set of relevant
properties for every blob.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>segmented_frame</strong> : nd.array</p>
<blockquote>
<div><p>Frame with zeros and ones where ones are valid pixels.</p>
</div></blockquote>
<p><strong>frame</strong> : nd.array</p>
<blockquote>
<div><p>Frame from where to extract the <cite>bounding_box_image</cite> of every blob</p>
</div></blockquote>
<p><strong>min_area</strong> : int</p>
<blockquote>
<div><p>Minimum number of blobs above which a blob is considered to be valid</p>
</div></blockquote>
<p><strong>max_area</strong> : int</p>
<blockquote>
<div><p>Maximum number of blobs below which a blob is considered to be valid</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bounding_boxes</strong> : list</p>
<blockquote>
<div><p>List with the <cite>bounding_box</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>bounding_box_images</strong> : list</p>
<blockquote>
<div><p>List with the <cite>bounding_box_image</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>centroids</strong> : list</p>
<blockquote>
<div><p>List with the <cite>centroid</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>areas</strong> : list</p>
<blockquote>
<div><p>List with the <cite>area</cite> in pixels for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>pixels</strong> : list</p>
<blockquote>
<div><p>List with the <cite>pixels</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p>good_contours_in_full_frame:</p>
<blockquote>
<div><p>List with the <cite>contours</cite> which area is in between <cite>min_area</cite> and <cite>max_area</cite></p>
</div></blockquote>
<p><strong>estimated_body_lengths</strong> : list</p>
<blockquote class="last">
<div><p>List with the <cite>estimated_body_length</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.filter_contours_by_area" title="video_utils.filter_contours_by_area"><code class="xref py py-obj docutils literal"><span class="pre">filter_contours_by_area</span></code></a>, <a class="reference internal" href="#video_utils.get_blobs_information_per_frame" title="video_utils.get_blobs_information_per_frame"><code class="xref py py-obj docutils literal"><span class="pre">get_blobs_information_per_frame</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.check_background_substraction">
<code class="descclassname">video_utils.</code><code class="descname">check_background_substraction</code><span class="sig-paren">(</span><em>video</em>, <em>old_video</em>, <em>use_previous_background</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#check_background_substraction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.check_background_substraction" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether background substraction must be used and in that case it
checks whether a previous computed background can be used. Otherwise it
computes the background model from scracth or it returns None if background
substraction must not be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>old_video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Same object as video but with the information of a previous tracking session</p>
</div></blockquote>
<p><strong>use_previous_background</strong> : bool</p>
<blockquote>
<div><p>Indicates whether the background computed in a previous session must be used or not</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bkg</strong> : nd.array</p>
<blockquote class="last">
<div><p>Array with the model of the background.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.cumpute_background" title="video_utils.cumpute_background"><code class="xref py py-obj docutils literal"><span class="pre">cumpute_background</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.cnt2BoundingBox">
<code class="descclassname">video_utils.</code><code class="descname">cnt2BoundingBox</code><span class="sig-paren">(</span><em>cnt</em>, <em>bounding_box</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#cnt2BoundingBox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.cnt2BoundingBox" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the coordinates of the contour in the full frame to the the
bounding box of the blob.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>cnt</strong> : list</p>
<blockquote>
<div><p>List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</div></blockquote>
<p><strong>bounding_box</strong> : tuple</p>
<blockquote>
<div><p>Tuple with the coordinates of the bounding box (x, y),(x + w, y + h))</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>contour_in_bounding_box</strong> : nd.array</p>
<blockquote class="last">
<div><p>Array with the pairs of coordinates of the contour in the bounding box</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.cumpute_background">
<code class="descclassname">video_utils.</code><code class="descname">cumpute_background</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#cumpute_background"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.cumpute_background" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a model of the background by averaging multiple frames of the video.
In particular 1 every 100 frames is used for the computation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bkg</strong> : nd.array</p>
<blockquote class="last">
<div><p>Array with the model of the background.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.sum_frames_for_bkg_per_episode_in_single_file_video" title="video_utils.sum_frames_for_bkg_per_episode_in_single_file_video"><code class="xref py py-obj docutils literal"><span class="pre">sum_frames_for_bkg_per_episode_in_single_file_video</span></code></a>, <a class="reference internal" href="#video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video" title="video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video"><code class="xref py py-obj docutils literal"><span class="pre">sum_frames_for_bkg_per_episode_in_multiple_files_video</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.filter_contours_by_area">
<code class="descclassname">video_utils.</code><code class="descname">filter_contours_by_area</code><span class="sig-paren">(</span><em>contours</em>, <em>min_area</em>, <em>max_area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#filter_contours_by_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.filter_contours_by_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out contours which number of pixels is smaller than <cite>min_area</cite> or
greater than <cite>max_area</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>contours</strong> : list</p>
<blockquote>
<div><p>List of OpenCV contours</p>
</div></blockquote>
<p><strong>min_area</strong> : int</p>
<blockquote>
<div><p>Minimum number of pixels for a contour to be acceptable</p>
</div></blockquote>
<p><strong>max_area</strong> : int</p>
<blockquote>
<div><p>Maximum number of pixels for a contours to be acceptable</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>good_contours</strong> : list</p>
<blockquote class="last">
<div><p>List of OpenCV contours that fulfill both area thresholds</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.getCentroid">
<code class="descclassname">video_utils.</code><code class="descname">getCentroid</code><span class="sig-paren">(</span><em>cnt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#getCentroid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.getCentroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the centroid of the contour</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>cnt</strong> : list</p>
<blockquote>
<div><p>List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>centroid</strong> : tuple</p>
<blockquote class="last">
<div><p>(x,y) coordinates of the center of mass of the contour.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_blobs_information_per_frame">
<code class="descclassname">video_utils.</code><code class="descname">get_blobs_information_per_frame</code><span class="sig-paren">(</span><em>frame</em>, <em>contours</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_blobs_information_per_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_blobs_information_per_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a set of properties for all the <cite>contours</cite> in a given frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>frame</strong> : nd.array</p>
<blockquote>
<div><p>Frame from where to extract the <cite>bounding_box_image</cite> of every contour</p>
</div></blockquote>
<p><strong>contours</strong> : list</p>
<blockquote>
<div><p>List of OpenCV contours for which to compute the set of properties</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bounding_boxes</strong> : list</p>
<blockquote>
<div><p>List with the <cite>bounding_box</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>bounding_box_images</strong> : list</p>
<blockquote>
<div><p>List with the <cite>bounding_box_image</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>centroids</strong> : list</p>
<blockquote>
<div><p>List with the <cite>centroid</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>areas</strong> : list</p>
<blockquote>
<div><p>List with the <cite>area</cite> in pixels for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>pixels</strong> : list</p>
<blockquote>
<div><p>List with the <cite>pixels</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
<p><strong>estimated_body_lengths</strong> : list</p>
<blockquote class="last">
<div><p>List with the <cite>estimated_body_length</cite> for every contour in <cite>contours</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.get_bounding_box_image" title="video_utils.get_bounding_box_image"><code class="xref py py-obj docutils literal"><span class="pre">get_bounding_box_image</span></code></a>, <a class="reference internal" href="#video_utils.getCentroid" title="video_utils.getCentroid"><code class="xref py py-obj docutils literal"><span class="pre">getCentroid</span></code></a>, <a class="reference internal" href="#video_utils.get_pixels" title="video_utils.get_pixels"><code class="xref py py-obj docutils literal"><span class="pre">get_pixels</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_bounding_box">
<code class="descclassname">video_utils.</code><code class="descname">get_bounding_box</code><span class="sig-paren">(</span><em>cnt</em>, <em>width</em>, <em>height</em>, <em>crossing_detector=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_bounding_box"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the bounding box of a given contour with an extra margin of 45
pixels. If the function is called with the crossing_detector set to True the
margin of the bounding box is set to 55.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>cnt</strong> : list</p>
<blockquote>
<div><p>List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</div></blockquote>
<p><strong>width</strong> : int</p>
<blockquote>
<div><p>Width of the video frame</p>
</div></blockquote>
<p><strong>height</strong> : int</p>
<blockquote>
<div><p>Height of the video frame</p>
</div></blockquote>
<p><strong>crossing_detector</strong> : bool</p>
<blockquote>
<div><p>Flag to indicate whether the function is being called from the crossing_detector module</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bounding_box</strong> : tuple</p>
<blockquote>
<div><p>Tuple with the coordinates of the bounding box (x, y),(x + w, y + h))</p>
</div></blockquote>
<p><strong>original_diagonal</strong> : int</p>
<blockquote class="last">
<div><p>Diagonal of the original bounding box computed with OpenCv that serves as
an estimate for the body length of the animal.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_bounding_box_image">
<code class="descclassname">video_utils.</code><code class="descname">get_bounding_box_image</code><span class="sig-paren">(</span><em>frame</em>, <em>cnt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_bounding_box_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_bounding_box_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the <cite>bounding_box_image`from a given frame and contour. It also
returns the coordinates of the `bounding_box</cite>, the ravelled <cite>pixels</cite> inside of
the contour and the diagonal of the <cite>bounding_box</cite> as an <cite>estimated_body_length</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>frame</strong> : nd.array</p>
<blockquote>
<div><p>frame from where to extract the <cite>bounding_box_image</cite></p>
</div></blockquote>
<p><strong>cnt</strong> : list</p>
<blockquote>
<div><p>List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bounding_box</strong> : tuple</p>
<blockquote>
<div><p>Tuple with the coordinates of the bounding box (x, y),(x + w, y + h))</p>
</div></blockquote>
<p><strong>bounding_box_image</strong> : nd.array</p>
<blockquote>
<div><p>Part of the <cite>frame</cite> defined by the coordinates in <cite>bounding_box</cite></p>
</div></blockquote>
<p><strong>pixels_in_full_frame_ravelled</strong> : list</p>
<blockquote>
<div><p>List of ravelled pixels coordinates inside of the given contour</p>
</div></blockquote>
<p><strong>estimated_body_length</strong> : int</p>
<blockquote class="last">
<div><p>Estimated length of the contour in pixels.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.get_bounding_box" title="video_utils.get_bounding_box"><code class="xref py py-obj docutils literal"><span class="pre">get_bounding_box</span></code></a>, <a class="reference internal" href="#video_utils.cnt2BoundingBox" title="video_utils.cnt2BoundingBox"><code class="xref py py-obj docutils literal"><span class="pre">cnt2BoundingBox</span></code></a>, <a class="reference internal" href="#video_utils.get_pixels" title="video_utils.get_pixels"><code class="xref py py-obj docutils literal"><span class="pre">get_pixels</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_pixels">
<code class="descclassname">video_utils.</code><code class="descname">get_pixels</code><span class="sig-paren">(</span><em>cnt</em>, <em>width</em>, <em>height</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_pixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the coordinates list of the pixels inside the contour</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>cnt</strong> : list</p>
<blockquote>
<div><p>List of the coordinates that defines the contour of the blob in a give
width and height (it can either be the video width and heigh or the
bounding box width and height)</p>
</div></blockquote>
<p><strong>width</strong> : int</p>
<blockquote>
<div><p>Width of the frame</p>
</div></blockquote>
<p><strong>height</strong> : int</p>
<blockquote>
<div><p>Height of the frame</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pixels_coordinates_list</strong> : list</p>
<blockquote class="last">
<div><p>List of the coordinates of the pixels in a given width and height</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.segment_frame">
<code class="descclassname">video_utils.</code><code class="descname">segment_frame</code><span class="sig-paren">(</span><em>frame</em>, <em>min_threshold</em>, <em>max_threshold</em>, <em>bkg</em>, <em>ROI</em>, <em>useBkg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#segment_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.segment_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the intensity thresholds (<cite>min_threshold</cite> and <cite>max_threshold</cite>) and the
mask (<cite>ROI</cite>) to a given frame. If <cite>useBkg</cite> is True, the background subtraction
operation is applied before thresholding with the given <cite>bkg</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>frame</strong> : nd.array</p>
<blockquote>
<div><p>Frame to be segmented</p>
</div></blockquote>
<p><strong>min_threshold</strong> : int</p>
<blockquote>
<div><p>Minimum intensity threshold for the segmentation (value from 0 to 255)</p>
</div></blockquote>
<p><strong>max_threshold</strong> : int</p>
<blockquote>
<div><p>Maximum intensity threshold for the segmentation (value from 0 to 255)</p>
</div></blockquote>
<p><strong>bkg</strong> : nd.array</p>
<blockquote>
<div><p>Background model to be used in the background subtraction operation</p>
</div></blockquote>
<p><strong>ROI</strong> : nd.array</p>
<blockquote>
<div><p>Mask to be applied after thresholding. Ones in the array are pixels to be
considered, zeros are pixels to be discarded.</p>
</div></blockquote>
<p><strong>useBkg</strong> : bool</p>
<blockquote>
<div><p>Flag indicating whether background subtraction must be performed or not</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>frame_segmented_and_masked</strong> : nd.array</p>
<blockquote class="last">
<div><p>Frame with zeros and ones after applying the thresholding and the mask.
Pixels with value 1 are valid pixels given the thresholds and the mask.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video">
<code class="descclassname">video_utils.</code><code class="descname">sum_frames_for_bkg_per_episode_in_multiple_files_video</code><span class="sig-paren">(</span><em>video_path</em>, <em>bkg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#sum_frames_for_bkg_per_episode_in_multiple_files_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the sum of frames (1 every 100 frames) for a particular episode of
the video when the video is splitted in several files</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video_path</strong> : string</p>
<blockquote>
<div><p>Path to the file of the episode to be added to the background</p>
</div></blockquote>
<p><strong>bkg</strong> : nd.array</p>
<blockquote>
<div><p>Zeros array with same width and height as the frame of the video.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bkg</strong> : nd.array</p>
<blockquote>
<div><p>Array with same width and height as the frame of the video. Contains the
sum of (ending_frame - starting_frame) / 100 frames for the given episode</p>
</div></blockquote>
<p><strong>number_of_frames_for_bkg_in_episode</strong> : int</p>
<blockquote class="last">
<div><p>Number of frames used to compute the background in the current episode</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.sum_frames_for_bkg_per_episode_in_single_file_video">
<code class="descclassname">video_utils.</code><code class="descname">sum_frames_for_bkg_per_episode_in_single_file_video</code><span class="sig-paren">(</span><em>starting_frame</em>, <em>ending_frame</em>, <em>video_path</em>, <em>bkg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#sum_frames_for_bkg_per_episode_in_single_file_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.sum_frames_for_bkg_per_episode_in_single_file_video" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the sum of frames (1 every 100 frames) for a particular episode of
the video when the video is a single file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>starting_frame</strong> : int</p>
<blockquote>
<div><p>First frame of the episode</p>
</div></blockquote>
<p><strong>ending_frame</strong> : int</p>
<blockquote>
<div><p>Last frame of the episode</p>
</div></blockquote>
<p><strong>video_path</strong> : string</p>
<blockquote>
<div><p>Path to the single file of the video</p>
</div></blockquote>
<p><strong>bkg</strong> : nd.array</p>
<blockquote>
<div><p>Zeros array with same width and height as the frame of the video.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bkg</strong> : nd.array</p>
<blockquote>
<div><p>Array with same width and height as the frame of the video. Contains the
sum of (ending_frame - starting_frame) / 100 frames for the given episode</p>
</div></blockquote>
<p><strong>number_of_frames_for_bkg_in_episode</strong> : int</p>
<blockquote class="last">
<div><p>Number of frames used to compute the background in the current episode</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-get_data">
<span id="get-data"></span><h2>Get data<a class="headerlink" href="#module-get_data" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="get_data.DataSet">
<em class="property">class </em><code class="descclassname">get_data.</code><code class="descname">DataSet</code><span class="sig-paren">(</span><em>number_of_animals=None</em>, <em>images=None</em>, <em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#DataSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains the <cite>images</cite> and <cite>labels</cite> to be used for training a particular
model</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>images</strong></td>
<td>(ndarray) Array of shape [num_images, height, width, channels] containing the images of the dataset</td>
</tr>
<tr class="row-even"><td><strong>num_images</strong></td>
<td>(int) Number of images in the dataset</td>
</tr>
<tr class="row-odd"><td><strong>labels</strong></td>
<td>(ndarray) Array of shape [num_images, number_of_classes] containing the labels corresponding to the images in the dataset</td>
</tr>
<tr class="row-even"><td><strong>number_of_animals</strong></td>
<td>(int) Number of classes in the dataset</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#get_data.DataSet.consistency_check" title="get_data.DataSet.consistency_check"><code class="xref py py-obj docutils literal"><span class="pre">consistency_check</span></code></a>()</td>
<td>Checks that the length of <code class="xref py py-attr docutils literal"><span class="pre">images</span></code> and <code class="xref py py-attr docutils literal"><span class="pre">labels</span></code> is the same</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#get_data.DataSet.convert_labels_to_one_hot" title="get_data.DataSet.convert_labels_to_one_hot"><code class="xref py py-obj docutils literal"><span class="pre">convert_labels_to_one_hot</span></code></a>()</td>
<td>Converts labels from dense format to one hot format</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="get_data.DataSet.consistency_check">
<code class="descname">consistency_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#DataSet.consistency_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.DataSet.consistency_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the length of <code class="xref py py-attr docutils literal"><span class="pre">images</span></code> and <code class="xref py py-attr docutils literal"><span class="pre">labels</span></code> is the same</p>
</dd></dl>

<dl class="method">
<dt id="get_data.DataSet.convert_labels_to_one_hot">
<code class="descname">convert_labels_to_one_hot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#DataSet.convert_labels_to_one_hot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.DataSet.convert_labels_to_one_hot" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts labels from dense format to one hot format
See Also
——–
<a class="reference internal" href="#get_data.shuffle_images_and_labels" title="get_data.shuffle_images_and_labels"><code class="xref py py-func docutils literal"><span class="pre">shuffle_images_and_labels()</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="get_data.dense_to_one_hot">
<code class="descclassname">get_data.</code><code class="descname">dense_to_one_hot</code><span class="sig-paren">(</span><em>labels</em>, <em>n_classes=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#dense_to_one_hot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.dense_to_one_hot" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert class labels from scalars to one-hot vectors.</p>
</dd></dl>

<dl class="function">
<dt id="get_data.duplicate_PCA_images">
<code class="descclassname">get_data.</code><code class="descname">duplicate_PCA_images</code><span class="sig-paren">(</span><em>training_images</em>, <em>training_labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#duplicate_PCA_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.duplicate_PCA_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of every image in <cite>training_images</cite> by rotating 180 degrees</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>training_images</strong> : ndarray</p>
<blockquote>
<div><p>Array of shape [number of images, height, width, channels] containing
the images to be rotated</p>
</div></blockquote>
<p><strong>training_labels</strong> : ndarray</p>
<blockquote>
<div><p>Array of shape [number of images, 1] containing the labels corresponding
to the <cite>training_images</cite></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>training_images</strong> : ndarray</p>
<blockquote>
<div><p>Array of shape [2*number of images, height, width, channels] containing
the original images and the images rotated</p>
</div></blockquote>
<p><strong>training_labels</strong> : ndarray</p>
<blockquote class="last">
<div><p>Array of shape [2*number of images, 1] containing the labels corresponding
to the original images and the images rotated</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="get_data.shuffle_images_and_labels">
<code class="descclassname">get_data.</code><code class="descname">shuffle_images_and_labels</code><span class="sig-paren">(</span><em>images</em>, <em>labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#shuffle_images_and_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.shuffle_images_and_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffles images and labels with a random
permutation, according to the number of examples</p>
</dd></dl>

<dl class="function">
<dt id="get_data.split_data_train_and_validation">
<code class="descclassname">get_data.</code><code class="descname">split_data_train_and_validation</code><span class="sig-paren">(</span><em>number_of_animals</em>, <em>images</em>, <em>labels</em>, <em>validation_proportion=0.1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_data.html#split_data_train_and_validation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_data.split_data_train_and_validation" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a set of <cite>images</cite> and <cite>labels</cite> into training and validation sets</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>Number of classes in the set of images</p>
</div></blockquote>
<p><strong>images</strong> : list</p>
<blockquote>
<div><p>List of images (arrays of shape [height, width])</p>
</div></blockquote>
<p><strong>labels</strong> : list</p>
<blockquote>
<div><p>List of integers from 0 to <cite>number_of_animals</cite> - 1</p>
</div></blockquote>
<p><strong>validation_proportion</strong> : float</p>
<blockquote>
<div><p>The proportion of images that will be used to create the validation set.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>training_dataset</strong> : &lt;DataSet object&gt;</p>
<blockquote>
<div><p>Object containing the images and labels for training</p>
</div></blockquote>
<p><strong>validation_dataset</strong> : &lt;DataSet object&gt;</p>
<blockquote class="last">
<div><p>Object containing the images and labels for validation</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#get_data.DataSet" title="get_data.DataSet"><code class="xref py py-class docutils literal"><span class="pre">get_data.DataSet</span></code></a>, <a class="reference internal" href="#get_data.duplicate_PCA_images" title="get_data.duplicate_PCA_images"><code class="xref py py-func docutils literal"><span class="pre">get_data.duplicate_PCA_images()</span></code></a>, <a class="reference internal" href="#get_data.shuffle_images_and_labels" title="get_data.shuffle_images_and_labels"><code class="xref py py-func docutils literal"><span class="pre">get_data.shuffle_images_and_labels()</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="epoch-runner">
<h2>Epoch runner<a class="headerlink" href="#epoch-runner" title="Permalink to this headline">¶</a></h2>
<p>Computes a given operation for an entire epoch divided in batches</p>
<span class="target" id="module-epoch_runner"></span><dl class="class">
<dt id="epoch_runner.EpochRunner">
<em class="property">class </em><code class="descclassname">epoch_runner.</code><code class="descname">EpochRunner</code><span class="sig-paren">(</span><em>data_set</em>, <em>starting_epoch=0</em>, <em>print_flag=True</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/epoch_runner.html#EpochRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#epoch_runner.EpochRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs an epoch divided in batches for a given operation and a given
data set (<a class="reference internal" href="#get_data.DataSet" title="get_data.DataSet"><code class="xref py py-class docutils literal"><span class="pre">DataSet</span></code></a>).</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>epochs_completed</strong></td>
<td>(int) Number of epochs completed in the current step of the training</td>
</tr>
<tr class="row-even"><td><strong>starting_epoch</strong></td>
<td>(int) Epoch at which the training step started</td>
</tr>
<tr class="row-odd"><td><strong>print_flag</strong></td>
<td>(bool) If <cite>True</cite> prints the values of the loss, the accucacy, and the individual accuracy at the end of the epoch</td>
</tr>
<tr class="row-even"><td><strong>data_set</strong></td>
<td>(&lt;DataSet object&gt;) Object containing the images and labels to be passed through the network in the current epoch (see <a class="reference internal" href="#get_data.DataSet" title="get_data.DataSet"><code class="xref py py-class docutils literal"><span class="pre">DataSet</span></code></a>)</td>
</tr>
<tr class="row-odd"><td><strong>batch_size</strong></td>
<td>(int) Number of images to be passed through the network in each bach.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#epoch_runner.EpochRunner.next_batch" title="epoch_runner.EpochRunner.next_batch"><code class="xref py py-obj docutils literal"><span class="pre">next_batch</span></code></a>(batch_size)</td>
<td>Returns the images and labels for the next batch to be computed.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#epoch_runner.EpochRunner.run_epoch" title="epoch_runner.EpochRunner.run_epoch"><code class="xref py py-obj docutils literal"><span class="pre">run_epoch</span></code></a>(name,&nbsp;store_loss_and_accuracy,&nbsp;…)</td>
<td>Performs a given <cite>batch_operation</cite> for an entire epoch and stores the</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="epoch_runner.EpochRunner.next_batch">
<code class="descname">next_batch</code><span class="sig-paren">(</span><em>batch_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/epoch_runner.html#EpochRunner.next_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#epoch_runner.EpochRunner.next_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the images and labels for the next batch to be computed. Images
and labels are extracted from a <a class="reference internal" href="#get_data.DataSet" title="get_data.DataSet"><code class="xref py py-class docutils literal"><span class="pre">get_data.DataSet</span></code></a> object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>batch_size</strong> : int</p>
<blockquote>
<div><p>Number of examples to be passed through the network in this batch</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>images</strong> : ndarray</p>
<blockquote>
<div><p>Array of shape [batch_size, height, width, channels] containing
the images to be used in this batch</p>
</div></blockquote>
<p><strong>labels</strong> : ndarray</p>
<blockquote class="last">
<div><p>Array of shape [batch_size, number_of_classes] containing the
labels corresponding to the images to be used in this batch</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#get_data.DataSet" title="get_data.DataSet"><code class="xref py py-class docutils literal"><span class="pre">get_data.DataSet</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="epoch_runner.EpochRunner.run_epoch">
<code class="descname">run_epoch</code><span class="sig-paren">(</span><em>name</em>, <em>store_loss_and_accuracy</em>, <em>batch_operation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/epoch_runner.html#EpochRunner.run_epoch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#epoch_runner.EpochRunner.run_epoch" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a given <cite>batch_operation</cite> for an entire epoch and stores the
values of the loss and the accurcaies in a <code class="xref py py-class docutils literal"><span class="pre">Store_Accuracy_and_Loss</span></code>
object for visualization</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : string</p>
<blockquote>
<div><p>A string to be printed in the epoch information. Typically ‘Training’
or ‘Validation’.</p>
</div></blockquote>
<p><strong>store_loss_and_accuracy</strong> : &lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote>
<div><p>Object collecting the values of the loss, accurcay and individual accuracies
(see <code class="xref py py-class docutils literal"><span class="pre">store_accuracy_and_loss.Store_Accuracy_and_Loss</span></code>)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>feed_dict</strong> : dict</p>
<blockquote class="last">
<div><p>Dictionary with the parameters and variables needed to run the
<cite>batch_operation</cite>. It is used to save the Tensorflow summaries
if needed</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#get_data.DataSet" title="get_data.DataSet"><code class="xref py py-class docutils literal"><span class="pre">get_data.DataSet</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">store_accuracy_and_loss.Store_Accuracy_and_Loss</span></code></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="trainer">
<h2>Trainer<a class="headerlink" href="#trainer" title="Permalink to this headline">¶</a></h2>
<p>Trains an instance of the class <code class="xref py py-class docutils literal"><span class="pre">ConvNetwork</span></code></p>
<span class="target" id="module-trainer"></span><dl class="function">
<dt id="trainer.train">
<code class="descclassname">trainer.</code><code class="descname">train</code><span class="sig-paren">(</span><em>video</em>, <em>fragments</em>, <em>net</em>, <em>images</em>, <em>labels</em>, <em>store_accuracy_and_error</em>, <em>check_for_loss_plateau</em>, <em>save_summaries</em>, <em>print_flag</em>, <em>plot_flag</em>, <em>global_step=0</em>, <em>identity_transfer=False</em>, <em>accumulation_manager=None</em>, <em>batch_size=50</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trainer.html#train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#trainer.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Short summary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>fragments</strong> : list</p>
<blockquote>
<div><p>list of instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
<p><strong>net</strong> : &lt;ConvNetwork object&gt;</p>
<blockquote>
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">ConvNetwork</span></code></p>
</div></blockquote>
<p><strong>images</strong> : ndarray</p>
<blockquote>
<div><p>array of shape [number_of_images, height, width]</p>
</div></blockquote>
<p><strong>labels</strong> : type</p>
<blockquote>
<div><p>array of shape [number_of_images, number_of_animals]</p>
</div></blockquote>
<p><strong>store_accuracy_and_error</strong> : bool</p>
<blockquote>
<div><p>if True the values of the loss function, accuracy and individual
accuracy will be stored</p>
</div></blockquote>
<p><strong>check_for_loss_plateau</strong> : bool</p>
<blockquote>
<div><p>if True the stopping criteria (see <code class="xref py py-mod docutils literal"><span class="pre">stop_training_criteria</span></code>) will
automatically stop the training in case the loss functin computed for
the validation set of images reaches a plateau</p>
</div></blockquote>
<p><strong>sasave_summaries</strong> : bool</p>
<blockquote>
<div><p>if True tensorflow summaries will be generated and stored to allow
tensorboard visualisation of both loss and activity histograms</p>
</div></blockquote>
<p><strong>print_flag</strong> : bool</p>
<blockquote>
<div><p>if True additional information are printed in the terminal</p>
</div></blockquote>
<p><strong>plot_flag</strong> : bool</p>
<blockquote>
<div><p>if True training and validation loss, accuracy and individual accuracy
are plot in a graph at the end of the training session</p>
</div></blockquote>
<p><strong>global_epoch</strong> : int</p>
<blockquote>
<div><p>global counter of the training epoch in pretraining</p>
</div></blockquote>
<p><strong>accumulation_manager</strong> : &lt;AccumulationManager object&gt;</p>
<blockquote>
<div><p>an instance of the class
<a class="reference internal" href="#accumulation_manager.AccumulationManager" title="accumulation_manager.AccumulationManager"><code class="xref py py-class docutils literal"><span class="pre">AccumulationManager</span></code></a></p>
</div></blockquote>
<p><strong>batch_size</strong> : int</p>
<blockquote>
<div><p>size of the batch of images used for training</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote>
<div><p>global epoch counter updated after the training session</p>
</div></blockquote>
<p>&lt;ConvNetwork object&gt;</p>
<blockquote>
<div><p>network with updated parameters after training</p>
</div></blockquote>
<p>float</p>
<blockquote>
<div><p>ration of images used for pretraining over the total number of
available images</p>
</div></blockquote>
<p>&lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote>
<div><p>updated with the values collected on the training set of labelled
images</p>
</div></blockquote>
<p>&lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote class="last">
<div><p>updated with the values collected on the validation set of labelled
images</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pretraining">
<h2>Pretraining<a class="headerlink" href="#pretraining" title="Permalink to this headline">¶</a></h2>
<p>Pretrains the network as the first step of the third fingerprint protocol.</p>
<span class="target" id="module-pre_trainer"></span><dl class="function">
<dt id="pre_trainer.pre_train">
<code class="descclassname">pre_trainer.</code><code class="descname">pre_train</code><span class="sig-paren">(</span><em>video</em>, <em>list_of_fragments</em>, <em>list_of_global_fragments</em>, <em>params</em>, <em>store_accuracy_and_error</em>, <em>check_for_loss_plateau</em>, <em>save_summaries</em>, <em>print_flag</em>, <em>plot_flag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pre_trainer.html#pre_train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pre_trainer.pre_train" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs pretraining by iterating on the list of global fragments
sorted by distance travelled, until the threshold
<code class="xref py py-const docutils literal"><span class="pre">MAX_RATIO_OF_PRETRAINED_IMAGES</span></code> is reached</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#list_of_fragments.ListOfFragments" title="list_of_fragments.ListOfFragments"><code class="xref py py-class docutils literal"><span class="pre">ListOfFragments</span></code></a></p>
</div></blockquote>
<p><strong>list_of_global_fragments</strong> : &lt;ListOfGlobalFragments object&gt;</p>
<blockquote>
<div><p>an instance of the class
<a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments" title="list_of_global_fragments.ListOfGlobalFragments"><code class="xref py py-class docutils literal"><span class="pre">ListOfGlobalFragments</span></code></a></p>
</div></blockquote>
<p><strong>params</strong> : &lt;NetworkParams object&gt;</p>
<blockquote>
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">NetworkParams</span></code></p>
</div></blockquote>
<p><strong>store_accuracy_and_error</strong> : bool</p>
<blockquote>
<div><p>if True the values of the loss function, accuracy and individual
accuracy will be stored</p>
</div></blockquote>
<p><strong>check_for_loss_plateau</strong> : bool</p>
<blockquote>
<div><p>if True the stopping criteria (see <code class="xref py py-mod docutils literal"><span class="pre">stop_training_criteria</span></code>) will
automatically stop the training in case the loss functin computed for
the validation set of images reaches a plateau</p>
</div></blockquote>
<p><strong>save_summaries</strong> : bool</p>
<blockquote>
<div><p>if True tensorflow summaries will be generated and stored to allow
tensorboard visualisation of both loss and activity histograms</p>
</div></blockquote>
<p><strong>print_flag</strong> : bool</p>
<blockquote>
<div><p>if True additional information are printed in the terminal</p>
</div></blockquote>
<p><strong>plot_flag</strong> : bool</p>
<blockquote>
<div><p>if True training and validation loss, accuracy and individual accuracy
are plot in a graph at the end of the training session</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">&lt;ConvNetwork object&gt;</p>
<blockquote class="last">
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">ConvNetwork</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pre_trainer.pre_train_global_fragment">
<code class="descclassname">pre_trainer.</code><code class="descname">pre_train_global_fragment</code><span class="sig-paren">(</span><em>net</em>, <em>pretraining_global_fragment</em>, <em>list_of_fragments</em>, <em>global_epoch</em>, <em>check_for_loss_plateau</em>, <em>store_accuracy_and_error</em>, <em>save_summaries</em>, <em>store_training_accuracy_and_loss_data</em>, <em>store_validation_accuracy_and_loss_data</em>, <em>print_flag=False</em>, <em>plot_flag=False</em>, <em>batch_size=None</em>, <em>canvas_from_GUI=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pre_trainer.html#pre_train_global_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pre_trainer.pre_train_global_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs pretraining on a single global fragments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>net</strong> : &lt;ConvNetwork obejct&gt;</p>
<blockquote>
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">ConvNetwork</span></code></p>
</div></blockquote>
<p><strong>pretraining_global_fragment</strong> : &lt;GlobalFragment object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#globalfragment.GlobalFragment" title="globalfragment.GlobalFragment"><code class="xref py py-class docutils literal"><span class="pre">GlobalFragment</span></code></a></p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#list_of_fragments.ListOfFragments" title="list_of_fragments.ListOfFragments"><code class="xref py py-class docutils literal"><span class="pre">ListOfFragments</span></code></a></p>
</div></blockquote>
<p><strong>global_epoch</strong> : int</p>
<blockquote>
<div><p>global counter of the training epoch in pretraining</p>
</div></blockquote>
<p><strong>check_for_loss_plateau</strong> : bool</p>
<blockquote>
<div><p>if True the stopping criteria (see <code class="xref py py-mod docutils literal"><span class="pre">stop_training_criteria</span></code>) will
automatically stop the training in case the loss functin computed for
the validation set of images reaches a plateau</p>
</div></blockquote>
<p><strong>store_accuracy_and_error</strong> : bool</p>
<blockquote>
<div><p>if True the values of the loss function, accuracy and individual
accuracy will be stored</p>
</div></blockquote>
<p><strong>save_summaries</strong> : bool</p>
<blockquote>
<div><p>if True tensorflow summaries will be generated and stored to allow
tensorboard visualisation of both loss and activity histograms</p>
</div></blockquote>
<p><strong>store_training_accuracy_and_loss_data</strong> : &lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote>
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">Store_Accuracy_and_Loss</span></code></p>
</div></blockquote>
<p><strong>store_validation_accuracy_and_loss_data</strong> : &lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote>
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">Store_Accuracy_and_Loss</span></code></p>
</div></blockquote>
<p><strong>print_flag</strong> : bool</p>
<blockquote>
<div><p>if True additional information are printed in the terminal</p>
</div></blockquote>
<p><strong>plot_flag</strong> : bool</p>
<blockquote>
<div><p>if True training and validation loss, accuracy and individual accuracy
are plot in a graph at the end of the training session</p>
</div></blockquote>
<p><strong>batch_size</strong> : int</p>
<blockquote>
<div><p>size of the batch of images used for training</p>
</div></blockquote>
<p><strong>canvas_from_GUI</strong> : matplotlib figure canvas</p>
<blockquote>
<div><p>canvas of the matplotlib figure initialised in
<code class="xref py py-class docutils literal"><span class="pre">Tracker</span></code> used to update the figure in the GUI
visualisation of pretraining</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">&lt;ConvNetwork object&gt;</p>
<blockquote>
<div><p>network with updated parameters after training</p>
</div></blockquote>
<p>float</p>
<blockquote>
<div><p>ration of images used for pretraining over the total number of
available images</p>
</div></blockquote>
<p>int</p>
<blockquote>
<div><p>global epoch counter updated after the training session</p>
</div></blockquote>
<p>&lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote>
<div><p>updated with the values collected on the training set of labelled
images</p>
</div></blockquote>
<p>&lt;Store_Accuracy_and_Loss object&gt;</p>
<blockquote>
<div><p>updated with the values collected on the validation set of labelled
images</p>
</div></blockquote>
<p>&lt;ListOfFragments objects&gt;</p>
<blockquote class="last">
<div><p>list of instances of the class <a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">Fragment</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pre_trainer.pre_trainer">
<code class="descclassname">pre_trainer.</code><code class="descname">pre_trainer</code><span class="sig-paren">(</span><em>old_video</em>, <em>video</em>, <em>list_of_fragments</em>, <em>list_of_global_fragments</em>, <em>pretrain_network_params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pre_trainer.html#pre_trainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pre_trainer.pre_trainer" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialises and starts the pretraining (3rd fingerprint protocol)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>old_video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>video :&lt;Video object&gt;</strong></p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>an instance of the class <a class="reference internal" href="#list_of_fragments.ListOfFragments" title="list_of_fragments.ListOfFragments"><code class="xref py py-class docutils literal"><span class="pre">ListOfFragments</span></code></a></p>
</div></blockquote>
<p><strong>list_of_global_fragments</strong> : &lt;ListOfGlobalFragments object&gt;</p>
<blockquote>
<div><p>an instance of the class
<a class="reference internal" href="#list_of_global_fragments.ListOfGlobalFragments" title="list_of_global_fragments.ListOfGlobalFragments"><code class="xref py py-class docutils literal"><span class="pre">ListOfGlobalFragments</span></code></a></p>
</div></blockquote>
<p><strong>pretrain_network_params</strong> :  &lt;NetworkParams object&gt;</p>
<blockquote class="last">
<div><p>an instance of the class <code class="xref py py-class docutils literal"><span class="pre">NetworkParams</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-correct_impossible_velocity_jumps">
<span id="impossible-velocity-jumps-correction"></span><h2>Impossible velocity jumps correction<a class="headerlink" href="#module-correct_impossible_velocity_jumps" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="correct_impossible_velocity_jumps.compute_neighbour_fragments_and_velocities">
<code class="descclassname">correct_impossible_velocity_jumps.</code><code class="descname">compute_neighbour_fragments_and_velocities</code><span class="sig-paren">(</span><em>video</em>, <em>list_of_fragments</em>, <em>fragment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/correct_impossible_velocity_jumps.html#compute_neighbour_fragments_and_velocities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#correct_impossible_velocity_jumps.compute_neighbour_fragments_and_velocities" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the fragments with the same identities to the past and to the
future of a given <cite>fragment</cite> and gives the velocities at the extremes of the
current <cite>fragment</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>Object collecting the list of fragments and all the statistics and methods
related to them</p>
</div></blockquote>
<p><strong>fragment</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>Object collecting all the information for a consecutive set of overlapping
blobs that are considered to be the same animal</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>neighbour_fragment_past</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p><cite>Fragment</cite> object with the same identity as the current fragment in the
past</p>
</div></blockquote>
<p><strong>neighbour_fragment_future</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p><cite>Fragment</cite> object with the same identity as the current fragment in the
future</p>
</div></blockquote>
<p><strong>velocities_between_fragments</strong> : nd.array</p>
<blockquote class="last">
<div><p>Velocities needed to connect the current fragment to its consecutive
fragments in the past and in the future.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#correct_impossible_velocity_jumps.get_fragment_with_same_identity" title="correct_impossible_velocity_jumps.get_fragment_with_same_identity"><code class="xref py py-obj docutils literal"><span class="pre">get_fragment_with_same_identity</span></code></a>, <a class="reference internal" href="#correct_impossible_velocity_jumps.compute_velocities_consecutive_fragments" title="correct_impossible_velocity_jumps.compute_velocities_consecutive_fragments"><code class="xref py py-obj docutils literal"><span class="pre">compute_velocities_consecutive_fragments</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="correct_impossible_velocity_jumps.compute_velocities_consecutive_fragments">
<code class="descclassname">correct_impossible_velocity_jumps.</code><code class="descname">compute_velocities_consecutive_fragments</code><span class="sig-paren">(</span><em>neighbour_fragment_past</em>, <em>fragment</em>, <em>neighbour_fragment_future</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/correct_impossible_velocity_jumps.html#compute_velocities_consecutive_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#correct_impossible_velocity_jumps.compute_velocities_consecutive_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute velocities in the extremes of a <cite>fragment</cite> with respecto to its
<cite>neighbour_fragment_past</cite> and <cite>neighbour_fragment_future</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>neighbour_fragment_past</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p><cite>Fragment</cite> object with the same identity as the current fragment in the
past</p>
</div></blockquote>
<p><strong>fragment</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>Object collecting all the information for a consecutive set of overlapping
blobs that are considered to be the same animal</p>
</div></blockquote>
<p><strong>neighbour_fragment_future</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p><cite>Fragment</cite> object with the same identity as the current fragment in the
future</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>velocities</strong> : list</p>
<blockquote class="last">
<div><p>List with the velocity needed to link the fragment with its fragment in
the past and in the future</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">Fragment</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="correct_impossible_velocity_jumps.correct_impossible_velocity_jumps">
<code class="descclassname">correct_impossible_velocity_jumps.</code><code class="descname">correct_impossible_velocity_jumps</code><span class="sig-paren">(</span><em>video</em>, <em>list_of_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/correct_impossible_velocity_jumps.html#correct_impossible_velocity_jumps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#correct_impossible_velocity_jumps.correct_impossible_velocity_jumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Corrects the parts of the video where the velocity of any individual is
higher than a particular velocty threshold given by <cite>video.velocity_threshold</cite>.
This check is done from the <cite>video.first_frame_first_global_fragment</cite> to the
past and to the future</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote class="last">
<div><p>Object collecting the list of fragments and all the statistics and methods
related to them</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#correct_impossible_velocity_jumps.correct_impossible_velocity_jumps_loop" title="correct_impossible_velocity_jumps.correct_impossible_velocity_jumps_loop"><code class="xref py py-obj docutils literal"><span class="pre">correct_impossible_velocity_jumps_loop</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="correct_impossible_velocity_jumps.correct_impossible_velocity_jumps_loop">
<code class="descclassname">correct_impossible_velocity_jumps.</code><code class="descname">correct_impossible_velocity_jumps_loop</code><span class="sig-paren">(</span><em>video</em>, <em>list_of_fragments</em>, <em>scope=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/correct_impossible_velocity_jumps.html#correct_impossible_velocity_jumps_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#correct_impossible_velocity_jumps.correct_impossible_velocity_jumps_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the velocity needed to join two consecutive fragments with
the same identity is consistent with the typical velocity of the animals in
the video (<cite>video.velocity_threshold</cite>). If the velocity is not consistent the
identity of one of the fragments is reassigned. The check is performed from the
<cite>video.first_frame_first_global_fragment</cite> to the past or to the future according
to the <cite>scope</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>Object collecting the list of fragments and all the statistics and methods
related to them</p>
</div></blockquote>
<p><strong>scope</strong> : string</p>
<blockquote class="last">
<div><p>If <cite>scope</cite> = <cite>to_the_past</cite> the check is performed to the past and if
<cite>scope</cite> = <cite>to_the_future</cite> the check is performed to the future.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">Fragment</span></code>, <a class="reference internal" href="#correct_impossible_velocity_jumps.compute_neighbour_fragments_and_velocities" title="correct_impossible_velocity_jumps.compute_neighbour_fragments_and_velocities"><code class="xref py py-obj docutils literal"><span class="pre">compute_neighbour_fragments_and_velocities</span></code></a>, <a class="reference internal" href="#correct_impossible_velocity_jumps.compute_velocities_consecutive_fragments" title="correct_impossible_velocity_jumps.compute_velocities_consecutive_fragments"><code class="xref py py-obj docutils literal"><span class="pre">compute_velocities_consecutive_fragments</span></code></a>, <a class="reference internal" href="#correct_impossible_velocity_jumps.reassign" title="correct_impossible_velocity_jumps.reassign"><code class="xref py py-obj docutils literal"><span class="pre">reassign</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="correct_impossible_velocity_jumps.get_fragment_with_same_identity">
<code class="descclassname">correct_impossible_velocity_jumps.</code><code class="descname">get_fragment_with_same_identity</code><span class="sig-paren">(</span><em>video</em>, <em>list_of_fragments</em>, <em>fragment</em>, <em>direction</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/correct_impossible_velocity_jumps.html#get_fragment_with_same_identity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#correct_impossible_velocity_jumps.get_fragment_with_same_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the <cite>neighbour_fragment</cite> with the same identity in a given <cite>direction</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>Object collecting all the parameters of the video and paths for saving and loading</p>
</div></blockquote>
<p><strong>list_of_fragments</strong> : &lt;ListOfFragments object&gt;</p>
<blockquote>
<div><p>Object collecting the list of fragments and all the statistics and methods
related to them</p>
</div></blockquote>
<p><strong>fragment</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>Object collecting all the information for a consecutive set of overlapping
blobs that are considered to be the same animal</p>
</div></blockquote>
<p><strong>direction</strong> : string</p>
<blockquote>
<div><p>If <cite>direction</cite> = <cite>to_the_past</cite> gets the <cite>neighbour_fragment</cite> in the past
<cite>direction</cite> = <cite>to_the_future</cite> gets the <cite>neighbour_fragment</cite> in the future</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>neighbour_fragment</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p><cite>Fragment</cite> object with the same identity in a given <cite>direction</cite></p>
</div></blockquote>
<p><strong>number_of_frames_in_direction</strong> : int</p>
<blockquote class="last">
<div><p>Number of frames to find the <cite>neighbour_fragment</cite> from a given extreme
of the <cite>fragment</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">Fragment</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="correct_impossible_velocity_jumps.reassign">
<code class="descclassname">correct_impossible_velocity_jumps.</code><code class="descname">reassign</code><span class="sig-paren">(</span><em>fragment</em>, <em>fragments</em>, <em>impossible_velocity_threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/correct_impossible_velocity_jumps.html#reassign"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#correct_impossible_velocity_jumps.reassign" title="Permalink to this definition">¶</a></dt>
<dd><p>Reassigns the identity of a given <cite>fragment</cite> considering the identity of the
<cite>fragments</cite> coexisting with it and the <cite>impossible_velocity_threshold</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fragment</strong> : &lt;Fragment object&gt;</p>
<blockquote>
<div><p>Object collecting all the information for a consecutive set of overlapping
blobs that are considered to be the same animal</p>
</div></blockquote>
<p><strong>fragments</strong> : list</p>
<blockquote>
<div><p>List with all the <cite>Fragment</cite> objects of the video</p>
</div></blockquote>
<p><strong>impossible_velocity_threshold</strong> : float</p>
<blockquote class="last">
<div><p>If the velocity needed to link two fragments is higher than this threshold
the identiy of one of the fragments is considerd to be wrong as it would be
physically impossible for an animal to move so much. See <cite>video.velocity_threshold</cite>
for each definition</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal"><span class="pre">fragment.Fragment</span></code></a>, <code class="xref py py-meth docutils literal"><span class="pre">get_available_and_non_available_identities()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">get_candidate_identities_by_minimum_speed()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">get_candidate_identities_above_random_P2()</span></code></p>
</div>
</dd></dl>

</div>
<div class="section" id="get-trajectories">
<h2>Get trajectories<a class="headerlink" href="#get-trajectories" title="Permalink to this headline">¶</a></h2>
<p>Produces the dictionary of outputs containing the individual trajectories (centroids),
the git output, the path to the video whose tracking poroduced the individual trajectories and
frames_per_second.</p>
<span class="target" id="module-get_trajectories"></span><dl class="function">
<dt id="get_trajectories.assign_point_to_identity">
<code class="descclassname">get_trajectories.</code><code class="descname">assign_point_to_identity</code><span class="sig-paren">(</span><em>centroid</em>, <em>identity</em>, <em>frame_number</em>, <em>centroid_trajectories</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_trajectories.html#assign_point_to_identity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_trajectories.assign_point_to_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Populate the matrix of individual trajectories with the centroid of a
selected Blob object (see <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal"><span class="pre">Blob</span></code></a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>centroid</strong> : tuple</p>
<blockquote>
<div><p>(x, y)</p>
</div></blockquote>
<p><strong>identity</strong> : int</p>
<blockquote>
<div><p>Identity to be associated with the centroid</p>
</div></blockquote>
<p><strong>frame_number</strong> : int</p>
<blockquote>
<div><p>Frame number in the tracked video</p>
</div></blockquote>
<p><strong>centroid_trajectories</strong> : ndarray</p>
<blockquote>
<div><p>array of shape [number of frame in video x number of animals  x  2]</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray</p>
<blockquote class="last">
<div><p>centroid_trajectories</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="get_trajectories.produce_output_dict">
<code class="descclassname">get_trajectories.</code><code class="descname">produce_output_dict</code><span class="sig-paren">(</span><em>blobs_in_video</em>, <em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_trajectories.html#produce_output_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_trajectories.produce_output_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs the dictionary with keys: trajectories, git_commit, video_path,
frames_per_second</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : list</p>
<blockquote>
<div><p>List of all blob objects (see <code class="xref py py-class docutils literal"><span class="pre">Blobs</span></code>) generated by
considering all the blobs segmented from the video</p>
</div></blockquote>
<p><strong>video</strong> : &lt;Video object&gt;</p>
<blockquote>
<div><p>See <a class="reference internal" href="#video.Video" title="video.Video"><code class="xref py py-class docutils literal"><span class="pre">Video</span></code></a></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dict</p>
<blockquote class="last">
<div><p>Output dictionary containing trajectories as values</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="get_trajectories.produce_trajectories">
<code class="descclassname">get_trajectories.</code><code class="descname">produce_trajectories</code><span class="sig-paren">(</span><em>blobs_in_video</em>, <em>number_of_frames</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/get_trajectories.html#produce_trajectories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_trajectories.produce_trajectories" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce trajectories array from ListOfBlobs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>blobs_in_video</strong> : &lt;ListOfBlobs object&gt;</p>
<blockquote>
<div><p>See <a class="reference internal" href="#list_of_blobs.ListOfBlobs" title="list_of_blobs.ListOfBlobs"><code class="xref py py-class docutils literal"><span class="pre">list_of_blobs.ListOfBlobs</span></code></a></p>
</div></blockquote>
<p><strong>number_of_frames</strong> : int</p>
<blockquote>
<div><p>Total number of frames in video</p>
</div></blockquote>
<p><strong>number_of_animals</strong> : int</p>
<blockquote>
<div><p>Number of animals to be tracked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dict</p>
<blockquote class="last">
<div><p>Dictionary with np.array as values (trajectories organised by identity)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="video">
<h2>Video<a class="headerlink" href="#video" title="Permalink to this headline">¶</a></h2>
<p>Collects information concerning the video (fps, number of channels, …) and manages
the creation of the folders used to save and load both partial and final outputs of
the algorithm</p>
<span class="target" id="module-video"></span><dl class="class">
<dt id="video.Video">
<em class="property">class </em><code class="descclassname">video.</code><code class="descname">Video</code><span class="sig-paren">(</span><em>video_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>video_path</strong></td>
<td>(str) path to the video (if the video is split in portions, the path to one of the portions)</td>
</tr>
<tr class="row-even"><td><strong>number_of_animals</strong></td>
<td>(int) number of animals to track</td>
</tr>
<tr class="row-odd"><td><strong>episodes_start_end</strong></td>
<td>(list) list of lists of the form [start, end] to parallelise processes</td>
</tr>
<tr class="row-even"><td><strong>original_bkg</strong></td>
<td>(ndarray) model of the background with size the frame size</td>
</tr>
<tr class="row-odd"><td><strong>bkg</strong></td>
<td>(ndarray) resized bkg according to <code class="xref py py-attr docutils literal"><span class="pre">Video.resolution_reduction</span></code></td>
</tr>
<tr class="row-even"><td><strong>subtract_bkg</strong></td>
<td>(bool) True if bkg subtraction is performed</td>
</tr>
<tr class="row-odd"><td><strong>original_ROI</strong></td>
<td>(ndarray) ROI of the size of frame</td>
</tr>
<tr class="row-even"><td><strong>ROI</strong></td>
<td>(ndarray) resized ROI according to <code class="xref py py-attr docutils literal"><span class="pre">Video.resolution_reduction</span></code></td>
</tr>
<tr class="row-odd"><td><strong>apply_ROI</strong></td>
<td>(bool) True if a non-trivial ROI has been specified</td>
</tr>
<tr class="row-even"><td><strong>min_threshold</strong></td>
<td>(int) minimum intensity threshold</td>
</tr>
<tr class="row-odd"><td><strong>max_threshold</strong></td>
<td>(int) maximum intensity threshold</td>
</tr>
<tr class="row-even"><td><strong>min_area</strong></td>
<td>(int) minimum blob area</td>
</tr>
<tr class="row-odd"><td><strong>max_area</strong></td>
<td>(int) maximum blob area</td>
</tr>
<tr class="row-even"><td><strong>resegmentation_parameters</strong></td>
<td>(list) segmentation parameters specific to a frame</td>
</tr>
<tr class="row-odd"><td><strong>has_preprocessing_parameters</strong></td>
<td>(bool) True if the preprocessing has been concluded succesfully</td>
</tr>
<tr class="row-even"><td><strong>maximum_number_of_blobs</strong></td>
<td>(int) Maximum number of blobs segmented from a single frame</td>
</tr>
<tr class="row-odd"><td><strong>resolution_reduction</strong></td>
<td>(float) resolution reduction to be applied to the original frame</td>
</tr>
<tr class="row-even"><td><strong>erosion_kernel_size</strong></td>
<td>(int) size of the kernel used to erode blobs while solving the crossings. See <code class="xref py py-mod docutils literal"><span class="pre">assign_them_all</span></code></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_paths_consistency_with_video_path</span></code>(…)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.check_split_video" title="video.Video.check_split_video"><code class="xref py py-obj docutils literal"><span class="pre">check_split_video</span></code></a>()</td>
<td>If the video is divided in segments retrieves their paths</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.compute_identification_image_size" title="video.Video.compute_identification_image_size"><code class="xref py py-obj docutils literal"><span class="pre">compute_identification_image_size</span></code></a>(…)</td>
<td>Uses an estimate of the body length of the animals in order to</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">compute_overall_P2</span></code>(fragments)</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">copy_attributes_between_two_video_objects</span></code>(…)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.create_accumulation_folder" title="video.Video.create_accumulation_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_accumulation_folder</span></code></a>([…])</td>
<td>Folder in which the model generated while accumulating is stored</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.create_crossings_detector_folder" title="video.Video.create_crossings_detector_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_crossings_detector_folder</span></code></a>()</td>
<td>If it does not exist creates a folder called crossing_detector</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.create_embeddings_folder" title="video.Video.create_embeddings_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_embeddings_folder</span></code></a>()</td>
<td>If it does not exist creates a folder called embedding</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.create_preprocessing_folder" title="video.Video.create_preprocessing_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_preprocessing_folder</span></code></a>()</td>
<td>If it does not exist creates a folder called preprocessing</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.create_pretraining_folder" title="video.Video.create_pretraining_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_pretraining_folder</span></code></a>([delete])</td>
<td>Creates a folder named pretraining in video_folder where the model</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.create_session_folder" title="video.Video.create_session_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_session_folder</span></code></a>([name])</td>
<td>Creates a folder named training in video_folder and a folder session_num</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.create_training_folder" title="video.Video.create_training_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_training_folder</span></code></a>()</td>
<td>Folder in which the last model is stored (after accumulation)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.create_trajectories_folder" title="video.Video.create_trajectories_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_trajectories_folder</span></code></a>()</td>
<td>Folder in which trajectories files are stored</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.create_trajectories_wo_gaps_folder" title="video.Video.create_trajectories_wo_gaps_folder"><code class="xref py py-obj docutils literal"><span class="pre">create_trajectories_wo_gaps_folder</span></code></a>()</td>
<td>Folder in which trajectories files are stored</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.get_episodes" title="video.Video.get_episodes"><code class="xref py py-obj docutils literal"><span class="pre">get_episodes</span></code></a>()</td>
<td>Split video in episodes (chunks) of 500 frames</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.get_info" title="video.Video.get_info"><code class="xref py py-obj docutils literal"><span class="pre">get_info</span></code></a>()</td>
<td>Retrieves basic information concerning the video.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#video.Video.in_which_episode" title="video.Video.in_which_episode"><code class="xref py py-obj docutils literal"><span class="pre">in_which_episode</span></code></a>(frame_number)</td>
<td>Check to which episode a frame index belongs</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">init_accumulation_statistics_attributes</span></code>([…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">init_processes_time_attributes</span></code>()</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">is_identity_transfer_possible</span></code>()</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">rename_session_folder</span></code>(new_session_name)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#video.Video.save" title="video.Video.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>()</td>
<td>save class</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">store_accumulation_statistics_data</span></code>(…[,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">store_accumulation_step_statistics_data</span></code>(…)</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">update_paths</span></code>(new_video_object_path)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">update_tensorflow_checkpoints_file</span></code>(…)</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="video.Video.blobs_path">
<code class="descname">blobs_path</code><a class="headerlink" href="#video.Video.blobs_path" title="Permalink to this definition">¶</a></dt>
<dd><p>get the path to save the blob collection after segmentation.
It checks that the segmentation has been succesfully performed</p>
</dd></dl>

<dl class="attribute">
<dt id="video.Video.blobs_path_segmented">
<code class="descname">blobs_path_segmented</code><a class="headerlink" href="#video.Video.blobs_path_segmented" title="Permalink to this definition">¶</a></dt>
<dd><p>get the path to save the blob collection after segmentation.
It checks that the segmentation has been succesfully performed</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.check_split_video">
<code class="descname">check_split_video</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.check_split_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.check_split_video" title="Permalink to this definition">¶</a></dt>
<dd><p>If the video is divided in segments retrieves their paths</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.compute_identification_image_size">
<code class="descname">compute_identification_image_size</code><span class="sig-paren">(</span><em>maximum_body_length</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.compute_identification_image_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.compute_identification_image_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses an estimate of the body length of the animals in order to
compute the size of the square image that is generated from every
blob to identify the animals</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_accumulation_folder">
<code class="descname">create_accumulation_folder</code><span class="sig-paren">(</span><em>iteration_number=0</em>, <em>delete=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_accumulation_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_accumulation_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder in which the model generated while accumulating is stored
(after pretraining)</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_crossings_detector_folder">
<code class="descname">create_crossings_detector_folder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_crossings_detector_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_crossings_detector_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>If it does not exist creates a folder called crossing_detector
in the video folder</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_embeddings_folder">
<code class="descname">create_embeddings_folder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_embeddings_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_embeddings_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>If it does not exist creates a folder called embedding
in the video folder</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_preprocessing_folder">
<code class="descname">create_preprocessing_folder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_preprocessing_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_preprocessing_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>If it does not exist creates a folder called preprocessing
in the video folder</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_pretraining_folder">
<code class="descname">create_pretraining_folder</code><span class="sig-paren">(</span><em>delete=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_pretraining_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_pretraining_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a folder named pretraining in video_folder where the model
trained during the pretraining is stored</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_session_folder">
<code class="descname">create_session_folder</code><span class="sig-paren">(</span><em>name=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_session_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_session_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a folder named training in video_folder and a folder session_num
where num is the session number and it is created everytime one starts
training a network for a certain video_path</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_training_folder">
<code class="descname">create_training_folder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_training_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_training_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder in which the last model is stored (after accumulation)</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_trajectories_folder">
<code class="descname">create_trajectories_folder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_trajectories_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_trajectories_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder in which trajectories files are stored</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.create_trajectories_wo_gaps_folder">
<code class="descname">create_trajectories_wo_gaps_folder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.create_trajectories_wo_gaps_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.create_trajectories_wo_gaps_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder in which trajectories files are stored</p>
</dd></dl>

<dl class="attribute">
<dt id="video.Video.fragments_path">
<code class="descname">fragments_path</code><a class="headerlink" href="#video.Video.fragments_path" title="Permalink to this definition">¶</a></dt>
<dd><p>get the path to save the list of global fragments after
fragmentation</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.get_episodes">
<code class="descname">get_episodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.get_episodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.get_episodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Split video in episodes (chunks) of 500 frames
for parallelisation</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.get_info">
<code class="descname">get_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.get_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves basic information concerning the video. If the video is
recorded as a single file, it generates “episodes” for parallelisation
during segmentation</p>
</dd></dl>

<dl class="attribute">
<dt id="video.Video.global_fragments_path">
<code class="descname">global_fragments_path</code><a class="headerlink" href="#video.Video.global_fragments_path" title="Permalink to this definition">¶</a></dt>
<dd><p>get the path to save the list of global fragments after
fragmentation</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.in_which_episode">
<code class="descname">in_which_episode</code><span class="sig-paren">(</span><em>frame_number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.in_which_episode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.in_which_episode" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to which episode a frame index belongs</p>
</dd></dl>

<dl class="method">
<dt id="video.Video.save">
<code class="descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/video.html#Video.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video.Video.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save class</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2018, Champalimaud Center for the Unknown.
      </li>
      <li>
      Last updated on Feb 09, 2018.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.7.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>