<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-114600635-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Preprocessing &mdash; idtrackerai v2.0.0-alpha Manual</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0-alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="search" title="Search" href="search.html" >
    <link rel="top" title="idtrackerai v2.0.0-alpha Manual" href="index.html" >
    <link rel="up" title="Code documentation" href="modules.html" > 
  </head>
  <body>

<div class="container">
  <div class="top-scipy-org-logo-header">
    <a href="index.html">
      <img style="border: 0;" alt="idtrackerai" src="_static/img/idtracker_logo.gif"></a>
    </div>
  </div>
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="https://gitlab.com/polavieja_lab/idtrackerai.git">GitLab repo</a></li>
	
        <li class="active"><a href="index.html">idtrackerai v2.0.0-alpha Manual</a></li>
	
          <li class="active"><a href="modules.html" accesskey="U">Code documentation</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Preprocessing</a><ul>
<li><a class="reference internal" href="#module-blob">Blob</a></li>
<li><a class="reference internal" href="#list-of-blobs">List of Blobs</a></li>
<li><a class="reference internal" href="#model-area">Model area</a></li>
<li><a class="reference internal" href="#module-segmentation">Segmentation</a></li>
<li><a class="reference internal" href="#module-video_utils">Segmentation utils</a></li>
</ul>
</li>
</ul>

<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="video_conditions.html">General video conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="GUI_explained.html">Graphical user interface (GUI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQs.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectories_analysis.html">Jupyter Notebooks for analysis</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
</ul>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="preprocessing">
<h1>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-blob">
<span id="blob"></span><h2>Blob<a class="headerlink" href="#module-blob" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="blob.Blob">
<em class="property">class </em><code class="descclassname">blob.</code><code class="descname">Blob</code><span class="sig-paren">(</span><em>centroid</em>, <em>contour</em>, <em>area</em>, <em>bounding_box_in_frame_coordinates</em>, <em>bounding_box_image=None</em>, <em>estimated_body_length=None</em>, <em>pixels=None</em>, <em>number_of_animals=None</em>, <em>frame_number=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob" title="Permalink to this definition">¶</a></dt>
<dd><p>Object representing a blob (collection of pixels) segmented from a frame</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>frame_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Object containing all the parameters of the video.</p>
</dd>
<dt><strong>number_of_animals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of animals to be tracked</p>
</dd>
<dt><strong>centroid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Centroid as (x,y) in frame coordinate</p>
</dd>
<dt><strong>contour: list</strong></dt>
<dd><p class="first last">List of tuples (x,y) in frame coordinate of the pixels on the boundary of the blob</p>
</dd>
<dt><strong>area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of pixels composing the blob</p>
</dd>
<dt><strong>bounding_box_in_frame_coordinates: list</strong></dt>
<dd><p class="first last">List of tuples [(x, y), (x + width, y + height)] of the bounding box rectangle enclosing the blob’s pixels</p>
</dd>
<dt><strong>bounding_box_image: ndarray</strong></dt>
<dd><p class="first last">Image obtained by clipping the frame to the bounding box</p>
</dd>
<dt><strong>estimated_body_length: float</strong></dt>
<dd><p class="first last">Body length estimated from the bounding box</p>
</dd>
<dt><strong>_image_for_identification: ndarray</strong></dt>
<dd><p class="first last">Image fed to the network to get the identity of the animal the blob is associated to</p>
</dd>
<dt><strong>pixels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of ravelled pixels belonging to the blob (wrt the full frame)</p>
</dd>
<dt><strong>_is_an_individual</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True the blob is associated to a single animal</p>
</dd>
<dt><strong>_is_a_crossing</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True the blob is associated to two or more animals touching</p>
</dd>
<dt><strong>_was_a_crossing</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True the blob has been generated by splitting a crossing in postprocessing</p>
</dd>
<dt><strong>_is_a_misclassified_individual</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">This property can be modified only by the user during validation. It identifies a blob that was by mistaken associated to a crossing by the DeepCrossingDetector</p>
</dd>
<dt><strong>next</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of blob objects segmented in self.frame_number + 1 whose list of pixels intersect self.pixels</p>
</dd>
<dt><strong>previous</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of blob objects segmented in self.frame_number - 1 whose list of pixels intersect self.pixels</p>
</dd>
<dt><strong>_fragment_identifier</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Unique integer identifying the fragment (built by blob overlapping) to which self belongs to</p>
</dd>
<dt><strong>_blob_index</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Hierarchy of the blob</p>
</dd>
<dt><strong>_used_for_training</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True the image obtained from the blob has been used to train the idCNN</p>
</dd>
<dt><strong>_accumulation_step</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Accumulation step in which the image associated to the blob has been accumulated</p>
</dd>
<dt><strong>_generated_while_closing_the_gap</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True the blob has been generated while solving the crossings</p>
</dd>
<dt><strong>_user_generated_identity</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The identity corrected manually by the user during validation</p>
</dd>
<dt><strong>_identity_corrected_closing_gaps</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The identity given to the blob during in postprocessing</p>
</dd>
<dt><strong>_identity_corrected_solving_duplication</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The identity given to the blob while solving duplications</p>
</dd>
<dt><strong>_identity</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Identity associated to the blob</p>
</dd>
<dt><strong>is_identified</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">True if self.identity is not None</p>
</dd>
<dt><strong>final_identity</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Identity assigned to self after validation</p>
</dd>
<dt><strong>assigned_identity</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Identity assigned to self by the algorithm (ignoring eventual correction made by the user during validation)</p>
</dd>
<dt><strong>has_ambiguous_identity: bool</strong></dt>
<dd><p class="first last">True if during either accumulation of residual identification the blob has
been associated with equal probability to two (or more) distinct identities</p>
</dd>
<dt><strong>nose_coordinates</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Coordinate of the nose of the blob (only for zebrafish)</p>
</dd>
<dt><strong>head_coordinates</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Coordinate of the centroid of the head of the blob (only for zebrafish)</p>
</dd>
<dt><strong>extreme1_coordinate</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd></dd>
<dt><strong>extreme2_coordinates</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.apply_model_area" title="blob.Blob.apply_model_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_model_area</span></code></a>(video,&nbsp;number_of_animals,&nbsp;…)</td>
<td>Classify self as a crossing or individual blob according to its area</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.check_for_multiple_next_or_previous" title="blob.Blob.check_for_multiple_next_or_previous"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_for_multiple_next_or_previous</span></code></a>([direction])</td>
<td>Return True if self has multiple blobs in its past or future overlapping history of the blob</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.distance_from_countour_to" title="blob.Blob.distance_from_countour_to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distance_from_countour_to</span></code></a>(point)</td>
<td>Returns the distance between the point passed as input and the closes point belonging to the contour of the blob.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.get_image_for_identification" title="blob.Blob.get_image_for_identification"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_image_for_identification</span></code></a>(video[,&nbsp;…])</td>
<td>Compute the image that will be used to identify the animal with the idCNN</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.get_nose_and_head_coordinates" title="blob.Blob.get_nose_and_head_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_nose_and_head_coordinates</span></code></a>()</td>
<td>Only for zebrafish: Compute the nose coordinate according to <a class="reference internal" href="#r5f3b1447045f-1" id="id1">[1]</a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.in_a_global_fragment_core" title="blob.Blob.in_a_global_fragment_core"><code class="xref py py-obj docutils literal notranslate"><span class="pre">in_a_global_fragment_core</span></code></a>(blobs_in_frame)</td>
<td>A blob in a frame is in the core of a global fragment if in that frame there are as many blobs as number of animals to track</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.is_a_sure_crossing" title="blob.Blob.is_a_sure_crossing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_a_sure_crossing</span></code></a>()</td>
<td>A blob marked as a sure crossing will be used to train the Deep Crossing Detector (the artificial neural network used to disriminate images associated with individual from ones associated to crossings).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.is_a_sure_individual" title="blob.Blob.is_a_sure_individual"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_a_sure_individual</span></code></a>()</td>
<td>A blob marked as a sure individual will be used to train the Deep Crossing Detector (the artificial neural network used to disriminate images associated with individual from ones associated to crossings).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.now_points_to" title="blob.Blob.now_points_to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">now_points_to</span></code></a>(other)</td>
<td>Given two consecutive blob objects updates their respective overlapping histories</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.overlaps_with" title="blob.Blob.overlaps_with"><code class="xref py py-obj docutils literal notranslate"><span class="pre">overlaps_with</span></code></a>(other)</td>
<td>Given a second blob object, checks if the lists of pixels of the two blobs intersect</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#blob.Blob.set_image_for_identification" title="blob.Blob.set_image_for_identification"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_image_for_identification</span></code></a>(video)</td>
<td>Set the image that will be used to identitfy the animal with the idCNN</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#blob.Blob.squared_distance_to" title="blob.Blob.squared_distance_to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">squared_distance_to</span></code></a>(other)</td>
<td>Returns the squared distance from the centroid of self to the centroid of other</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="81%" />
<col width="19%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>compute_overlapping_with_previous_blob</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="blob.Blob.apply_model_area">
<code class="descname">apply_model_area</code><span class="sig-paren">(</span><em>video</em>, <em>number_of_animals</em>, <em>model_area</em>, <em>identification_image_size</em>, <em>number_of_blobs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.apply_model_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.apply_model_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Classify self as a crossing or individual blob according to its area</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object containing all the parameters of the video.</p>
</dd>
<dt><strong>number_of_animals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of animals to be tracked</p>
</dd>
<dt><strong>model_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Model of the area blobs representing individual animals</p>
</dd>
<dt><strong>identification_image_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Shape of the images used for the identification</p>
</dd>
<dt><strong>number_of_blobs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of blobs segmented in the frame self.frame_number</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.check_for_multiple_next_or_previous">
<code class="descname">check_for_multiple_next_or_previous</code><span class="sig-paren">(</span><em>direction=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.check_for_multiple_next_or_previous"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.check_for_multiple_next_or_previous" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if self has multiple blobs in its past or future overlapping
history of the blob</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>direction</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">“previous” or “next”. If “previous” the past overlapping history will
be checked in order to find out if the blob will split in the past.
Symmetrically, if “next” the future overlapping history of the blob
will be checked</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Bool</strong></dt>
<dd><p class="first last">If True the blob splits into two or multiple overlapping blobs in its
“past” or “future” history, depending on the parameter “direction”</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.distance_from_countour_to">
<code class="descname">distance_from_countour_to</code><span class="sig-paren">(</span><em>point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.distance_from_countour_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.distance_from_countour_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the distance between the point passed as input and the closes
point belonging to the contour of the blob.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>point</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">(x,y)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float</strong></dt>
<dd><p class="first last"><span class="math notranslate nohighlight">\(\min_{c\in \mbox{ blob.contour}}(d(c, point))\)</span>, where <span class="math notranslate nohighlight">\(d\)</span>
is the Euclidean distance.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.get_image_for_identification">
<code class="descname">get_image_for_identification</code><span class="sig-paren">(</span><em>video</em>, <em>folder_to_save_for_paper_figure=''</em>, <em>image_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.get_image_for_identification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.get_image_for_identification" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the image that will be used to identify the animal with the idCNN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object containing all the parameters of the video.</p>
</dd>
<dt><strong>folder_to_save_for_paper_figure</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path to the folder in which the image will be saved. If ‘’ the image
will not be saved.</p>
</dd>
<dt><strong>image_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Shape of the image</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ndarray</strong></dt>
<dd><p class="first last">Stadardised image</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.get_nose_and_head_coordinates">
<code class="descname">get_nose_and_head_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.get_nose_and_head_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.get_nose_and_head_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Only for zebrafish: Compute the nose coordinate according to <a class="reference internal" href="#r5f3b1447045f-1" id="id2">[1]</a></p>
<table class="docutils citation" frame="void" id="r5f3b1447045f-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Wang, Shuo Hong, et al. “Automated planar tracking the waving
bodies of multiple zebrafish swimming in shallow water.”
PloS one 11.4 (2016): e0154714.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.in_a_global_fragment_core">
<code class="descname">in_a_global_fragment_core</code><span class="sig-paren">(</span><em>blobs_in_frame</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.in_a_global_fragment_core"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.in_a_global_fragment_core" title="Permalink to this definition">¶</a></dt>
<dd><p>A blob in a frame is in the core of a global fragment if in
that frame there are as many blobs as number of animals to track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>blobs_in_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of Blob objects representing the animals segmented in the frame
self.frame_number</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Bool</strong></dt>
<dd><p class="first last">True if the blob is in the core of a global fragment</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.is_a_sure_crossing">
<code class="descname">is_a_sure_crossing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.is_a_sure_crossing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.is_a_sure_crossing" title="Permalink to this definition">¶</a></dt>
<dd><p>A blob marked as a sure crossing will be used to train the Deep
Crossing Detector (the artificial neural network used to disriminate
images associated with individual from ones associated to crossings).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Bool</strong></dt>
<dd><p class="first">Blob is a sure crossing if:</p>
<ul class="last simple">
<li>it overlaps with one and only one blob in both the immediate past and future frames;</li>
<li>it splits in both its past and future overlapping history</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.is_a_sure_individual">
<code class="descname">is_a_sure_individual</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.is_a_sure_individual"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.is_a_sure_individual" title="Permalink to this definition">¶</a></dt>
<dd><p>A blob marked as a sure individual will be used to train the Deep
Crossing Detector (the artificial neural network used to disriminate
images associated with individual from ones associated to crossings).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Bool</strong></dt>
<dd><p class="first">Blob is a sure individual if:</p>
<ul class="last simple">
<li>it overlaps with one and only one blob in both the immediate past and future frames;</li>
<li>it never splits in both its past and future overlapping history</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.now_points_to">
<code class="descname">now_points_to</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.now_points_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.now_points_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Given two consecutive blob objects updates their respective overlapping
histories</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>other</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Blob object&gt;</span></dt>
<dd><p class="first last">An instance of the class Blob</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.overlaps_with">
<code class="descname">overlaps_with</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.overlaps_with"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.overlaps_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a second blob object, checks if the lists of pixels of the two
blobs intersect</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>other</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Blob object&gt;</span></dt>
<dd><p class="first last">An instance of the class Blob</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Bool</strong></dt>
<dd><p class="first last">True if the lists of pixels have non-empty intersection</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.set_image_for_identification">
<code class="descname">set_image_for_identification</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.set_image_for_identification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.set_image_for_identification" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the image that will be used to identitfy the animal with the idCNN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object containing all the parameters of the video.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="blob.Blob.squared_distance_to">
<code class="descname">squared_distance_to</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#Blob.squared_distance_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.Blob.squared_distance_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the squared distance from the centroid of self to the centroid
of other</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>other</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Blob object&gt; or tuple</span></dt>
<dd><p class="first last">An instance of the class Blob or a tuple (x,y)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float</strong></dt>
<dd><p class="first last">Squared distance between centroids</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="blob.full2miniframe">
<code class="descclassname">blob.</code><code class="descname">full2miniframe</code><span class="sig-paren">(</span><em>point</em>, <em>boundingBox</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#full2miniframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.full2miniframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a point in the fullframe to the coordinate system defined by the image
generated by considering the bounding box of the blob.
Here it is use for centroids</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>point</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">(x, y)</p>
</dd>
<dt><strong>boundingBox</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">[(x, y), (x + bounding_box_width, y + bounding_box_height)]</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>tuple</strong></dt>
<dd><p class="first last"><span class="math notranslate nohighlight">\((x^\prime, y^\prime)\)</span></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="blob.remove_background_pixels">
<code class="descclassname">blob.</code><code class="descname">remove_background_pixels</code><span class="sig-paren">(</span><em>height</em>, <em>width</em>, <em>bounding_box_image</em>, <em>pixels</em>, <em>bounding_box_in_frame_coordinates</em>, <em>folder_to_save_for_paper_figure</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/blob.html#remove_background_pixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#blob.remove_background_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the background pixels substiuting them with a homogeneous black
background.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>height</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Frame height</p>
</dd>
<dt><strong>width</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Frame width</p>
</dd>
<dt><strong>bounding_box_image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Images cropped from the frame by considering the bounding box associated to a blob</p>
</dd>
<dt><strong>pixels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of pixels associated to a blob</p>
</dd>
<dt><strong>bounding_box_in_frame_coordinates</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">[(x, y), (x + bounding_box_width, y + bounding_box_height)]</p>
</dd>
<dt><strong>identification_image_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">shape of the identification image</p>
</dd>
<dt><strong>folder_to_save_for_paper_figure</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">folder to save the images for identification</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ndarray</strong></dt>
<dd><p class="first last">Image with black background pixels</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="list-of-blobs">
<h2>List of Blobs<a class="headerlink" href="#list-of-blobs" title="Permalink to this headline">¶</a></h2>
<p>Collection of instances of the class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a> generated by considering
all the blobs segmented from the video.</p>
<span class="target" id="module-list_of_blobs"></span><dl class="class">
<dt id="list_of_blobs.ListOfBlobs">
<em class="property">class </em><code class="descclassname">list_of_blobs.</code><code class="descname">ListOfBlobs</code><span class="sig-paren">(</span><em>blobs_in_video=None</em>, <em>number_of_frames=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects all the instances of the class <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a> generated
from the blobs extracted from the video during segmentation
(see <a class="reference internal" href="#module-segmentation" title="segmentation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">segmentation</span></code></a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>blobs_in_video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of instances of <a class="reference internal" href="#blob.Blob" title="blob.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">Blob</span></code></a> segmented from the video and
organised framewise</p>
</dd>
<dt><strong>number_of_frames</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of frames in the video</p>
</dd>
<dt><strong>blobs_are_connected :bool</strong></dt>
<dd><p class="first last">True if the blobs have already being organised in fragments (see
<a class="reference internal" href="fragmentation.html#fragment.Fragment" title="fragment.Fragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fragment</span></code></a>). False otherwise</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.apply_model_area_to_video" title="list_of_blobs.ListOfBlobs.apply_model_area_to_video"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_model_area_to_video</span></code></a>(video,&nbsp;model_area,&nbsp;…)</td>
<td>Applies <cite>model_area</cite> to every blob extracted from video</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.check_maximal_number_of_blob" title="list_of_blobs.ListOfBlobs.check_maximal_number_of_blob"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_maximal_number_of_blob</span></code></a>(number_of_animals)</td>
<td>Checks that the amount of blobs per frame is not greater than the number of animals to track</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier" title="list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_crossing_fragment_identifier</span></code></a>()</td>
<td>Assign a unique identifier to fragments associated to a crossing</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index" title="list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_fragment_identifier_and_blob_index</span></code></a>(…)</td>
<td>Associates a unique fragment identifier to the fragments computed by overlapping see method <a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_overlapping_between_subsequent_frames()</span></code></a> and sets the blob index as the hierarchy of the blob in the first frame of the fragment to which blob belongs to.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_model_area_and_body_length" title="list_of_blobs.ListOfBlobs.compute_model_area_and_body_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_model_area_and_body_length</span></code></a>(…)</td>
<td>computes the median and standard deviation of all the blobs of the video and the median_body_length estimated from the diagonal of the bounding box.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates" title="list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_nose_and_head_coordinates</span></code></a>()</td>
<td>Computes nose and head coordinate for all the blobs segmented from the video</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_overlapping_between_subsequent_frames</span></code></a>()</td>
<td>Computes overlapping between self and the blobs generated during segmentation in the next frames</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.connect" title="list_of_blobs.ListOfBlobs.connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect</span></code></a>()</td>
<td>Connects blobs in subsequent frames by computing their overlapping</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.disconnect" title="list_of_blobs.ListOfBlobs.disconnect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">disconnect</span></code></a>()</td>
<td>Reinitialise the previous and next list of blobs (see <code class="xref py py-attr docutils literal notranslate"><span class="pre">next</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">previous</span></code>)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.erode" title="list_of_blobs.ListOfBlobs.erode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">erode</span></code></a>(video)</td>
<td>Erodes all the blobs in the video</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.get_data_plot" title="list_of_blobs.ListOfBlobs.get_data_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_data_plot</span></code></a>()</td>
<td>Gets the areas of all the blobs segmented in the video</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.load" title="list_of_blobs.ListOfBlobs.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load</span></code></a>(video,&nbsp;path_to_load_blob_list_file)</td>
<td>Short summary.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.reconnect" title="list_of_blobs.ListOfBlobs.reconnect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reconnect</span></code></a>()</td>
<td>Connects blobs in subsequent frames by computing their overlapping and sets blobs_are_connected to True</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.save" title="list_of_blobs.ListOfBlobs.save"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save</span></code></a>(video[,&nbsp;path_to_save,&nbsp;number_of_chunks])</td>
<td>save instance</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#list_of_blobs.ListOfBlobs.update_from_list_of_fragments" title="list_of_blobs.ListOfBlobs.update_from_list_of_fragments"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_from_list_of_fragments</span></code></a>(fragments,&nbsp;…)</td>
<td>Updates the blobs objects generated from the video with the attributes computed for each fragment</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.apply_model_area_to_video">
<code class="descname">apply_model_area_to_video</code><span class="sig-paren">(</span><em>video</em>, <em>model_area</em>, <em>identification_image_size</em>, <em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.apply_model_area_to_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.apply_model_area_to_video" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies <cite>model_area</cite> to every blob extracted from video</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">See <a class="reference internal" href="video_information_manager.html#video.Video" title="video.Video"><code class="xref py py-class docutils literal notranslate"><span class="pre">Video</span></code></a></p>
</dd>
<dt><strong>model_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;ModelArea object&gt;</span></dt>
<dd><p class="first last">See <a class="reference internal" href="#model_area.ModelArea" title="model_area.ModelArea"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelArea</span></code></a></p>
</dd>
<dt><strong>identification_image_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">size of the identification image (see
<a class="reference internal" href="#blob.Blob.get_image_for_identification" title="blob.Blob.get_image_for_identification"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_image_for_identification()</span></code></a> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">image_for_identification</span></code>)</p>
</dd>
<dt><strong>number_of_animals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of animals to be tracked</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.check_maximal_number_of_blob">
<code class="descname">check_maximal_number_of_blob</code><span class="sig-paren">(</span><em>number_of_animals</em>, <em>return_maximum_number_of_blobs=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.check_maximal_number_of_blob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.check_maximal_number_of_blob" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the amount of blobs per frame is not greater than the
number of animals to track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>number_of_animals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of animals to be tracked</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>list</strong></dt>
<dd><p class="first last">List of indices of frames in which more blobs than animals to track
have been segmented</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier">
<code class="descname">compute_crossing_fragment_identifier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_crossing_fragment_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_crossing_fragment_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a unique identifier to fragments associated to a crossing</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index">
<code class="descname">compute_fragment_identifier_and_blob_index</code><span class="sig-paren">(</span><em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_fragment_identifier_and_blob_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_fragment_identifier_and_blob_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Associates a unique fragment identifier to the fragments computed by
overlapping see method
<a class="reference internal" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_overlapping_between_subsequent_frames()</span></code></a> and sets the blob
index as the hierarchy of the blob in the first frame of the fragment to
which blob belongs to.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>number_of_animals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of animals to be tracked</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_model_area_and_body_length">
<code class="descname">compute_model_area_and_body_length</code><span class="sig-paren">(</span><em>number_of_animals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_model_area_and_body_length"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_model_area_and_body_length" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the median and standard deviation of all the blobs of the video
and the median_body_length estimated from the diagonal of the bounding box.
These values are later used to discard blobs that are not fish and potentially
belong to a crossing.</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates">
<code class="descname">compute_nose_and_head_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_nose_and_head_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_nose_and_head_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes nose and head coordinate for all the blobs segmented from the
video</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames">
<code class="descname">compute_overlapping_between_subsequent_frames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.compute_overlapping_between_subsequent_frames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.compute_overlapping_between_subsequent_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes overlapping between self and the blobs generated during
segmentation in the next frames</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects blobs in subsequent frames by computing their overlapping</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.disconnect">
<code class="descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reinitialise the previous and next list of blobs
(see <code class="xref py py-attr docutils literal notranslate"><span class="pre">next</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">previous</span></code>)</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.erode">
<code class="descname">erode</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.erode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.erode" title="Permalink to this definition">¶</a></dt>
<dd><p>Erodes all the blobs in the video</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">see <a class="reference internal" href="video_information_manager.html#video.Video" title="video.Video"><code class="xref py py-class docutils literal notranslate"><span class="pre">Video</span></code></a></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.get_data_plot">
<code class="descname">get_data_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.get_data_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.get_data_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the areas of all the blobs segmented in the video</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>list</strong></dt>
<dd><p class="first last">Areas of all the blobs segmented in the video</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="list_of_blobs.ListOfBlobs.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>video</em>, <em>path_to_load_blob_list_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Short summary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">See <a class="reference internal" href="video_information_manager.html#video.Video" title="video.Video"><code class="xref py py-class docutils literal notranslate"><span class="pre">Video</span></code></a></p>
</dd>
<dt><strong>path_to_load_blob_list_file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">path to load a list of blobs</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>&lt;ListOfBlobs object&gt;</strong></dt>
<dd><p class="first last">an instance of ListOfBlobs</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.reconnect">
<code class="descname">reconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.reconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.reconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects blobs in subsequent frames by computing their overlapping
and sets blobs_are_connected to True</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>video</em>, <em>path_to_save=None</em>, <em>number_of_chunks=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save instance</p>
</dd></dl>

<dl class="method">
<dt id="list_of_blobs.ListOfBlobs.update_from_list_of_fragments">
<code class="descname">update_from_list_of_fragments</code><span class="sig-paren">(</span><em>fragments</em>, <em>fragment_identifier_to_index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/list_of_blobs.html#ListOfBlobs.update_from_list_of_fragments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#list_of_blobs.ListOfBlobs.update_from_list_of_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the blobs objects generated from the video with the attributes
computed for each fragment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>fragments</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of all the fragments</p>
</dd>
<dt><strong>fragment_identifier_to_index</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">index to retrieve the fragment corresponding to a certain fragment
identifier (see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_fragment_identifier_and_blob_index()</span></code>)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="model-area">
<h2>Model area<a class="headerlink" href="#model-area" title="Permalink to this headline">¶</a></h2>
<p>Allows to apply a model of the area of the indiviudals to be tracked to all the
blobs collected during the segmentation process (see <a class="reference internal" href="#module-segmentation" title="segmentation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">segmentation</span></code></a>)</p>
<span class="target" id="module-model_area"></span><dl class="class">
<dt id="model_area.ModelArea">
<em class="property">class </em><code class="descclassname">model_area.</code><code class="descname">ModelArea</code><span class="sig-paren">(</span><em>mean</em>, <em>median</em>, <em>std</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_area.html#ModelArea"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#model_area.ModelArea" title="Permalink to this definition">¶</a></dt>
<dd><p>Model of the area used to perform a first discrimination between blobs
representing single individual and multiple touching animals (crossings)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>median</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">median of the area of the blobs segmented from portions of the video in
which all the animals are visible (not touching)</p>
</dd>
<dt><strong>mean</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">mean of the area of the blobs segmented from portions of the video in
which all the animals are visible (not touching)</p>
</dd>
<dt><strong>std</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">standard deviation of the area of the blobs segmented from portions of
the video in which all the animals are visible (not touching)</p>
</dd>
<dt><strong>std_tolerance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">tolerance factor</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">__call__</span></code>(area[,&nbsp;std_tolerance])</td>
<td>Call self as a function.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-segmentation">
<span id="segmentation"></span><h2>Segmentation<a class="headerlink" href="#module-segmentation" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="segmentation.get_blobs_in_frame">
<code class="descclassname">segmentation.</code><code class="descname">get_blobs_in_frame</code><span class="sig-paren">(</span><em>cap</em>, <em>video</em>, <em>segmentation_thresholds</em>, <em>max_number_of_blobs</em>, <em>frame_number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#get_blobs_in_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.get_blobs_in_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments a frame read from <cite>cap</cite> according to the preprocessing parameters
in <cite>video</cite>. Returns a list <cite>blobs_in_frame</cite> with the Blob objects in the frame
and the <cite>max_number_of_blobs</cite> found in the video so far. Frames are segmented
in gray scale.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>cap</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;VideoCapture object&gt;</span></dt>
<dd><p class="first last">OpenCV object used to read the frames of the video</p>
</dd>
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
<dt><strong>segmentation_thresholds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary with the thresholds used for the segmentation: <cite>min_threshold</cite>,
<cite>max_threshold</cite>, <cite>min_area</cite>, <cite>max_area</cite></p>
</dd>
<dt><strong>max_number_of_blobs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of blobs found in the whole video so far in the segmentation process</p>
</dd>
<dt><strong>frame_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of the frame being segmented. It is used to print in the terminal the frames
where the segmentation fails</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>blobs_in_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of &lt;Blob object&gt; segmented in the current frame</p>
</dd>
<dt><strong>max_number_of_blobs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of blobs found in the whole video so far in the segmentation process</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Video</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Blob</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_frame</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">blob_extractor</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="segmentation.get_videoCapture">
<code class="descclassname">segmentation.</code><code class="descname">get_videoCapture</code><span class="sig-paren">(</span><em>video</em>, <em>path</em>, <em>episode_start_end_frames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#get_videoCapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.get_videoCapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the VideoCapture (OpenCV) object to read the frames for the segmentation
and the number of frames to read. If <cite>episode_start_end_frames</cite> is None then a <cite>path</cite> must be
given as the video is assumed to be splitted in different files (episodes). If the <cite>path</cite>
is None the video is assumed to be in a single file and the path is read from
<cite>video</cite>, then <cite>episode_start_end_frames</cite> must be give.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
<dt><strong>path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the video file from where to get the VideoCapture (OpenCV) object</p>
</dd>
<dt><strong>episode_start_end_frames</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Tuple (starting_frame, ending_frame) indicanting the start and end of the episode
when the video is given in a single file</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>cap</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;VideoCapture object&gt;</span></dt>
<dd><p class="first last">OpenCV object used to read the frames of the video</p>
</dd>
<dt><strong>number_of_frames_in_episode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of frames in the episode of video being segmented</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="segmentation.resegment">
<code class="descclassname">segmentation.</code><code class="descname">resegment</code><span class="sig-paren">(</span><em>video</em>, <em>frame_number</em>, <em>list_of_blobs</em>, <em>new_segmentation_thresholds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#resegment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.resegment" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the <cite>list_of_blobs</cite> for a particular <cite>frame_number</cite> by performing
a segmentation with <cite>new_segmentation_thresholds</cite>. This function is called for
the frames in which the number of blobs is higher than the number of animals
stated by the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
<dt><strong>frame_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of the frame to update with the new segmentation</p>
</dd>
<dt><strong>list_of_blobs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;ListOfBlobs object&gt;</span></dt>
<dd><p class="first last">Object containing the list of blobs segmented in the video in each frame</p>
</dd>
<dt><strong>new_segmentation_thresholds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary with the thresholds used for the new segmentation: <cite>min_threshold</cite>,
<cite>max_threshold</cite>, <cite>min_area</cite>, <cite>max_area</cite></p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>number_of_blobs_in_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of blobs found in the frame</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#segmentation.get_videoCapture" title="segmentation.get_videoCapture"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_videoCapture</span></code></a>, <a class="reference internal" href="#segmentation.get_blobs_in_frame" title="segmentation.get_blobs_in_frame"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blobs_in_frame</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="segmentation.segment">
<code class="descclassname">segmentation.</code><code class="descname">segment</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#segment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Segment the video giving a list of <cite>blobs</cite> for every frame in the video.
If a video is given as a set of files (episodes), those files are used to
parallelise the segmentation process. If a video is given in a single file
the list of indices <cite>video.episodes_start_end</cite> is used for the parallelisation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>blobs_in_video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of <cite>blobs_in_frame</cite> for all the frames of the video</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#segmentation.segment_episode" title="segmentation.segment_episode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_episode</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="segmentation.segment_episode">
<code class="descclassname">segmentation.</code><code class="descname">segment_episode</code><span class="sig-paren">(</span><em>video</em>, <em>segmentation_thresholds</em>, <em>path=None</em>, <em>episode_start_end_frames=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/segmentation.html#segment_episode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#segmentation.segment_episode" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets list of blobs segmented in every frame of the episode of the video
given by <cite>path</cite> (if the video is splitted in different files) or by
<cite>episode_start_end_frames</cite> (if the video is given in a single file)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
<dt><strong>segmentation_thresholds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary with the thresholds used for the segmentation: <cite>min_threshold</cite>,
<cite>max_threshold</cite>, <cite>min_area</cite>, <cite>max_area</cite></p>
</dd>
<dt><strong>path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the video file from where to get the VideoCapture (OpenCV) object</p>
</dd>
<dt><strong>episode_start_end_frames</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Tuple (starting_frame, ending_frame) indicanting the start and end of the episode
when the video is given in a single file</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>blobs_in_episode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of <cite>blobs_in_frame</cite> of the episode of the video being segmented</p>
</dd>
<dt><strong>max_number_of_blobs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of blobs found in the episode of the video being segmented</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Video</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Blob</span></code>, <a class="reference internal" href="#segmentation.get_videoCapture" title="segmentation.get_videoCapture"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_videoCapture</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_frame</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">blob_extractor</span></code></p>
</div>
</dd></dl>

</div>
<div class="section" id="module-video_utils">
<span id="segmentation-utils"></span><h2>Segmentation utils<a class="headerlink" href="#module-video_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="video_utils.blob_extractor">
<code class="descclassname">video_utils.</code><code class="descname">blob_extractor</code><span class="sig-paren">(</span><em>segmented_frame</em>, <em>frame</em>, <em>min_area</em>, <em>max_area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#blob_extractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.blob_extractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <cite>segmented_frame</cite> it extracts the blobs with area greater than
<cite>min_area</cite> and smaller than <cite>max_area</cite> and it computes a set of relevant
properties for every blob.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>segmented_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Frame with zeros and ones where ones are valid pixels.</p>
</dd>
<dt><strong>frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Frame from where to extract the <cite>bounding_box_image</cite> of every blob</p>
</dd>
<dt><strong>min_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Minimum number of blobs above which a blob is considered to be valid</p>
</dd>
<dt><strong>max_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of blobs below which a blob is considered to be valid</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bounding_boxes</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>bounding_box</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>bounding_box_images</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>bounding_box_image</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>centroids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>centroid</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>areas</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>area</cite> in pixels for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>pixels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>pixels</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>good_contours_in_full_frame:</strong></dt>
<dd><p class="first last">List with the <cite>contours</cite> which area is in between <cite>min_area</cite> and <cite>max_area</cite></p>
</dd>
<dt><strong>estimated_body_lengths</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>estimated_body_length</cite> for every contour in <cite>contours</cite></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.filter_contours_by_area" title="video_utils.filter_contours_by_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_contours_by_area</span></code></a>, <a class="reference internal" href="#video_utils.get_blobs_information_per_frame" title="video_utils.get_blobs_information_per_frame"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blobs_information_per_frame</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.check_background_substraction">
<code class="descclassname">video_utils.</code><code class="descname">check_background_substraction</code><span class="sig-paren">(</span><em>video</em>, <em>old_video</em>, <em>use_previous_background</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#check_background_substraction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.check_background_substraction" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether background substraction must be used and in that case it
checks whether a previous computed background can be used. Otherwise it
computes the background model from scracth or it returns None if background
substraction must not be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
<dt><strong>old_video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Same object as video but with the information of a previous tracking session</p>
</dd>
<dt><strong>use_previous_background</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Indicates whether the background computed in a previous session must be used or not</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Array with the model of the background.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.cumpute_background" title="video_utils.cumpute_background"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cumpute_background</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.cnt2BoundingBox">
<code class="descclassname">video_utils.</code><code class="descname">cnt2BoundingBox</code><span class="sig-paren">(</span><em>cnt</em>, <em>bounding_box</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#cnt2BoundingBox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.cnt2BoundingBox" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the coordinates of the contour in the full frame to the the
bounding box of the blob.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>cnt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</dd>
<dt><strong>bounding_box</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Tuple with the coordinates of the bounding box (x, y),(x + w, y + h))</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>contour_in_bounding_box</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Array with the pairs of coordinates of the contour in the bounding box</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.cumpute_background">
<code class="descclassname">video_utils.</code><code class="descname">cumpute_background</code><span class="sig-paren">(</span><em>video</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#cumpute_background"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.cumpute_background" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a model of the background by averaging multiple frames of the video.
In particular 1 every 100 frames is used for the computation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&lt;Video object&gt;</span></dt>
<dd><p class="first last">Object collecting all the parameters of the video and paths for saving and loading</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Array with the model of the background.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.sum_frames_for_bkg_per_episode_in_single_file_video" title="video_utils.sum_frames_for_bkg_per_episode_in_single_file_video"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sum_frames_for_bkg_per_episode_in_single_file_video</span></code></a>, <a class="reference internal" href="#video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video" title="video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sum_frames_for_bkg_per_episode_in_multiple_files_video</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.filter_contours_by_area">
<code class="descclassname">video_utils.</code><code class="descname">filter_contours_by_area</code><span class="sig-paren">(</span><em>contours</em>, <em>min_area</em>, <em>max_area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#filter_contours_by_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.filter_contours_by_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out contours which number of pixels is smaller than <cite>min_area</cite> or
greater than <cite>max_area</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>contours</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of OpenCV contours</p>
</dd>
<dt><strong>min_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Minimum number of pixels for a contour to be acceptable</p>
</dd>
<dt><strong>max_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of pixels for a contours to be acceptable</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>good_contours</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of OpenCV contours that fulfill both area thresholds</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.getCentroid">
<code class="descclassname">video_utils.</code><code class="descname">getCentroid</code><span class="sig-paren">(</span><em>cnt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#getCentroid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.getCentroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the centroid of the contour</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>cnt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>centroid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">(x,y) coordinates of the center of mass of the contour.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_blobs_information_per_frame">
<code class="descclassname">video_utils.</code><code class="descname">get_blobs_information_per_frame</code><span class="sig-paren">(</span><em>frame</em>, <em>contours</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_blobs_information_per_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_blobs_information_per_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a set of properties for all the <cite>contours</cite> in a given frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Frame from where to extract the <cite>bounding_box_image</cite> of every contour</p>
</dd>
<dt><strong>contours</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of OpenCV contours for which to compute the set of properties</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bounding_boxes</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>bounding_box</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>bounding_box_images</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>bounding_box_image</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>centroids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>centroid</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>areas</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>area</cite> in pixels for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>pixels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>pixels</cite> for every contour in <cite>contours</cite></p>
</dd>
<dt><strong>estimated_body_lengths</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List with the <cite>estimated_body_length</cite> for every contour in <cite>contours</cite></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.get_bounding_box_image" title="video_utils.get_bounding_box_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_bounding_box_image</span></code></a>, <a class="reference internal" href="#video_utils.getCentroid" title="video_utils.getCentroid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCentroid</span></code></a>, <a class="reference internal" href="#video_utils.get_pixels" title="video_utils.get_pixels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_pixels</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_bounding_box">
<code class="descclassname">video_utils.</code><code class="descname">get_bounding_box</code><span class="sig-paren">(</span><em>cnt</em>, <em>width</em>, <em>height</em>, <em>crossing_detector=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_bounding_box"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the bounding box of a given contour with an extra margin of 45
pixels. If the function is called with the crossing_detector set to True the
margin of the bounding box is set to 55.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>cnt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</dd>
<dt><strong>width</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Width of the video frame</p>
</dd>
<dt><strong>height</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Height of the video frame</p>
</dd>
<dt><strong>crossing_detector</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Flag to indicate whether the function is being called from the crossing_detector module</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bounding_box</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Tuple with the coordinates of the bounding box (x, y),(x + w, y + h))</p>
</dd>
<dt><strong>original_diagonal</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Diagonal of the original bounding box computed with OpenCv that serves as
an estimate for the body length of the animal.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_bounding_box_image">
<code class="descclassname">video_utils.</code><code class="descname">get_bounding_box_image</code><span class="sig-paren">(</span><em>frame</em>, <em>cnt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_bounding_box_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_bounding_box_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the <cite>bounding_box_image`from a given frame and contour. It also
returns the coordinates of the `bounding_box</cite>, the ravelled <cite>pixels</cite> inside of
the contour and the diagonal of the <cite>bounding_box</cite> as an <cite>estimated_body_length</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">frame from where to extract the <cite>bounding_box_image</cite></p>
</dd>
<dt><strong>cnt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of the coordinates that defines the contour of the blob in the full
frame of the video</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bounding_box</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Tuple with the coordinates of the bounding box (x, y),(x + w, y + h))</p>
</dd>
<dt><strong>bounding_box_image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Part of the <cite>frame</cite> defined by the coordinates in <cite>bounding_box</cite></p>
</dd>
<dt><strong>pixels_in_full_frame_ravelled</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of ravelled pixels coordinates inside of the given contour</p>
</dd>
<dt><strong>estimated_body_length</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Estimated length of the contour in pixels.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#video_utils.get_bounding_box" title="video_utils.get_bounding_box"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_bounding_box</span></code></a>, <a class="reference internal" href="#video_utils.cnt2BoundingBox" title="video_utils.cnt2BoundingBox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cnt2BoundingBox</span></code></a>, <a class="reference internal" href="#video_utils.get_pixels" title="video_utils.get_pixels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_pixels</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="video_utils.get_pixels">
<code class="descclassname">video_utils.</code><code class="descname">get_pixels</code><span class="sig-paren">(</span><em>cnt</em>, <em>width</em>, <em>height</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#get_pixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.get_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the coordinates list of the pixels inside the contour</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>cnt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of the coordinates that defines the contour of the blob in a give
width and height (it can either be the video width and heigh or the
bounding box width and height)</p>
</dd>
<dt><strong>width</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Width of the frame</p>
</dd>
<dt><strong>height</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Height of the frame</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pixels_coordinates_list</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of the coordinates of the pixels in a given width and height</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.segment_frame">
<code class="descclassname">video_utils.</code><code class="descname">segment_frame</code><span class="sig-paren">(</span><em>frame</em>, <em>min_threshold</em>, <em>max_threshold</em>, <em>bkg</em>, <em>ROI</em>, <em>useBkg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#segment_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.segment_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the intensity thresholds (<cite>min_threshold</cite> and <cite>max_threshold</cite>) and the
mask (<cite>ROI</cite>) to a given frame. If <cite>useBkg</cite> is True, the background subtraction
operation is applied before thresholding with the given <cite>bkg</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Frame to be segmented</p>
</dd>
<dt><strong>min_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Minimum intensity threshold for the segmentation (value from 0 to 255)</p>
</dd>
<dt><strong>max_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum intensity threshold for the segmentation (value from 0 to 255)</p>
</dd>
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Background model to be used in the background subtraction operation</p>
</dd>
<dt><strong>ROI</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Mask to be applied after thresholding. Ones in the array are pixels to be
considered, zeros are pixels to be discarded.</p>
</dd>
<dt><strong>useBkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Flag indicating whether background subtraction must be performed or not</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>frame_segmented_and_masked</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Frame with zeros and ones after applying the thresholding and the mask.
Pixels with value 1 are valid pixels given the thresholds and the mask.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video">
<code class="descclassname">video_utils.</code><code class="descname">sum_frames_for_bkg_per_episode_in_multiple_files_video</code><span class="sig-paren">(</span><em>video_path</em>, <em>bkg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#sum_frames_for_bkg_per_episode_in_multiple_files_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.sum_frames_for_bkg_per_episode_in_multiple_files_video" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the sum of frames (1 every 100 frames) for a particular episode of
the video when the video is splitted in several files</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>video_path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the file of the episode to be added to the background</p>
</dd>
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Zeros array with same width and height as the frame of the video.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Array with same width and height as the frame of the video. Contains the
sum of (ending_frame - starting_frame) / 100 frames for the given episode</p>
</dd>
<dt><strong>number_of_frames_for_bkg_in_episode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of frames used to compute the background in the current episode</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="video_utils.sum_frames_for_bkg_per_episode_in_single_file_video">
<code class="descclassname">video_utils.</code><code class="descname">sum_frames_for_bkg_per_episode_in_single_file_video</code><span class="sig-paren">(</span><em>starting_frame</em>, <em>ending_frame</em>, <em>video_path</em>, <em>bkg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/video_utils.html#sum_frames_for_bkg_per_episode_in_single_file_video"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#video_utils.sum_frames_for_bkg_per_episode_in_single_file_video" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the sum of frames (1 every 100 frames) for a particular episode of
the video when the video is a single file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>starting_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">First frame of the episode</p>
</dd>
<dt><strong>ending_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Last frame of the episode</p>
</dd>
<dt><strong>video_path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the single file of the video</p>
</dd>
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Zeros array with same width and height as the frame of the video.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">nd.array</span></dt>
<dd><p class="first last">Array with same width and height as the frame of the video. Contains the
sum of (ending_frame - starting_frame) / 100 frames for the given episode</p>
</dd>
<dt><strong>number_of_frames_for_bkg_in_episode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of frames used to compute the background in the current episode</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2018, Champalimaud Center for the Unknown.
      </li>
      <li>
      Last updated on Jan 12, 2019.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.2.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>